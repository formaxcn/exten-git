var M0=Object.create;var Ui=Object.defineProperty;var j0=Object.getOwnPropertyDescriptor;var z0=Object.getOwnPropertyNames;var L0=Object.getPrototypeOf,q0=Object.prototype.hasOwnProperty;var O=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),H0=(e,t)=>{for(var r in t)Ui(e,r,{get:t[r],enumerable:!0})},G0=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of z0(t))!q0.call(e,i)&&i!==r&&Ui(e,i,{get:()=>t[i],enumerable:!(n=j0(t,i))||n.enumerable});return e};var Rn=(e,t,r)=>(r=e!=null?M0(L0(e)):{},G0(t||!e||!e.__esModule?Ui(r,"default",{value:e,enumerable:!0}):r,e));var Zo=O((R1,Go)=>{"use strict";var bt=function(e){if(e=e||{},this.Promise=e.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=e.domainReentrant||!1,this.domainReentrant){if(typeof process>"u"||typeof process.domain>"u")throw new Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=e.timeout||bt.DEFAULT_TIMEOUT,this.maxOccupationTime=e.maxOccupationTime||bt.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=e.maxExecutionTime||bt.DEFAULT_MAX_EXECUTION_TIME,e.maxPending===1/0||Number.isInteger(e.maxPending)&&e.maxPending>=0?this.maxPending=e.maxPending:this.maxPending=bt.DEFAULT_MAX_PENDING};bt.DEFAULT_TIMEOUT=0;bt.DEFAULT_MAX_OCCUPATION_TIME=0;bt.DEFAULT_MAX_EXECUTION_TIME=0;bt.DEFAULT_MAX_PENDING=1e3;bt.prototype.acquire=function(e,t,r,n){if(Array.isArray(e))return this._acquireBatch(e,t,r,n);if(typeof t!="function")throw new Error("You must pass a function to execute");var i=null,a=null,o=null;typeof r!="function"&&(n=r,r=null,o=new this.Promise(function(g,S){i=g,a=S})),n=n||{};var s=!1,l=null,f=null,c=null,u=this,h=function(g,S,k){f&&(clearTimeout(f),f=null),c&&(clearTimeout(c),c=null),g&&(u.queues[e]&&u.queues[e].length===0&&delete u.queues[e],u.domainReentrant&&delete u.domains[e]),s||(o?S?a(S):i(k):typeof r=="function"&&r(S,k),s=!0),g&&u.queues[e]&&u.queues[e].length>0&&u.queues[e].shift()()},d=function(g){if(s)return h(g);l&&(clearTimeout(l),l=null),u.domainReentrant&&g&&(u.domains[e]=process.domain);var S=n.maxExecutionTime||u.maxExecutionTime;if(S&&(c=setTimeout(function(){u.queues[e]&&h(g,new Error("Maximum execution time is exceeded "+e))},S)),t.length===1){var k=!1;try{t(function(E,A){k||(k=!0,h(g,E,A))})}catch(E){k||(k=!0,h(g,E))}}else u._promiseTry(function(){return t()}).then(function(E){h(g,void 0,E)},function(E){h(g,E)})};u.domainReentrant&&process.domain&&(d=process.domain.bind(d));var p=n.maxPending||u.maxPending;if(!u.queues[e])u.queues[e]=[],d(!0);else if(u.domainReentrant&&process.domain&&process.domain===u.domains[e])d(!1);else if(u.queues[e].length>=p)h(!1,new Error("Too many pending tasks in queue "+e));else{var y=function(){d(!0)};n.skipQueue?u.queues[e].unshift(y):u.queues[e].push(y);var v=n.timeout||u.timeout;v&&(l=setTimeout(function(){l=null,h(!1,new Error("async-lock timed out in queue "+e))},v))}var m=n.maxOccupationTime||u.maxOccupationTime;if(m&&(f=setTimeout(function(){u.queues[e]&&h(!1,new Error("Maximum occupation time is exceeded in queue "+e))},m)),o)return o};bt.prototype._acquireBatch=function(e,t,r,n){typeof r!="function"&&(n=r,r=null);var i=this,a=function(s,l){return function(f){i.acquire(s,l,f,n)}},o=e.reduceRight(function(s,l){return a(l,s)},t);if(typeof r=="function")o(r);else return new this.Promise(function(s,l){o.length===1?o(function(f,c){f?l(f):s(c)}):s(o())})};bt.prototype.isBusy=function(e){return e?!!this.queues[e]:Object.keys(this.queues).length>0};bt.prototype._promiseTry=function(e){try{return this.Promise.resolve(e())}catch(t){return this.Promise.reject(t)}};Go.exports=bt});var Xo=O((O1,Wo)=>{"use strict";Wo.exports=Zo()});var Vo=O(($1,Ni)=>{typeof Object.create=="function"?Ni.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Ni.exports=function(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}}});var Jo=O(On=>{"use strict";On.byteLength=W0;On.toByteArray=V0;On.fromByteArray=J0;var jt=[],At=[],Z0=typeof Uint8Array<"u"?Uint8Array:Array,Mi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Se=0,Yo=Mi.length;Se<Yo;++Se)jt[Se]=Mi[Se],At[Mi.charCodeAt(Se)]=Se;var Se,Yo;At[45]=62;At[95]=63;function Ko(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function W0(e){var t=Ko(e),r=t[0],n=t[1];return(r+n)*3/4-n}function X0(e,t,r){return(t+r)*3/4-r}function V0(e){var t,r=Ko(e),n=r[0],i=r[1],a=new Z0(X0(e,n,i)),o=0,s=i>0?n-4:n,l;for(l=0;l<s;l+=4)t=At[e.charCodeAt(l)]<<18|At[e.charCodeAt(l+1)]<<12|At[e.charCodeAt(l+2)]<<6|At[e.charCodeAt(l+3)],a[o++]=t>>16&255,a[o++]=t>>8&255,a[o++]=t&255;return i===2&&(t=At[e.charCodeAt(l)]<<2|At[e.charCodeAt(l+1)]>>4,a[o++]=t&255),i===1&&(t=At[e.charCodeAt(l)]<<10|At[e.charCodeAt(l+1)]<<4|At[e.charCodeAt(l+2)]>>2,a[o++]=t>>8&255,a[o++]=t&255),a}function Y0(e){return jt[e>>18&63]+jt[e>>12&63]+jt[e>>6&63]+jt[e&63]}function K0(e,t,r){for(var n,i=[],a=t;a<r;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(e[a+2]&255),i.push(Y0(n));return i.join("")}function J0(e){for(var t,r=e.length,n=r%3,i=[],a=16383,o=0,s=r-n;o<s;o+=a)i.push(K0(e,o,o+a>s?s:o+a));return n===1?(t=e[r-1],i.push(jt[t>>2]+jt[t<<4&63]+"==")):n===2&&(t=(e[r-2]<<8)+e[r-1],i.push(jt[t>>10]+jt[t>>4&63]+jt[t<<2&63]+"=")),i.join("")}});var Qo=O(ji=>{ji.read=function(e,t,r,n,i){var a,o,s=i*8-n-1,l=(1<<s)-1,f=l>>1,c=-7,u=r?i-1:0,h=r?-1:1,d=e[t+u];for(u+=h,a=d&(1<<-c)-1,d>>=-c,c+=s;c>0;a=a*256+e[t+u],u+=h,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=n;c>0;o=o*256+e[t+u],u+=h,c-=8);if(a===0)a=1-f;else{if(a===l)return o?NaN:(d?-1:1)*(1/0);o=o+Math.pow(2,n),a=a-f}return(d?-1:1)*o*Math.pow(2,a-n)};ji.write=function(e,t,r,n,i,a){var o,s,l,f=a*8-i-1,c=(1<<f)-1,u=c>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:a-1,p=n?1:-1,y=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+u>=1?t+=h/l:t+=h*Math.pow(2,1-u),t*l>=2&&(o++,l/=2),o+u>=c?(s=0,o=c):o+u>=1?(s=(t*l-1)*Math.pow(2,i),o=o+u):(s=t*Math.pow(2,u-1)*Math.pow(2,i),o=0));i>=8;e[r+d]=s&255,d+=p,s/=256,i-=8);for(o=o<<i|s,f+=i;f>0;e[r+d]=o&255,d+=p,o/=256,f-=8);e[r+d-p]|=y*128}});var Vi=O(We=>{"use strict";var zi=Jo(),Ge=Qo(),ts=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;We.Buffer=I;We.SlowBuffer=ip;We.INSPECT_MAX_BYTES=50;var $n=2147483647;We.kMaxLength=$n;I.TYPED_ARRAY_SUPPORT=Q0();!I.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Q0(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch{return!1}}Object.defineProperty(I.prototype,"parent",{enumerable:!0,get:function(){if(I.isBuffer(this))return this.buffer}});Object.defineProperty(I.prototype,"offset",{enumerable:!0,get:function(){if(I.isBuffer(this))return this.byteOffset}});function Jt(e){if(e>$n)throw new RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,I.prototype),t}function I(e,t,r){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Gi(e)}return is(e,t,r)}I.poolSize=8192;function is(e,t,r){if(typeof e=="string")return ep(e,t);if(ArrayBuffer.isView(e))return rp(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(zt(e,ArrayBuffer)||e&&zt(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(zt(e,SharedArrayBuffer)||e&&zt(e.buffer,SharedArrayBuffer)))return qi(e,t,r);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=e.valueOf&&e.valueOf();if(n!=null&&n!==e)return I.from(n,t,r);let i=np(e);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return I.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}I.from=function(e,t,r){return is(e,t,r)};Object.setPrototypeOf(I.prototype,Uint8Array.prototype);Object.setPrototypeOf(I,Uint8Array);function as(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function tp(e,t,r){return as(e),e<=0?Jt(e):t!==void 0?typeof r=="string"?Jt(e).fill(t,r):Jt(e).fill(t):Jt(e)}I.alloc=function(e,t,r){return tp(e,t,r)};function Gi(e){return as(e),Jt(e<0?0:Zi(e)|0)}I.allocUnsafe=function(e){return Gi(e)};I.allocUnsafeSlow=function(e){return Gi(e)};function ep(e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!I.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let r=os(e,t)|0,n=Jt(r),i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}function Li(e){let t=e.length<0?0:Zi(e.length)|0,r=Jt(t);for(let n=0;n<t;n+=1)r[n]=e[n]&255;return r}function rp(e){if(zt(e,Uint8Array)){let t=new Uint8Array(e);return qi(t.buffer,t.byteOffset,t.byteLength)}return Li(e)}function qi(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return t===void 0&&r===void 0?n=new Uint8Array(e):r===void 0?n=new Uint8Array(e,t):n=new Uint8Array(e,t,r),Object.setPrototypeOf(n,I.prototype),n}function np(e){if(I.isBuffer(e)){let t=Zi(e.length)|0,r=Jt(t);return r.length===0||e.copy(r,0,0,t),r}if(e.length!==void 0)return typeof e.length!="number"||Xi(e.length)?Jt(0):Li(e);if(e.type==="Buffer"&&Array.isArray(e.data))return Li(e.data)}function Zi(e){if(e>=$n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+$n.toString(16)+" bytes");return e|0}function ip(e){return+e!=e&&(e=0),I.alloc(+e)}I.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==I.prototype};I.compare=function(t,r){if(zt(t,Uint8Array)&&(t=I.from(t,t.offset,t.byteLength)),zt(r,Uint8Array)&&(r=I.from(r,r.offset,r.byteLength)),!I.isBuffer(t)||!I.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===r)return 0;let n=t.length,i=r.length;for(let a=0,o=Math.min(n,i);a<o;++a)if(t[a]!==r[a]){n=t[a],i=r[a];break}return n<i?-1:i<n?1:0};I.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};I.concat=function(t,r){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return I.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<t.length;++n)r+=t[n].length;let i=I.allocUnsafe(r),a=0;for(n=0;n<t.length;++n){let o=t[n];if(zt(o,Uint8Array))a+o.length>i.length?(I.isBuffer(o)||(o=I.from(o)),o.copy(i,a)):Uint8Array.prototype.set.call(i,o,a);else if(I.isBuffer(o))o.copy(i,a);else throw new TypeError('"list" argument must be an Array of Buffers');a+=o.length}return i};function os(e,t){if(I.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||zt(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Hi(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return ws(e).length;default:if(i)return n?-1:Hi(e).length;t=(""+t).toLowerCase(),i=!0}}I.byteLength=os;function ap(e,t,r){let n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,t>>>=0,r<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return wp(this,t,r);case"utf8":case"utf-8":return cs(this,t,r);case"ascii":return dp(this,t,r);case"latin1":case"binary":return pp(this,t,r);case"base64":return up(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return mp(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}I.prototype._isBuffer=!0;function Ae(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}I.prototype.swap16=function(){let t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<t;r+=2)Ae(this,r,r+1);return this};I.prototype.swap32=function(){let t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<t;r+=4)Ae(this,r,r+3),Ae(this,r+1,r+2);return this};I.prototype.swap64=function(){let t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<t;r+=8)Ae(this,r,r+7),Ae(this,r+1,r+6),Ae(this,r+2,r+5),Ae(this,r+3,r+4);return this};I.prototype.toString=function(){let t=this.length;return t===0?"":arguments.length===0?cs(this,0,t):ap.apply(this,arguments)};I.prototype.toLocaleString=I.prototype.toString;I.prototype.equals=function(t){if(!I.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:I.compare(this,t)===0};I.prototype.inspect=function(){let t="",r=We.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"};ts&&(I.prototype[ts]=I.prototype.inspect);I.prototype.compare=function(t,r,n,i,a){if(zt(t,Uint8Array)&&(t=I.from(t,t.offset,t.byteLength)),!I.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(r===void 0&&(r=0),n===void 0&&(n=t?t.length:0),i===void 0&&(i=0),a===void 0&&(a=this.length),r<0||n>t.length||i<0||a>this.length)throw new RangeError("out of range index");if(i>=a&&r>=n)return 0;if(i>=a)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,a>>>=0,this===t)return 0;let o=a-i,s=n-r,l=Math.min(o,s),f=this.slice(i,a),c=t.slice(r,n);for(let u=0;u<l;++u)if(f[u]!==c[u]){o=f[u],s=c[u];break}return o<s?-1:s<o?1:0};function ss(e,t,r,n,i){if(e.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,Xi(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof t=="string"&&(t=I.from(t,n)),I.isBuffer(t))return t.length===0?-1:es(e,t,r,n,i);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):es(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function es(e,t,r,n,i){let a=1,o=e.length,s=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(e.length<2||t.length<2)return-1;a=2,o/=2,s/=2,r/=2}function l(c,u){return a===1?c[u]:c.readUInt16BE(u*a)}let f;if(i){let c=-1;for(f=r;f<o;f++)if(l(e,f)===l(t,c===-1?0:f-c)){if(c===-1&&(c=f),f-c+1===s)return c*a}else c!==-1&&(f-=f-c),c=-1}else for(r+s>o&&(r=o-s),f=r;f>=0;f--){let c=!0;for(let u=0;u<s;u++)if(l(e,f+u)!==l(t,u)){c=!1;break}if(c)return f}return-1}I.prototype.includes=function(t,r,n){return this.indexOf(t,r,n)!==-1};I.prototype.indexOf=function(t,r,n){return ss(this,t,r,n,!0)};I.prototype.lastIndexOf=function(t,r,n){return ss(this,t,r,n,!1)};function op(e,t,r,n){r=Number(r)||0;let i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;let a=t.length;n>a/2&&(n=a/2);let o;for(o=0;o<n;++o){let s=parseInt(t.substr(o*2,2),16);if(Xi(s))return o;e[r+o]=s}return o}function sp(e,t,r,n){return Pn(Hi(t,e.length-r),e,r,n)}function cp(e,t,r,n){return Pn(bp(t),e,r,n)}function fp(e,t,r,n){return Pn(ws(t),e,r,n)}function lp(e,t,r,n){return Pn(vp(t,e.length-r),e,r,n)}I.prototype.write=function(t,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let a=this.length-r;if((n===void 0||n>a)&&(n=a),t.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let o=!1;for(;;)switch(i){case"hex":return op(this,t,r,n);case"utf8":case"utf-8":return sp(this,t,r,n);case"ascii":case"latin1":case"binary":return cp(this,t,r,n);case"base64":return fp(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return lp(this,t,r,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}};I.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function up(e,t,r){return t===0&&r===e.length?zi.fromByteArray(e):zi.fromByteArray(e.slice(t,r))}function cs(e,t,r){r=Math.min(e.length,r);let n=[],i=t;for(;i<r;){let a=e[i],o=null,s=a>239?4:a>223?3:a>191?2:1;if(i+s<=r){let l,f,c,u;switch(s){case 1:a<128&&(o=a);break;case 2:l=e[i+1],(l&192)===128&&(u=(a&31)<<6|l&63,u>127&&(o=u));break;case 3:l=e[i+1],f=e[i+2],(l&192)===128&&(f&192)===128&&(u=(a&15)<<12|(l&63)<<6|f&63,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:l=e[i+1],f=e[i+2],c=e[i+3],(l&192)===128&&(f&192)===128&&(c&192)===128&&(u=(a&15)<<18|(l&63)<<12|(f&63)<<6|c&63,u>65535&&u<1114112&&(o=u))}}o===null?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),i+=s}return hp(n)}var rs=4096;function hp(e){let t=e.length;if(t<=rs)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=rs));return r}function dp(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]&127);return n}function pp(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function wp(e,t,r){let n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let a=t;a<r;++a)i+=xp[e[a]];return i}function mp(e,t,r){let n=e.slice(t,r),i="";for(let a=0;a<n.length-1;a+=2)i+=String.fromCharCode(n[a]+n[a+1]*256);return i}I.prototype.slice=function(t,r){let n=this.length;t=~~t,r=r===void 0?n:~~r,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<t&&(r=t);let i=this.subarray(t,r);return Object.setPrototypeOf(i,I.prototype),i};function et(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}I.prototype.readUintLE=I.prototype.readUIntLE=function(t,r,n){t=t>>>0,r=r>>>0,n||et(t,r,this.length);let i=this[t],a=1,o=0;for(;++o<r&&(a*=256);)i+=this[t+o]*a;return i};I.prototype.readUintBE=I.prototype.readUIntBE=function(t,r,n){t=t>>>0,r=r>>>0,n||et(t,r,this.length);let i=this[t+--r],a=1;for(;r>0&&(a*=256);)i+=this[t+--r]*a;return i};I.prototype.readUint8=I.prototype.readUInt8=function(t,r){return t=t>>>0,r||et(t,1,this.length),this[t]};I.prototype.readUint16LE=I.prototype.readUInt16LE=function(t,r){return t=t>>>0,r||et(t,2,this.length),this[t]|this[t+1]<<8};I.prototype.readUint16BE=I.prototype.readUInt16BE=function(t,r){return t=t>>>0,r||et(t,2,this.length),this[t]<<8|this[t+1]};I.prototype.readUint32LE=I.prototype.readUInt32LE=function(t,r){return t=t>>>0,r||et(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};I.prototype.readUint32BE=I.prototype.readUInt32BE=function(t,r){return t=t>>>0,r||et(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};I.prototype.readBigUInt64LE=oe(function(t){t=t>>>0,Ze(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&Fr(t,this.length-8);let i=r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,a=this[++t]+this[++t]*2**8+this[++t]*2**16+n*2**24;return BigInt(i)+(BigInt(a)<<BigInt(32))});I.prototype.readBigUInt64BE=oe(function(t){t=t>>>0,Ze(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&Fr(t,this.length-8);let i=r*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],a=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(a)});I.prototype.readIntLE=function(t,r,n){t=t>>>0,r=r>>>0,n||et(t,r,this.length);let i=this[t],a=1,o=0;for(;++o<r&&(a*=256);)i+=this[t+o]*a;return a*=128,i>=a&&(i-=Math.pow(2,8*r)),i};I.prototype.readIntBE=function(t,r,n){t=t>>>0,r=r>>>0,n||et(t,r,this.length);let i=r,a=1,o=this[t+--i];for(;i>0&&(a*=256);)o+=this[t+--i]*a;return a*=128,o>=a&&(o-=Math.pow(2,8*r)),o};I.prototype.readInt8=function(t,r){return t=t>>>0,r||et(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};I.prototype.readInt16LE=function(t,r){t=t>>>0,r||et(t,2,this.length);let n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};I.prototype.readInt16BE=function(t,r){t=t>>>0,r||et(t,2,this.length);let n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};I.prototype.readInt32LE=function(t,r){return t=t>>>0,r||et(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};I.prototype.readInt32BE=function(t,r){return t=t>>>0,r||et(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};I.prototype.readBigInt64LE=oe(function(t){t=t>>>0,Ze(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&Fr(t,this.length-8);let i=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)});I.prototype.readBigInt64BE=oe(function(t){t=t>>>0,Ze(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&Fr(t,this.length-8);let i=(r<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(i)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n)});I.prototype.readFloatLE=function(t,r){return t=t>>>0,r||et(t,4,this.length),Ge.read(this,t,!0,23,4)};I.prototype.readFloatBE=function(t,r){return t=t>>>0,r||et(t,4,this.length),Ge.read(this,t,!1,23,4)};I.prototype.readDoubleLE=function(t,r){return t=t>>>0,r||et(t,8,this.length),Ge.read(this,t,!0,52,8)};I.prototype.readDoubleBE=function(t,r){return t=t>>>0,r||et(t,8,this.length),Ge.read(this,t,!1,52,8)};function ht(e,t,r,n,i,a){if(!I.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}I.prototype.writeUintLE=I.prototype.writeUIntLE=function(t,r,n,i){if(t=+t,r=r>>>0,n=n>>>0,!i){let s=Math.pow(2,8*n)-1;ht(this,t,r,n,s,0)}let a=1,o=0;for(this[r]=t&255;++o<n&&(a*=256);)this[r+o]=t/a&255;return r+n};I.prototype.writeUintBE=I.prototype.writeUIntBE=function(t,r,n,i){if(t=+t,r=r>>>0,n=n>>>0,!i){let s=Math.pow(2,8*n)-1;ht(this,t,r,n,s,0)}let a=n-1,o=1;for(this[r+a]=t&255;--a>=0&&(o*=256);)this[r+a]=t/o&255;return r+n};I.prototype.writeUint8=I.prototype.writeUInt8=function(t,r,n){return t=+t,r=r>>>0,n||ht(this,t,r,1,255,0),this[r]=t&255,r+1};I.prototype.writeUint16LE=I.prototype.writeUInt16LE=function(t,r,n){return t=+t,r=r>>>0,n||ht(this,t,r,2,65535,0),this[r]=t&255,this[r+1]=t>>>8,r+2};I.prototype.writeUint16BE=I.prototype.writeUInt16BE=function(t,r,n){return t=+t,r=r>>>0,n||ht(this,t,r,2,65535,0),this[r]=t>>>8,this[r+1]=t&255,r+2};I.prototype.writeUint32LE=I.prototype.writeUInt32LE=function(t,r,n){return t=+t,r=r>>>0,n||ht(this,t,r,4,4294967295,0),this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=t&255,r+4};I.prototype.writeUint32BE=I.prototype.writeUInt32BE=function(t,r,n){return t=+t,r=r>>>0,n||ht(this,t,r,4,4294967295,0),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4};function fs(e,t,r,n,i){ps(t,n,i,e,r,7);let a=Number(t&BigInt(4294967295));e[r++]=a,a=a>>8,e[r++]=a,a=a>>8,e[r++]=a,a=a>>8,e[r++]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=o,o=o>>8,e[r++]=o,o=o>>8,e[r++]=o,o=o>>8,e[r++]=o,r}function ls(e,t,r,n,i){ps(t,n,i,e,r,7);let a=Number(t&BigInt(4294967295));e[r+7]=a,a=a>>8,e[r+6]=a,a=a>>8,e[r+5]=a,a=a>>8,e[r+4]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=o,o=o>>8,e[r+2]=o,o=o>>8,e[r+1]=o,o=o>>8,e[r]=o,r+8}I.prototype.writeBigUInt64LE=oe(function(t,r=0){return fs(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))});I.prototype.writeBigUInt64BE=oe(function(t,r=0){return ls(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))});I.prototype.writeIntLE=function(t,r,n,i){if(t=+t,r=r>>>0,!i){let l=Math.pow(2,8*n-1);ht(this,t,r,n,l-1,-l)}let a=0,o=1,s=0;for(this[r]=t&255;++a<n&&(o*=256);)t<0&&s===0&&this[r+a-1]!==0&&(s=1),this[r+a]=(t/o>>0)-s&255;return r+n};I.prototype.writeIntBE=function(t,r,n,i){if(t=+t,r=r>>>0,!i){let l=Math.pow(2,8*n-1);ht(this,t,r,n,l-1,-l)}let a=n-1,o=1,s=0;for(this[r+a]=t&255;--a>=0&&(o*=256);)t<0&&s===0&&this[r+a+1]!==0&&(s=1),this[r+a]=(t/o>>0)-s&255;return r+n};I.prototype.writeInt8=function(t,r,n){return t=+t,r=r>>>0,n||ht(this,t,r,1,127,-128),t<0&&(t=255+t+1),this[r]=t&255,r+1};I.prototype.writeInt16LE=function(t,r,n){return t=+t,r=r>>>0,n||ht(this,t,r,2,32767,-32768),this[r]=t&255,this[r+1]=t>>>8,r+2};I.prototype.writeInt16BE=function(t,r,n){return t=+t,r=r>>>0,n||ht(this,t,r,2,32767,-32768),this[r]=t>>>8,this[r+1]=t&255,r+2};I.prototype.writeInt32LE=function(t,r,n){return t=+t,r=r>>>0,n||ht(this,t,r,4,2147483647,-2147483648),this[r]=t&255,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24,r+4};I.prototype.writeInt32BE=function(t,r,n){return t=+t,r=r>>>0,n||ht(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4};I.prototype.writeBigInt64LE=oe(function(t,r=0){return fs(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});I.prototype.writeBigInt64BE=oe(function(t,r=0){return ls(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function us(e,t,r,n,i,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function hs(e,t,r,n,i){return t=+t,r=r>>>0,i||us(e,t,r,4,34028234663852886e22,-34028234663852886e22),Ge.write(e,t,r,n,23,4),r+4}I.prototype.writeFloatLE=function(t,r,n){return hs(this,t,r,!0,n)};I.prototype.writeFloatBE=function(t,r,n){return hs(this,t,r,!1,n)};function ds(e,t,r,n,i){return t=+t,r=r>>>0,i||us(e,t,r,8,17976931348623157e292,-17976931348623157e292),Ge.write(e,t,r,n,52,8),r+8}I.prototype.writeDoubleLE=function(t,r,n){return ds(this,t,r,!0,n)};I.prototype.writeDoubleBE=function(t,r,n){return ds(this,t,r,!1,n)};I.prototype.copy=function(t,r,n,i){if(!I.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),r>=t.length&&(r=t.length),r||(r=0),i>0&&i<n&&(i=n),i===n||t.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-r<i-n&&(i=t.length-r+n);let a=i-n;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,i):Uint8Array.prototype.set.call(t,this.subarray(n,i),r),a};I.prototype.fill=function(t,r,n,i){if(typeof t=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!I.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(t.length===1){let o=t.charCodeAt(0);(i==="utf8"&&o<128||i==="latin1")&&(t=o)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);let a;if(typeof t=="number")for(a=r;a<n;++a)this[a]=t;else{let o=I.isBuffer(t)?t:I.from(t,i),s=o.length;if(s===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(a=0;a<n-r;++a)this[a+r]=o[a%s]}return this};var He={};function Wi(e,t,r){He[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}Wi("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Wi("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError);Wi("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=ns(String(r)):typeof r=="bigint"&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=ns(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n},RangeError);function ns(e){let t="",r=e.length,n=e[0]==="-"?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function yp(e,t,r){Ze(t,"offset"),(e[t]===void 0||e[t+r]===void 0)&&Fr(t,e.length-(r+1))}function ps(e,t,r,n,i,a){if(e>r||e<t){let o=typeof t=="bigint"?"n":"",s;throw a>3?t===0||t===BigInt(0)?s=`>= 0${o} and < 2${o} ** ${(a+1)*8}${o}`:s=`>= -(2${o} ** ${(a+1)*8-1}${o}) and < 2 ** ${(a+1)*8-1}${o}`:s=`>= ${t}${o} and <= ${r}${o}`,new He.ERR_OUT_OF_RANGE("value",s,e)}yp(n,i,a)}function Ze(e,t){if(typeof e!="number")throw new He.ERR_INVALID_ARG_TYPE(t,"number",e)}function Fr(e,t,r){throw Math.floor(e)!==e?(Ze(e,r),new He.ERR_OUT_OF_RANGE(r||"offset","an integer",e)):t<0?new He.ERR_BUFFER_OUT_OF_BOUNDS:new He.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}var gp=/[^+/0-9A-Za-z-_]/g;function _p(e){if(e=e.split("=")[0],e=e.trim().replace(gp,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function Hi(e,t){t=t||1/0;let r,n=e.length,i=null,a=[];for(let o=0;o<n;++o){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}else if(o+1===n){(t-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return a}function bp(e){let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r)&255);return t}function vp(e,t){let r,n,i,a=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,i=r%256,a.push(i),a.push(n);return a}function ws(e){return zi.toByteArray(_p(e))}function Pn(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function zt(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function Xi(e){return e!==e}var xp=(function(){let e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t})();function oe(e){return typeof BigInt>"u"?Ep:e}function Ep(){throw new Error("BigInt not supported")}});var Cn=O((Yi,ys)=>{var Fn=Vi(),Lt=Fn.Buffer;function ms(e,t){for(var r in e)t[r]=e[r]}Lt.from&&Lt.alloc&&Lt.allocUnsafe&&Lt.allocUnsafeSlow?ys.exports=Fn:(ms(Fn,Yi),Yi.Buffer=Be);function Be(e,t,r){return Lt(e,t,r)}Be.prototype=Object.create(Lt.prototype);ms(Lt,Be);Be.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return Lt(e,t,r)};Be.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=Lt(e);return t!==void 0?typeof r=="string"?n.fill(t,r):n.fill(t):n.fill(0),n};Be.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Lt(e)};Be.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Fn.SlowBuffer(e)}});var _s=O((U1,gs)=>{var kp={}.toString;gs.exports=Array.isArray||function(e){return kp.call(e)=="[object Array]"}});var Xe=O((N1,bs)=>{"use strict";bs.exports=TypeError});var Ki=O((M1,vs)=>{"use strict";vs.exports=Object});var Es=O((j1,xs)=>{"use strict";xs.exports=Error});var Ss=O((z1,ks)=>{"use strict";ks.exports=EvalError});var Bs=O((L1,As)=>{"use strict";As.exports=RangeError});var Ts=O((q1,Is)=>{"use strict";Is.exports=ReferenceError});var Ji=O((H1,Rs)=>{"use strict";Rs.exports=SyntaxError});var $s=O((G1,Os)=>{"use strict";Os.exports=URIError});var Fs=O((Z1,Ps)=>{"use strict";Ps.exports=Math.abs});var Ds=O((W1,Cs)=>{"use strict";Cs.exports=Math.floor});var Ns=O((X1,Us)=>{"use strict";Us.exports=Math.max});var js=O((V1,Ms)=>{"use strict";Ms.exports=Math.min});var Ls=O((Y1,zs)=>{"use strict";zs.exports=Math.pow});var Hs=O((K1,qs)=>{"use strict";qs.exports=Math.round});var Zs=O((J1,Gs)=>{"use strict";Gs.exports=Number.isNaN||function(t){return t!==t}});var Xs=O((Q1,Ws)=>{"use strict";var Sp=Zs();Ws.exports=function(t){return Sp(t)||t===0?t:t<0?-1:1}});var Ys=O((tv,Vs)=>{"use strict";Vs.exports=Object.getOwnPropertyDescriptor});var Ve=O((ev,Ks)=>{"use strict";var Dn=Ys();if(Dn)try{Dn([],"length")}catch{Dn=null}Ks.exports=Dn});var Cr=O((rv,Js)=>{"use strict";var Un=Object.defineProperty||!1;if(Un)try{Un({},"a",{value:1})}catch{Un=!1}Js.exports=Un});var Qi=O((nv,Qs)=>{"use strict";Qs.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;t[r]=i;for(var a in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(t,r);if(s.value!==i||s.enumerable!==!0)return!1}return!0}});var rc=O((iv,ec)=>{"use strict";var tc=typeof Symbol<"u"&&Symbol,Ap=Qi();ec.exports=function(){return typeof tc!="function"||typeof Symbol!="function"||typeof tc("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Ap()}});var ta=O((av,nc)=>{"use strict";nc.exports=typeof Reflect<"u"&&Reflect.getPrototypeOf||null});var ea=O((ov,ic)=>{"use strict";var Bp=Ki();ic.exports=Bp.getPrototypeOf||null});var sc=O((sv,oc)=>{"use strict";var Ip="Function.prototype.bind called on incompatible ",Tp=Object.prototype.toString,Rp=Math.max,Op="[object Function]",ac=function(t,r){for(var n=[],i=0;i<t.length;i+=1)n[i]=t[i];for(var a=0;a<r.length;a+=1)n[a+t.length]=r[a];return n},$p=function(t,r){for(var n=[],i=r||0,a=0;i<t.length;i+=1,a+=1)n[a]=t[i];return n},Pp=function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r};oc.exports=function(t){var r=this;if(typeof r!="function"||Tp.apply(r)!==Op)throw new TypeError(Ip+r);for(var n=$p(arguments,1),i,a=function(){if(this instanceof i){var c=r.apply(this,ac(n,arguments));return Object(c)===c?c:this}return r.apply(t,ac(n,arguments))},o=Rp(0,r.length-n.length),s=[],l=0;l<o;l++)s[l]="$"+l;if(i=Function("binder","return function ("+Pp(s,",")+"){ return binder.apply(this,arguments); }")(a),r.prototype){var f=function(){};f.prototype=r.prototype,i.prototype=new f,f.prototype=null}return i}});var Ye=O((cv,cc)=>{"use strict";var Fp=sc();cc.exports=Function.prototype.bind||Fp});var Nn=O((fv,fc)=>{"use strict";fc.exports=Function.prototype.call});var Mn=O((lv,lc)=>{"use strict";lc.exports=Function.prototype.apply});var hc=O((uv,uc)=>{"use strict";uc.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply});var ra=O((hv,dc)=>{"use strict";var Cp=Ye(),Dp=Mn(),Up=Nn(),Np=hc();dc.exports=Np||Cp.call(Up,Dp)});var jn=O((dv,pc)=>{"use strict";var Mp=Ye(),jp=Xe(),zp=Nn(),Lp=ra();pc.exports=function(t){if(t.length<1||typeof t[0]!="function")throw new jp("a function is required");return Lp(Mp,zp,t)}});var bc=O((pv,_c)=>{"use strict";var qp=jn(),wc=Ve(),yc;try{yc=[].__proto__===Array.prototype}catch(e){if(!e||typeof e!="object"||!("code"in e)||e.code!=="ERR_PROTO_ACCESS")throw e}var na=!!yc&&wc&&wc(Object.prototype,"__proto__"),gc=Object,mc=gc.getPrototypeOf;_c.exports=na&&typeof na.get=="function"?qp([na.get]):typeof mc=="function"?function(t){return mc(t==null?t:gc(t))}:!1});var ia=O((wv,kc)=>{"use strict";var vc=ta(),xc=ea(),Ec=bc();kc.exports=vc?function(t){return vc(t)}:xc?function(t){if(!t||typeof t!="object"&&typeof t!="function")throw new TypeError("getProto: not an object");return xc(t)}:Ec?function(t){return Ec(t)}:null});var Ac=O((mv,Sc)=>{"use strict";var Hp=Function.prototype.call,Gp=Object.prototype.hasOwnProperty,Zp=Ye();Sc.exports=Zp.call(Hp,Gp)});var sa=O((yv,$c)=>{"use strict";var M,Wp=Ki(),Xp=Es(),Vp=Ss(),Yp=Bs(),Kp=Ts(),tr=Ji(),Qe=Xe(),Jp=$s(),Qp=Fs(),tw=Ds(),ew=Ns(),rw=js(),nw=Ls(),iw=Hs(),aw=Xs(),Rc=Function,aa=function(e){try{return Rc('"use strict"; return ('+e+").constructor;")()}catch{}},Dr=Ve(),ow=Cr(),oa=function(){throw new Qe},sw=Dr?(function(){try{return arguments.callee,oa}catch{try{return Dr(arguments,"callee").get}catch{return oa}}})():oa,Ke=rc()(),rt=ia(),cw=ea(),fw=ta(),Oc=Mn(),Ur=Nn(),Je={},lw=typeof Uint8Array>"u"||!rt?M:rt(Uint8Array),Ie={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?M:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?M:ArrayBuffer,"%ArrayIteratorPrototype%":Ke&&rt?rt([][Symbol.iterator]()):M,"%AsyncFromSyncIteratorPrototype%":M,"%AsyncFunction%":Je,"%AsyncGenerator%":Je,"%AsyncGeneratorFunction%":Je,"%AsyncIteratorPrototype%":Je,"%Atomics%":typeof Atomics>"u"?M:Atomics,"%BigInt%":typeof BigInt>"u"?M:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?M:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?M:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?M:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Xp,"%eval%":eval,"%EvalError%":Vp,"%Float16Array%":typeof Float16Array>"u"?M:Float16Array,"%Float32Array%":typeof Float32Array>"u"?M:Float32Array,"%Float64Array%":typeof Float64Array>"u"?M:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?M:FinalizationRegistry,"%Function%":Rc,"%GeneratorFunction%":Je,"%Int8Array%":typeof Int8Array>"u"?M:Int8Array,"%Int16Array%":typeof Int16Array>"u"?M:Int16Array,"%Int32Array%":typeof Int32Array>"u"?M:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ke&&rt?rt(rt([][Symbol.iterator]())):M,"%JSON%":typeof JSON=="object"?JSON:M,"%Map%":typeof Map>"u"?M:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Ke||!rt?M:rt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Wp,"%Object.getOwnPropertyDescriptor%":Dr,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?M:Promise,"%Proxy%":typeof Proxy>"u"?M:Proxy,"%RangeError%":Yp,"%ReferenceError%":Kp,"%Reflect%":typeof Reflect>"u"?M:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?M:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Ke||!rt?M:rt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?M:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ke&&rt?rt(""[Symbol.iterator]()):M,"%Symbol%":Ke?Symbol:M,"%SyntaxError%":tr,"%ThrowTypeError%":sw,"%TypedArray%":lw,"%TypeError%":Qe,"%Uint8Array%":typeof Uint8Array>"u"?M:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?M:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?M:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?M:Uint32Array,"%URIError%":Jp,"%WeakMap%":typeof WeakMap>"u"?M:WeakMap,"%WeakRef%":typeof WeakRef>"u"?M:WeakRef,"%WeakSet%":typeof WeakSet>"u"?M:WeakSet,"%Function.prototype.call%":Ur,"%Function.prototype.apply%":Oc,"%Object.defineProperty%":ow,"%Object.getPrototypeOf%":cw,"%Math.abs%":Qp,"%Math.floor%":tw,"%Math.max%":ew,"%Math.min%":rw,"%Math.pow%":nw,"%Math.round%":iw,"%Math.sign%":aw,"%Reflect.getPrototypeOf%":fw};if(rt)try{null.error}catch(e){Bc=rt(rt(e)),Ie["%Error.prototype%"]=Bc}var Bc,uw=function e(t){var r;if(t==="%AsyncFunction%")r=aa("async function () {}");else if(t==="%GeneratorFunction%")r=aa("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=aa("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&rt&&(r=rt(i.prototype))}return Ie[t]=r,r},Ic={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Nr=Ye(),zn=Ac(),hw=Nr.call(Ur,Array.prototype.concat),dw=Nr.call(Oc,Array.prototype.splice),Tc=Nr.call(Ur,String.prototype.replace),Ln=Nr.call(Ur,String.prototype.slice),pw=Nr.call(Ur,RegExp.prototype.exec),ww=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,mw=/\\(\\)?/g,yw=function(t){var r=Ln(t,0,1),n=Ln(t,-1);if(r==="%"&&n!=="%")throw new tr("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new tr("invalid intrinsic syntax, expected opening `%`");var i=[];return Tc(t,ww,function(a,o,s,l){i[i.length]=s?Tc(l,mw,"$1"):o||a}),i},gw=function(t,r){var n=t,i;if(zn(Ic,n)&&(i=Ic[n],n="%"+i[0]+"%"),zn(Ie,n)){var a=Ie[n];if(a===Je&&(a=uw(n)),typeof a>"u"&&!r)throw new Qe("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:a}}throw new tr("intrinsic "+t+" does not exist!")};$c.exports=function(t,r){if(typeof t!="string"||t.length===0)throw new Qe("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Qe('"allowMissing" argument must be a boolean');if(pw(/^%?[^%]*%?$/,t)===null)throw new tr("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=yw(t),i=n.length>0?n[0]:"",a=gw("%"+i+"%",r),o=a.name,s=a.value,l=!1,f=a.alias;f&&(i=f[0],dw(n,hw([0,1],f)));for(var c=1,u=!0;c<n.length;c+=1){var h=n[c],d=Ln(h,0,1),p=Ln(h,-1);if((d==='"'||d==="'"||d==="`"||p==='"'||p==="'"||p==="`")&&d!==p)throw new tr("property names with quotes must have matching quotes");if((h==="constructor"||!u)&&(l=!0),i+="."+h,o="%"+i+"%",zn(Ie,o))s=Ie[o];else if(s!=null){if(!(h in s)){if(!r)throw new Qe("base intrinsic for "+t+" exists, but the property is not available.");return}if(Dr&&c+1>=n.length){var y=Dr(s,h);u=!!y,u&&"get"in y&&!("originalValue"in y.get)?s=y.get:s=s[h]}else u=zn(s,h),s=s[h];u&&!l&&(Ie[o]=s)}}return s}});var ca=O((gv,Cc)=>{"use strict";var Pc=sa(),Fc=jn(),_w=Fc([Pc("%String.prototype.indexOf%")]);Cc.exports=function(t,r){var n=Pc(t,!!r);return typeof n=="function"&&_w(t,".prototype.")>-1?Fc([n]):n}});var Mc=O((_v,Nc)=>{"use strict";var Uc=Function.prototype.toString,er=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,la,qn;if(typeof er=="function"&&typeof Object.defineProperty=="function")try{la=Object.defineProperty({},"length",{get:function(){throw qn}}),qn={},er(function(){throw 42},null,la)}catch(e){e!==qn&&(er=null)}else er=null;var bw=/^\s*class\b/,ua=function(t){try{var r=Uc.call(t);return bw.test(r)}catch{return!1}},fa=function(t){try{return ua(t)?!1:(Uc.call(t),!0)}catch{return!1}},Hn=Object.prototype.toString,vw="[object Object]",xw="[object Function]",Ew="[object GeneratorFunction]",kw="[object HTMLAllCollection]",Sw="[object HTML document.all class]",Aw="[object HTMLCollection]",Bw=typeof Symbol=="function"&&!!Symbol.toStringTag,Iw=!(0 in[,]),ha=function(){return!1};typeof document=="object"&&(Dc=document.all,Hn.call(Dc)===Hn.call(document.all)&&(ha=function(t){if((Iw||!t)&&(typeof t>"u"||typeof t=="object"))try{var r=Hn.call(t);return(r===kw||r===Sw||r===Aw||r===vw)&&t("")==null}catch{}return!1}));var Dc;Nc.exports=er?function(t){if(ha(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;try{er(t,null,la)}catch(r){if(r!==qn)return!1}return!ua(t)&&fa(t)}:function(t){if(ha(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;if(Bw)return fa(t);if(ua(t))return!1;var r=Hn.call(t);return r!==xw&&r!==Ew&&!/^\[object HTML/.test(r)?!1:fa(t)}});var Lc=O((bv,zc)=>{"use strict";var Tw=Mc(),Rw=Object.prototype.toString,jc=Object.prototype.hasOwnProperty,Ow=function(t,r,n){for(var i=0,a=t.length;i<a;i++)jc.call(t,i)&&(n==null?r(t[i],i,t):r.call(n,t[i],i,t))},$w=function(t,r,n){for(var i=0,a=t.length;i<a;i++)n==null?r(t.charAt(i),i,t):r.call(n,t.charAt(i),i,t)},Pw=function(t,r,n){for(var i in t)jc.call(t,i)&&(n==null?r(t[i],i,t):r.call(n,t[i],i,t))};function Fw(e){return Rw.call(e)==="[object Array]"}zc.exports=function(t,r,n){if(!Tw(r))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),Fw(t)?Ow(t,r,i):typeof t=="string"?$w(t,r,i):Pw(t,r,i)}});var Hc=O((vv,qc)=>{"use strict";qc.exports=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]});var Zc=O((xv,Gc)=>{"use strict";var da=Hc(),Cw=typeof globalThis>"u"?global:globalThis;Gc.exports=function(){for(var t=[],r=0;r<da.length;r++)typeof Cw[da[r]]=="function"&&(t[t.length]=da[r]);return t}});var Yc=O((Ev,Vc)=>{"use strict";var Wc=Cr(),Dw=Ji(),rr=Xe(),Xc=Ve();Vc.exports=function(t,r,n){if(!t||typeof t!="object"&&typeof t!="function")throw new rr("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new rr("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new rr("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new rr("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new rr("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new rr("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,a=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,s=arguments.length>6?arguments[6]:!1,l=!!Xc&&Xc(t,r);if(Wc)Wc(t,r,{configurable:o===null&&l?l.configurable:!o,enumerable:i===null&&l?l.enumerable:!i,value:n,writable:a===null&&l?l.writable:!a});else if(s||!i&&!a&&!o)t[r]=n;else throw new Dw("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var Qc=O((kv,Jc)=>{"use strict";var pa=Cr(),Kc=function(){return!!pa};Kc.hasArrayLengthDefineBug=function(){if(!pa)return null;try{return pa([],"length",{value:1}).length!==1}catch{return!0}};Jc.exports=Kc});var af=O((Sv,nf)=>{"use strict";var Uw=sa(),tf=Yc(),Nw=Qc()(),ef=Ve(),rf=Xe(),Mw=Uw("%Math.floor%");nf.exports=function(t,r){if(typeof t!="function")throw new rf("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||Mw(r)!==r)throw new rf("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,a=!0;if("length"in t&&ef){var o=ef(t,"length");o&&!o.configurable&&(i=!1),o&&!o.writable&&(a=!1)}return(i||a||!n)&&(Nw?tf(t,"length",r,!0,!0):tf(t,"length",r)),t}});var sf=O((Av,of)=>{"use strict";var jw=Ye(),zw=Mn(),Lw=ra();of.exports=function(){return Lw(jw,zw,arguments)}});var lf=O((Bv,Gn)=>{"use strict";var qw=af(),cf=Cr(),Hw=jn(),ff=sf();Gn.exports=function(t){var r=Hw(arguments),n=t.length-(arguments.length-1);return qw(r,1+(n>0?n:0),!0)};cf?cf(Gn.exports,"apply",{value:ff}):Gn.exports.apply=ff});var hf=O((Iv,uf)=>{"use strict";var Gw=Qi();uf.exports=function(){return Gw()&&!!Symbol.toStringTag}});var yf=O((Tv,mf)=>{"use strict";var Xn=Lc(),Zw=Zc(),df=lf(),ma=ca(),Wn=Ve(),Zn=ia(),Ww=ma("Object.prototype.toString"),wf=hf()(),pf=typeof globalThis>"u"?global:globalThis,wa=Zw(),ya=ma("String.prototype.slice"),Xw=ma("Array.prototype.indexOf",!0)||function(t,r){for(var n=0;n<t.length;n+=1)if(t[n]===r)return n;return-1},Vn={__proto__:null};wf&&Wn&&Zn?Xn(wa,function(e){var t=new pf[e];if(Symbol.toStringTag in t&&Zn){var r=Zn(t),n=Wn(r,Symbol.toStringTag);if(!n&&r){var i=Zn(r);n=Wn(i,Symbol.toStringTag)}Vn["$"+e]=df(n.get)}}):Xn(wa,function(e){var t=new pf[e],r=t.slice||t.set;r&&(Vn["$"+e]=df(r))});var Vw=function(t){var r=!1;return Xn(Vn,function(n,i){if(!r)try{"$"+n(t)===i&&(r=ya(i,1))}catch{}}),r},Yw=function(t){var r=!1;return Xn(Vn,function(n,i){if(!r)try{n(t),r=ya(i,1)}catch{}}),r};mf.exports=function(t){if(!t||typeof t!="object")return!1;if(!wf){var r=ya(Ww(t),8,-1);return Xw(wa,r)>-1?r:r!=="Object"?!1:Yw(t)}return Wn?Vw(t):null}});var _f=O((Rv,gf)=>{"use strict";var Kw=yf();gf.exports=function(t){return!!Kw(t)}});var vf=O((Ov,bf)=>{"use strict";var Jw=Xe(),Qw=ca(),tm=Qw("TypedArray.prototype.buffer",!0),em=_f();bf.exports=tm||function(t){if(!em(t))throw new Jw("Not a Typed Array");return t.buffer}});var kf=O(($v,Ef)=>{"use strict";var $t=Cn().Buffer,rm=_s(),nm=vf(),im=ArrayBuffer.isView||function(t){try{return nm(t),!0}catch{return!1}},am=typeof Uint8Array<"u",xf=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",om=xf&&($t.prototype instanceof Uint8Array||$t.TYPED_ARRAY_SUPPORT);Ef.exports=function(t,r){if($t.isBuffer(t))return t.constructor&&!("isBuffer"in t)?$t.from(t):t;if(typeof t=="string")return $t.from(t,r);if(xf&&im(t)){if(t.byteLength===0)return $t.alloc(0);if(om){var n=$t.from(t.buffer,t.byteOffset,t.byteLength);if(n.byteLength===t.byteLength)return n}var i=t instanceof Uint8Array?t:new Uint8Array(t.buffer,t.byteOffset,t.byteLength),a=$t.from(i);if(a.length===t.byteLength)return a}if(am&&t instanceof Uint8Array)return $t.from(t);var o=rm(t);if(o)for(var s=0;s<t.length;s+=1){var l=t[s];if(typeof l!="number"||l<0||l>255||~~l!==l)throw new RangeError("Array items must be numbers in the range 0-255.")}if(o||$t.isBuffer(t)&&t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t))return $t.from(t);throw new TypeError('The "data" argument must be a string, an Array, a Buffer, a Uint8Array, or a DataView.')}});var Af=O((Pv,Sf)=>{"use strict";var sm=Cn().Buffer,cm=kf();function Yn(e,t){this._block=sm.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}Yn.prototype.update=function(e,t){e=cm(e,t||"utf8");for(var r=this._block,n=this._blockSize,i=e.length,a=this._len,o=0;o<i;){for(var s=a%n,l=Math.min(i-o,n-s),f=0;f<l;f++)r[s+f]=e[o+f];a+=l,o+=l,a%n===0&&this._update(r)}return this._len+=i,this};Yn.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=this._len*8;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(r&4294967295)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var a=this._hash();return e?a.toString(e):a};Yn.prototype._update=function(){throw new Error("_update must be implemented by subclass")};Sf.exports=Yn});var Tf=O((Fv,If)=>{"use strict";var fm=Vo(),Bf=Af(),lm=Cn().Buffer,um=[1518500249,1859775393,-1894007588,-899497514],hm=new Array(80);function Mr(){this.init(),this._w=hm,Bf.call(this,64,56)}fm(Mr,Bf);Mr.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function dm(e){return e<<1|e>>>31}function pm(e){return e<<5|e>>>27}function wm(e){return e<<30|e>>>2}function mm(e,t,r,n){return e===0?t&r|~t&n:e===2?t&r|t&n|r&n:t^r^n}Mr.prototype._update=function(e){for(var t=this._w,r=this._a|0,n=this._b|0,i=this._c|0,a=this._d|0,o=this._e|0,s=0;s<16;++s)t[s]=e.readInt32BE(s*4);for(;s<80;++s)t[s]=dm(t[s-3]^t[s-8]^t[s-14]^t[s-16]);for(var l=0;l<80;++l){var f=~~(l/20),c=pm(r)+mm(f,n,i,a)+o+t[l]+um[f]|0;o=a,a=i,i=wm(n),n=r,r=c}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=a+this._d|0,this._e=o+this._e|0};Mr.prototype._hash=function(){var e=lm.allocUnsafe(20);return e.writeInt32BE(this._a|0,0),e.writeInt32BE(this._b|0,4),e.writeInt32BE(this._c|0,8),e.writeInt32BE(this._d|0,12),e.writeInt32BE(this._e|0,16),e};If.exports=Mr});var Of=O(ga=>{var Rf;(function(e){typeof DO_NOT_EXPORT_CRC>"u"?typeof ga=="object"?e(ga):typeof define=="function"&&define.amd?define(function(){var t={};return e(t),t}):e(Rf={}):e(Rf={})})(function(e){e.version="1.2.2";function t(){for(var w=0,x=new Array(256),_=0;_!=256;++_)w=_,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,x[_]=w;return typeof Int32Array<"u"?new Int32Array(x):x}var r=t();function n(w){var x=0,_=0,T=0,B=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(T=0;T!=256;++T)B[T]=w[T];for(T=0;T!=256;++T)for(_=w[T],x=256+T;x<4096;x+=256)_=B[x]=_>>>8^w[_&255];var $=[];for(T=1;T!=16;++T)$[T-1]=typeof Int32Array<"u"?B.subarray(T*256,T*256+256):B.slice(T*256,T*256+256);return $}var i=n(r),a=i[0],o=i[1],s=i[2],l=i[3],f=i[4],c=i[5],u=i[6],h=i[7],d=i[8],p=i[9],y=i[10],v=i[11],m=i[12],g=i[13],S=i[14];function k(w,x){for(var _=x^-1,T=0,B=w.length;T<B;)_=_>>>8^r[(_^w.charCodeAt(T++))&255];return~_}function E(w,x){for(var _=x^-1,T=w.length-15,B=0;B<T;)_=S[w[B++]^_&255]^g[w[B++]^_>>8&255]^m[w[B++]^_>>16&255]^v[w[B++]^_>>>24]^y[w[B++]]^p[w[B++]]^d[w[B++]]^h[w[B++]]^u[w[B++]]^c[w[B++]]^f[w[B++]]^l[w[B++]]^s[w[B++]]^o[w[B++]]^a[w[B++]]^r[w[B++]];for(T+=15;B<T;)_=_>>>8^r[(_^w[B++])&255];return~_}function A(w,x){for(var _=x^-1,T=0,B=w.length,$=0,D=0;T<B;)$=w.charCodeAt(T++),$<128?_=_>>>8^r[(_^$)&255]:$<2048?(_=_>>>8^r[(_^(192|$>>6&31))&255],_=_>>>8^r[(_^(128|$&63))&255]):$>=55296&&$<57344?($=($&1023)+64,D=w.charCodeAt(T++)&1023,_=_>>>8^r[(_^(240|$>>8&7))&255],_=_>>>8^r[(_^(128|$>>2&63))&255],_=_>>>8^r[(_^(128|D>>6&15|($&3)<<4))&255],_=_>>>8^r[(_^(128|D&63))&255]):(_=_>>>8^r[(_^(224|$>>12&15))&255],_=_>>>8^r[(_^(128|$>>6&63))&255],_=_>>>8^r[(_^(128|$&63))&255]);return~_}e.table=r,e.bstr=k,e.buf=E,e.str=A})});var Qt=O(ct=>{"use strict";var ym=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function gm(e,t){return Object.prototype.hasOwnProperty.call(e,t)}ct.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(var n in r)gm(r,n)&&(e[n]=r[n])}}return e};ct.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var _m={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray){e.set(t.subarray(r,r+n),i);return}for(var a=0;a<n;a++)e[i+a]=t[r+a]},flattenChunks:function(e){var t,r,n,i,a,o;for(n=0,t=0,r=e.length;t<r;t++)n+=e[t].length;for(o=new Uint8Array(n),i=0,t=0,r=e.length;t<r;t++)a=e[t],o.set(a,i),i+=a.length;return o}},bm={arraySet:function(e,t,r,n,i){for(var a=0;a<n;a++)e[i+a]=t[r+a]},flattenChunks:function(e){return[].concat.apply([],e)}};ct.setTyped=function(e){e?(ct.Buf8=Uint8Array,ct.Buf16=Uint16Array,ct.Buf32=Int32Array,ct.assign(ct,_m)):(ct.Buf8=Array,ct.Buf16=Array,ct.Buf32=Array,ct.assign(ct,bm))};ct.setTyped(ym)});var tl=O(ar=>{"use strict";var vm=Qt(),xm=4,$f=0,Pf=1,Em=2;function ir(e){for(var t=e.length;--t>=0;)e[t]=0}var km=0,Mf=1,Sm=2,Am=3,Bm=258,Sa=29,Gr=256,zr=Gr+1+Sa,nr=30,Aa=19,jf=2*zr+1,Te=15,_a=16,Im=7,Ba=256,zf=16,Lf=17,qf=18,Ea=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Kn=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Tm=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Hf=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Rm=512,te=new Array((zr+2)*2);ir(te);var jr=new Array(nr*2);ir(jr);var Lr=new Array(Rm);ir(Lr);var qr=new Array(Bm-Am+1);ir(qr);var Ia=new Array(Sa);ir(Ia);var Jn=new Array(nr);ir(Jn);function ba(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}var Gf,Zf,Wf;function va(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function Xf(e){return e<256?Lr[e]:Lr[256+(e>>>7)]}function Hr(e,t){e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255}function dt(e,t,r){e.bi_valid>_a-r?(e.bi_buf|=t<<e.bi_valid&65535,Hr(e,e.bi_buf),e.bi_buf=t>>_a-e.bi_valid,e.bi_valid+=r-_a):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function qt(e,t,r){dt(e,r[t*2],r[t*2+1])}function Vf(e,t){var r=0;do r|=e&1,e>>>=1,r<<=1;while(--t>0);return r>>>1}function Om(e){e.bi_valid===16?(Hr(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)}function $m(e,t){var r=t.dyn_tree,n=t.max_code,i=t.stat_desc.static_tree,a=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,l=t.stat_desc.max_length,f,c,u,h,d,p,y=0;for(h=0;h<=Te;h++)e.bl_count[h]=0;for(r[e.heap[e.heap_max]*2+1]=0,f=e.heap_max+1;f<jf;f++)c=e.heap[f],h=r[r[c*2+1]*2+1]+1,h>l&&(h=l,y++),r[c*2+1]=h,!(c>n)&&(e.bl_count[h]++,d=0,c>=s&&(d=o[c-s]),p=r[c*2],e.opt_len+=p*(h+d),a&&(e.static_len+=p*(i[c*2+1]+d)));if(y!==0){do{for(h=l-1;e.bl_count[h]===0;)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[l]--,y-=2}while(y>0);for(h=l;h!==0;h--)for(c=e.bl_count[h];c!==0;)u=e.heap[--f],!(u>n)&&(r[u*2+1]!==h&&(e.opt_len+=(h-r[u*2+1])*r[u*2],r[u*2+1]=h),c--)}}function Yf(e,t,r){var n=new Array(Te+1),i=0,a,o;for(a=1;a<=Te;a++)n[a]=i=i+r[a-1]<<1;for(o=0;o<=t;o++){var s=e[o*2+1];s!==0&&(e[o*2]=Vf(n[s]++,s))}}function Pm(){var e,t,r,n,i,a=new Array(Te+1);for(r=0,n=0;n<Sa-1;n++)for(Ia[n]=r,e=0;e<1<<Ea[n];e++)qr[r++]=n;for(qr[r-1]=n,i=0,n=0;n<16;n++)for(Jn[n]=i,e=0;e<1<<Kn[n];e++)Lr[i++]=n;for(i>>=7;n<nr;n++)for(Jn[n]=i<<7,e=0;e<1<<Kn[n]-7;e++)Lr[256+i++]=n;for(t=0;t<=Te;t++)a[t]=0;for(e=0;e<=143;)te[e*2+1]=8,e++,a[8]++;for(;e<=255;)te[e*2+1]=9,e++,a[9]++;for(;e<=279;)te[e*2+1]=7,e++,a[7]++;for(;e<=287;)te[e*2+1]=8,e++,a[8]++;for(Yf(te,zr+1,a),e=0;e<nr;e++)jr[e*2+1]=5,jr[e*2]=Vf(e,5);Gf=new ba(te,Ea,Gr+1,zr,Te),Zf=new ba(jr,Kn,0,nr,Te),Wf=new ba(new Array(0),Tm,0,Aa,Im)}function Kf(e){var t;for(t=0;t<zr;t++)e.dyn_ltree[t*2]=0;for(t=0;t<nr;t++)e.dyn_dtree[t*2]=0;for(t=0;t<Aa;t++)e.bl_tree[t*2]=0;e.dyn_ltree[Ba*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function Jf(e){e.bi_valid>8?Hr(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function Fm(e,t,r,n){Jf(e),n&&(Hr(e,r),Hr(e,~r)),vm.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}function Ff(e,t,r,n){var i=t*2,a=r*2;return e[i]<e[a]||e[i]===e[a]&&n[t]<=n[r]}function xa(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&Ff(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!Ff(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function Cf(e,t,r){var n,i,a=0,o,s;if(e.last_lit!==0)do n=e.pending_buf[e.d_buf+a*2]<<8|e.pending_buf[e.d_buf+a*2+1],i=e.pending_buf[e.l_buf+a],a++,n===0?qt(e,i,t):(o=qr[i],qt(e,o+Gr+1,t),s=Ea[o],s!==0&&(i-=Ia[o],dt(e,i,s)),n--,o=Xf(n),qt(e,o,r),s=Kn[o],s!==0&&(n-=Jn[o],dt(e,n,s)));while(a<e.last_lit);qt(e,Ba,t)}function ka(e,t){var r=t.dyn_tree,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,a=t.stat_desc.elems,o,s,l=-1,f;for(e.heap_len=0,e.heap_max=jf,o=0;o<a;o++)r[o*2]!==0?(e.heap[++e.heap_len]=l=o,e.depth[o]=0):r[o*2+1]=0;for(;e.heap_len<2;)f=e.heap[++e.heap_len]=l<2?++l:0,r[f*2]=1,e.depth[f]=0,e.opt_len--,i&&(e.static_len-=n[f*2+1]);for(t.max_code=l,o=e.heap_len>>1;o>=1;o--)xa(e,r,o);f=a;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],xa(e,r,1),s=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=s,r[f*2]=r[o*2]+r[s*2],e.depth[f]=(e.depth[o]>=e.depth[s]?e.depth[o]:e.depth[s])+1,r[o*2+1]=r[s*2+1]=f,e.heap[1]=f++,xa(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],$m(e,t),Yf(r,l,e.bl_count)}function Df(e,t,r){var n,i=-1,a,o=t[1],s=0,l=7,f=4;for(o===0&&(l=138,f=3),t[(r+1)*2+1]=65535,n=0;n<=r;n++)a=o,o=t[(n+1)*2+1],!(++s<l&&a===o)&&(s<f?e.bl_tree[a*2]+=s:a!==0?(a!==i&&e.bl_tree[a*2]++,e.bl_tree[zf*2]++):s<=10?e.bl_tree[Lf*2]++:e.bl_tree[qf*2]++,s=0,i=a,o===0?(l=138,f=3):a===o?(l=6,f=3):(l=7,f=4))}function Uf(e,t,r){var n,i=-1,a,o=t[1],s=0,l=7,f=4;for(o===0&&(l=138,f=3),n=0;n<=r;n++)if(a=o,o=t[(n+1)*2+1],!(++s<l&&a===o)){if(s<f)do qt(e,a,e.bl_tree);while(--s!==0);else a!==0?(a!==i&&(qt(e,a,e.bl_tree),s--),qt(e,zf,e.bl_tree),dt(e,s-3,2)):s<=10?(qt(e,Lf,e.bl_tree),dt(e,s-3,3)):(qt(e,qf,e.bl_tree),dt(e,s-11,7));s=0,i=a,o===0?(l=138,f=3):a===o?(l=6,f=3):(l=7,f=4)}}function Cm(e){var t;for(Df(e,e.dyn_ltree,e.l_desc.max_code),Df(e,e.dyn_dtree,e.d_desc.max_code),ka(e,e.bl_desc),t=Aa-1;t>=3&&e.bl_tree[Hf[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t}function Dm(e,t,r,n){var i;for(dt(e,t-257,5),dt(e,r-1,5),dt(e,n-4,4),i=0;i<n;i++)dt(e,e.bl_tree[Hf[i]*2+1],3);Uf(e,e.dyn_ltree,t-1),Uf(e,e.dyn_dtree,r-1)}function Um(e){var t=4093624447,r;for(r=0;r<=31;r++,t>>>=1)if(t&1&&e.dyn_ltree[r*2]!==0)return $f;if(e.dyn_ltree[18]!==0||e.dyn_ltree[20]!==0||e.dyn_ltree[26]!==0)return Pf;for(r=32;r<Gr;r++)if(e.dyn_ltree[r*2]!==0)return Pf;return $f}var Nf=!1;function Nm(e){Nf||(Pm(),Nf=!0),e.l_desc=new va(e.dyn_ltree,Gf),e.d_desc=new va(e.dyn_dtree,Zf),e.bl_desc=new va(e.bl_tree,Wf),e.bi_buf=0,e.bi_valid=0,Kf(e)}function Qf(e,t,r,n){dt(e,(km<<1)+(n?1:0),3),Fm(e,t,r,!0)}function Mm(e){dt(e,Mf<<1,3),qt(e,Ba,te),Om(e)}function jm(e,t,r,n){var i,a,o=0;e.level>0?(e.strm.data_type===Em&&(e.strm.data_type=Um(e)),ka(e,e.l_desc),ka(e,e.d_desc),o=Cm(e),i=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=i&&(i=a)):i=a=r+5,r+4<=i&&t!==-1?Qf(e,t,r,n):e.strategy===xm||a===i?(dt(e,(Mf<<1)+(n?1:0),3),Cf(e,te,jr)):(dt(e,(Sm<<1)+(n?1:0),3),Dm(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),Cf(e,e.dyn_ltree,e.dyn_dtree)),Kf(e),n&&Jf(e)}function zm(e,t,r){return e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=r&255,e.last_lit++,t===0?e.dyn_ltree[r*2]++:(e.matches++,t--,e.dyn_ltree[(qr[r]+Gr+1)*2]++,e.dyn_dtree[Xf(t)*2]++),e.last_lit===e.lit_bufsize-1}ar._tr_init=Nm;ar._tr_stored_block=Qf;ar._tr_flush_block=jm;ar._tr_tally=zm;ar._tr_align=Mm});var Ta=O((Nv,el)=>{"use strict";function Lm(e,t,r,n){for(var i=e&65535|0,a=e>>>16&65535|0,o=0;r!==0;){o=r>2e3?2e3:r,r-=o;do i=i+t[n++]|0,a=a+i|0;while(--o);i%=65521,a%=65521}return i|a<<16|0}el.exports=Lm});var Ra=O((Mv,rl)=>{"use strict";function qm(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t}var Hm=qm();function Gm(e,t,r,n){var i=Hm,a=n+r;e^=-1;for(var o=n;o<a;o++)e=e>>>8^i[(e^t[o])&255];return e^-1}rl.exports=Gm});var Qn=O((jv,nl)=>{"use strict";nl.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}});var hl=O(Zt=>{"use strict";var ft=Qt(),Bt=tl(),sl=Ta(),se=Ra(),Zm=Qn(),Pe=0,Wm=1,Xm=3,he=4,il=5,Gt=0,al=1,It=-2,Vm=-3,Oa=-5,Ym=-1,Km=1,ti=2,Jm=3,Qm=4,ty=0,ey=2,ii=8,ry=9,ny=15,iy=8,ay=29,oy=256,Pa=oy+1+ay,sy=30,cy=19,fy=2*Pa+1,ly=15,j=3,le=258,Pt=le+j+1,uy=32,ai=42,Fa=69,ei=73,ri=91,ni=103,Re=113,Wr=666,tt=1,Xr=2,Oe=3,cr=4,hy=3;function ue(e,t){return e.msg=Zm[t],t}function ol(e){return(e<<1)-(e>4?9:0)}function fe(e){for(var t=e.length;--t>=0;)e[t]=0}function ce(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(ft.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))}function it(e,t){Bt._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ce(e.strm)}function L(e,t){e.pending_buf[e.pending++]=t}function Zr(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255}function dy(e,t,r,n){var i=e.avail_in;return i>n&&(i=n),i===0?0:(e.avail_in-=i,ft.arraySet(t,e.input,e.next_in,i,r),e.state.wrap===1?e.adler=sl(e.adler,t,i,r):e.state.wrap===2&&(e.adler=se(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)}function cl(e,t){var r=e.max_chain_length,n=e.strstart,i,a,o=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-Pt?e.strstart-(e.w_size-Pt):0,f=e.window,c=e.w_mask,u=e.prev,h=e.strstart+le,d=f[n+o-1],p=f[n+o];e.prev_length>=e.good_match&&(r>>=2),s>e.lookahead&&(s=e.lookahead);do if(i=t,!(f[i+o]!==p||f[i+o-1]!==d||f[i]!==f[n]||f[++i]!==f[n+1])){n+=2,i++;do;while(f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&n<h);if(a=le-(h-n),n=h-le,a>o){if(e.match_start=t,o=a,a>=s)break;d=f[n+o-1],p=f[n+o]}}while((t=u[t&c])>l&&--r!==0);return o<=e.lookahead?o:e.lookahead}function $e(e){var t=e.w_size,r,n,i,a,o;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Pt)){ft.arraySet(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,n=e.hash_size,r=n;do i=e.head[--r],e.head[r]=i>=t?i-t:0;while(--n);n=t,r=n;do i=e.prev[--r],e.prev[r]=i>=t?i-t:0;while(--n);a+=t}if(e.strm.avail_in===0)break;if(n=dy(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=n,e.lookahead+e.insert>=j)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+j-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<j)););}while(e.lookahead<Pt&&e.strm.avail_in!==0)}function py(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if($e(e),e.lookahead===0&&t===Pe)return tt;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((e.strstart===0||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,it(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-Pt&&(it(e,!1),e.strm.avail_out===0))return tt}return e.insert=0,t===he?(it(e,!0),e.strm.avail_out===0?Oe:cr):(e.strstart>e.block_start&&(it(e,!1),e.strm.avail_out===0),tt)}function $a(e,t){for(var r,n;;){if(e.lookahead<Pt){if($e(e),e.lookahead<Pt&&t===Pe)return tt;if(e.lookahead===0)break}if(r=0,e.lookahead>=j&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+j-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-Pt&&(e.match_length=cl(e,r)),e.match_length>=j)if(n=Bt._tr_tally(e,e.strstart-e.match_start,e.match_length-j),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=j){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+j-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=Bt._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(it(e,!1),e.strm.avail_out===0))return tt}return e.insert=e.strstart<j-1?e.strstart:j-1,t===he?(it(e,!0),e.strm.avail_out===0?Oe:cr):e.last_lit&&(it(e,!1),e.strm.avail_out===0)?tt:Xr}function or(e,t){for(var r,n,i;;){if(e.lookahead<Pt){if($e(e),e.lookahead<Pt&&t===Pe)return tt;if(e.lookahead===0)break}if(r=0,e.lookahead>=j&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+j-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=j-1,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-Pt&&(e.match_length=cl(e,r),e.match_length<=5&&(e.strategy===Km||e.match_length===j&&e.strstart-e.match_start>4096)&&(e.match_length=j-1)),e.prev_length>=j&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-j,n=Bt._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-j),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+j-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=j-1,e.strstart++,n&&(it(e,!1),e.strm.avail_out===0))return tt}else if(e.match_available){if(n=Bt._tr_tally(e,0,e.window[e.strstart-1]),n&&it(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return tt}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=Bt._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<j-1?e.strstart:j-1,t===he?(it(e,!0),e.strm.avail_out===0?Oe:cr):e.last_lit&&(it(e,!1),e.strm.avail_out===0)?tt:Xr}function wy(e,t){for(var r,n,i,a,o=e.window;;){if(e.lookahead<=le){if($e(e),e.lookahead<=le&&t===Pe)return tt;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=j&&e.strstart>0&&(i=e.strstart-1,n=o[i],n===o[++i]&&n===o[++i]&&n===o[++i])){a=e.strstart+le;do;while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<a);e.match_length=le-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=j?(r=Bt._tr_tally(e,1,e.match_length-j),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=Bt._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(it(e,!1),e.strm.avail_out===0))return tt}return e.insert=0,t===he?(it(e,!0),e.strm.avail_out===0?Oe:cr):e.last_lit&&(it(e,!1),e.strm.avail_out===0)?tt:Xr}function my(e,t){for(var r;;){if(e.lookahead===0&&($e(e),e.lookahead===0)){if(t===Pe)return tt;break}if(e.match_length=0,r=Bt._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(it(e,!1),e.strm.avail_out===0))return tt}return e.insert=0,t===he?(it(e,!0),e.strm.avail_out===0?Oe:cr):e.last_lit&&(it(e,!1),e.strm.avail_out===0)?tt:Xr}function Ht(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}var sr;sr=[new Ht(0,0,0,0,py),new Ht(4,4,8,4,$a),new Ht(4,5,16,8,$a),new Ht(4,6,32,32,$a),new Ht(4,4,16,16,or),new Ht(8,16,32,32,or),new Ht(8,16,128,128,or),new Ht(8,32,128,256,or),new Ht(32,128,258,1024,or),new Ht(32,258,258,4096,or)];function yy(e){e.window_size=2*e.w_size,fe(e.head),e.max_lazy_match=sr[e.level].max_lazy,e.good_match=sr[e.level].good_length,e.nice_match=sr[e.level].nice_length,e.max_chain_length=sr[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=j-1,e.match_available=0,e.ins_h=0}function gy(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ii,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new ft.Buf16(fy*2),this.dyn_dtree=new ft.Buf16((2*sy+1)*2),this.bl_tree=new ft.Buf16((2*cy+1)*2),fe(this.dyn_ltree),fe(this.dyn_dtree),fe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new ft.Buf16(ly+1),this.heap=new ft.Buf16(2*Pa+1),fe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new ft.Buf16(2*Pa+1),fe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function fl(e){var t;return!e||!e.state?ue(e,It):(e.total_in=e.total_out=0,e.data_type=ey,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?ai:Re,e.adler=t.wrap===2?0:1,t.last_flush=Pe,Bt._tr_init(t),Gt)}function ll(e){var t=fl(e);return t===Gt&&yy(e.state),t}function _y(e,t){return!e||!e.state||e.state.wrap!==2?It:(e.state.gzhead=t,Gt)}function ul(e,t,r,n,i,a){if(!e)return It;var o=1;if(t===Ym&&(t=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),i<1||i>ry||r!==ii||n<8||n>15||t<0||t>9||a<0||a>Qm)return ue(e,It);n===8&&(n=9);var s=new gy;return e.state=s,s.strm=e,s.wrap=o,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+j-1)/j),s.window=new ft.Buf8(s.w_size*2),s.head=new ft.Buf16(s.hash_size),s.prev=new ft.Buf16(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=s.lit_bufsize*4,s.pending_buf=new ft.Buf8(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=t,s.strategy=a,s.method=r,ll(e)}function by(e,t){return ul(e,t,ii,ny,iy,ty)}function vy(e,t){var r,n,i,a;if(!e||!e.state||t>il||t<0)return e?ue(e,It):It;if(n=e.state,!e.output||!e.input&&e.avail_in!==0||n.status===Wr&&t!==he)return ue(e,e.avail_out===0?Oa:It);if(n.strm=e,r=n.last_flush,n.last_flush=t,n.status===ai)if(n.wrap===2)e.adler=0,L(n,31),L(n,139),L(n,8),n.gzhead?(L(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),L(n,n.gzhead.time&255),L(n,n.gzhead.time>>8&255),L(n,n.gzhead.time>>16&255),L(n,n.gzhead.time>>24&255),L(n,n.level===9?2:n.strategy>=ti||n.level<2?4:0),L(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(L(n,n.gzhead.extra.length&255),L(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=se(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=Fa):(L(n,0),L(n,0),L(n,0),L(n,0),L(n,0),L(n,n.level===9?2:n.strategy>=ti||n.level<2?4:0),L(n,hy),n.status=Re);else{var o=ii+(n.w_bits-8<<4)<<8,s=-1;n.strategy>=ti||n.level<2?s=0:n.level<6?s=1:n.level===6?s=2:s=3,o|=s<<6,n.strstart!==0&&(o|=uy),o+=31-o%31,n.status=Re,Zr(n,o),n.strstart!==0&&(Zr(n,e.adler>>>16),Zr(n,e.adler&65535)),e.adler=1}if(n.status===Fa)if(n.gzhead.extra){for(i=n.pending;n.gzindex<(n.gzhead.extra.length&65535)&&!(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=se(e.adler,n.pending_buf,n.pending-i,i)),ce(e),i=n.pending,n.pending===n.pending_buf_size));)L(n,n.gzhead.extra[n.gzindex]&255),n.gzindex++;n.gzhead.hcrc&&n.pending>i&&(e.adler=se(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=ei)}else n.status=ei;if(n.status===ei)if(n.gzhead.name){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=se(e.adler,n.pending_buf,n.pending-i,i)),ce(e),i=n.pending,n.pending===n.pending_buf_size)){a=1;break}n.gzindex<n.gzhead.name.length?a=n.gzhead.name.charCodeAt(n.gzindex++)&255:a=0,L(n,a)}while(a!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=se(e.adler,n.pending_buf,n.pending-i,i)),a===0&&(n.gzindex=0,n.status=ri)}else n.status=ri;if(n.status===ri)if(n.gzhead.comment){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=se(e.adler,n.pending_buf,n.pending-i,i)),ce(e),i=n.pending,n.pending===n.pending_buf_size)){a=1;break}n.gzindex<n.gzhead.comment.length?a=n.gzhead.comment.charCodeAt(n.gzindex++)&255:a=0,L(n,a)}while(a!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=se(e.adler,n.pending_buf,n.pending-i,i)),a===0&&(n.status=ni)}else n.status=ni;if(n.status===ni&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&ce(e),n.pending+2<=n.pending_buf_size&&(L(n,e.adler&255),L(n,e.adler>>8&255),e.adler=0,n.status=Re)):n.status=Re),n.pending!==0){if(ce(e),e.avail_out===0)return n.last_flush=-1,Gt}else if(e.avail_in===0&&ol(t)<=ol(r)&&t!==he)return ue(e,Oa);if(n.status===Wr&&e.avail_in!==0)return ue(e,Oa);if(e.avail_in!==0||n.lookahead!==0||t!==Pe&&n.status!==Wr){var l=n.strategy===ti?my(n,t):n.strategy===Jm?wy(n,t):sr[n.level].func(n,t);if((l===Oe||l===cr)&&(n.status=Wr),l===tt||l===Oe)return e.avail_out===0&&(n.last_flush=-1),Gt;if(l===Xr&&(t===Wm?Bt._tr_align(n):t!==il&&(Bt._tr_stored_block(n,0,0,!1),t===Xm&&(fe(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),ce(e),e.avail_out===0))return n.last_flush=-1,Gt}return t!==he?Gt:n.wrap<=0?al:(n.wrap===2?(L(n,e.adler&255),L(n,e.adler>>8&255),L(n,e.adler>>16&255),L(n,e.adler>>24&255),L(n,e.total_in&255),L(n,e.total_in>>8&255),L(n,e.total_in>>16&255),L(n,e.total_in>>24&255)):(Zr(n,e.adler>>>16),Zr(n,e.adler&65535)),ce(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?Gt:al)}function xy(e){var t;return!e||!e.state?It:(t=e.state.status,t!==ai&&t!==Fa&&t!==ei&&t!==ri&&t!==ni&&t!==Re&&t!==Wr?ue(e,It):(e.state=null,t===Re?ue(e,Vm):Gt))}function Ey(e,t){var r=t.length,n,i,a,o,s,l,f,c;if(!e||!e.state||(n=e.state,o=n.wrap,o===2||o===1&&n.status!==ai||n.lookahead))return It;for(o===1&&(e.adler=sl(e.adler,t,r,0)),n.wrap=0,r>=n.w_size&&(o===0&&(fe(n.head),n.strstart=0,n.block_start=0,n.insert=0),c=new ft.Buf8(n.w_size),ft.arraySet(c,t,r-n.w_size,n.w_size,0),t=c,r=n.w_size),s=e.avail_in,l=e.next_in,f=e.input,e.avail_in=r,e.next_in=0,e.input=t,$e(n);n.lookahead>=j;){i=n.strstart,a=n.lookahead-(j-1);do n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+j-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++;while(--a);n.strstart=i,n.lookahead=j-1,$e(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=j-1,n.match_available=0,e.next_in=l,e.input=f,e.avail_in=s,n.wrap=o,Gt}Zt.deflateInit=by;Zt.deflateInit2=ul;Zt.deflateReset=ll;Zt.deflateResetKeep=fl;Zt.deflateSetHeader=_y;Zt.deflate=vy;Zt.deflateEnd=xy;Zt.deflateSetDictionary=Ey;Zt.deflateInfo="pako deflate (from Nodeca project)"});var Ca=O(fr=>{"use strict";var oi=Qt(),dl=!0,pl=!0;try{String.fromCharCode.apply(null,[0])}catch{dl=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{pl=!1}var Vr=new oi.Buf8(256);for(ee=0;ee<256;ee++)Vr[ee]=ee>=252?6:ee>=248?5:ee>=240?4:ee>=224?3:ee>=192?2:1;var ee;Vr[254]=Vr[254]=1;fr.string2buf=function(e){var t,r,n,i,a,o=e.length,s=0;for(i=0;i<o;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<o&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),s+=r<128?1:r<2048?2:r<65536?3:4;for(t=new oi.Buf8(s),a=0,i=0;a<s;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<o&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|r&63):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|r&63):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|r&63);return t};function wl(e,t){if(t<65534&&(e.subarray&&pl||!e.subarray&&dl))return String.fromCharCode.apply(null,oi.shrinkBuf(e,t));for(var r="",n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r}fr.buf2binstring=function(e){return wl(e,e.length)};fr.binstring2buf=function(e){for(var t=new oi.Buf8(e.length),r=0,n=t.length;r<n;r++)t[r]=e.charCodeAt(r);return t};fr.buf2string=function(e,t){var r,n,i,a,o=t||e.length,s=new Array(o*2);for(n=0,r=0;r<o;){if(i=e[r++],i<128){s[n++]=i;continue}if(a=Vr[i],a>4){s[n++]=65533,r+=a-1;continue}for(i&=a===2?31:a===3?15:7;a>1&&r<o;)i=i<<6|e[r++]&63,a--;if(a>1){s[n++]=65533;continue}i<65536?s[n++]=i:(i-=65536,s[n++]=55296|i>>10&1023,s[n++]=56320|i&1023)}return wl(s,n)};fr.utf8border=function(e,t){var r;for(t=t||e.length,t>e.length&&(t=e.length),r=t-1;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+Vr[e[r]]>t?r:t}});var Da=O((qv,ml)=>{"use strict";function ky(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}ml.exports=ky});var bl=O(Jr=>{"use strict";var Yr=hl(),Kr=Qt(),Na=Ca(),Ma=Qn(),Sy=Da(),_l=Object.prototype.toString,Ay=0,Ua=4,lr=0,yl=1,gl=2,By=-1,Iy=0,Ty=8;function Fe(e){if(!(this instanceof Fe))return new Fe(e);this.options=Kr.assign({level:By,method:Ty,chunkSize:16384,windowBits:15,memLevel:8,strategy:Iy,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Sy,this.strm.avail_out=0;var r=Yr.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==lr)throw new Error(Ma[r]);if(t.header&&Yr.deflateSetHeader(this.strm,t.header),t.dictionary){var n;if(typeof t.dictionary=="string"?n=Na.string2buf(t.dictionary):_l.call(t.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(t.dictionary):n=t.dictionary,r=Yr.deflateSetDictionary(this.strm,n),r!==lr)throw new Error(Ma[r]);this._dict_set=!0}}Fe.prototype.push=function(e,t){var r=this.strm,n=this.options.chunkSize,i,a;if(this.ended)return!1;a=t===~~t?t:t===!0?Ua:Ay,typeof e=="string"?r.input=Na.string2buf(e):_l.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=new Kr.Buf8(n),r.next_out=0,r.avail_out=n),i=Yr.deflate(r,a),i!==yl&&i!==lr)return this.onEnd(i),this.ended=!0,!1;(r.avail_out===0||r.avail_in===0&&(a===Ua||a===gl))&&(this.options.to==="string"?this.onData(Na.buf2binstring(Kr.shrinkBuf(r.output,r.next_out))):this.onData(Kr.shrinkBuf(r.output,r.next_out)))}while((r.avail_in>0||r.avail_out===0)&&i!==yl);return a===Ua?(i=Yr.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===lr):(a===gl&&(this.onEnd(lr),r.avail_out=0),!0)};Fe.prototype.onData=function(e){this.chunks.push(e)};Fe.prototype.onEnd=function(e){e===lr&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Kr.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function ja(e,t){var r=new Fe(t);if(r.push(e,!0),r.err)throw r.msg||Ma[r.err];return r.result}function Ry(e,t){return t=t||{},t.raw=!0,ja(e,t)}function Oy(e,t){return t=t||{},t.gzip=!0,ja(e,t)}Jr.Deflate=Fe;Jr.deflate=ja;Jr.deflateRaw=Ry;Jr.gzip=Oy});var xl=O((Gv,vl)=>{"use strict";var si=30,$y=12;vl.exports=function(t,r){var n,i,a,o,s,l,f,c,u,h,d,p,y,v,m,g,S,k,E,A,w,x,_,T,B;n=t.state,i=t.next_in,T=t.input,a=i+(t.avail_in-5),o=t.next_out,B=t.output,s=o-(r-t.avail_out),l=o+(t.avail_out-257),f=n.dmax,c=n.wsize,u=n.whave,h=n.wnext,d=n.window,p=n.hold,y=n.bits,v=n.lencode,m=n.distcode,g=(1<<n.lenbits)-1,S=(1<<n.distbits)-1;t:do{y<15&&(p+=T[i++]<<y,y+=8,p+=T[i++]<<y,y+=8),k=v[p&g];e:for(;;){if(E=k>>>24,p>>>=E,y-=E,E=k>>>16&255,E===0)B[o++]=k&65535;else if(E&16){A=k&65535,E&=15,E&&(y<E&&(p+=T[i++]<<y,y+=8),A+=p&(1<<E)-1,p>>>=E,y-=E),y<15&&(p+=T[i++]<<y,y+=8,p+=T[i++]<<y,y+=8),k=m[p&S];r:for(;;){if(E=k>>>24,p>>>=E,y-=E,E=k>>>16&255,E&16){if(w=k&65535,E&=15,y<E&&(p+=T[i++]<<y,y+=8,y<E&&(p+=T[i++]<<y,y+=8)),w+=p&(1<<E)-1,w>f){t.msg="invalid distance too far back",n.mode=si;break t}if(p>>>=E,y-=E,E=o-s,w>E){if(E=w-E,E>u&&n.sane){t.msg="invalid distance too far back",n.mode=si;break t}if(x=0,_=d,h===0){if(x+=c-E,E<A){A-=E;do B[o++]=d[x++];while(--E);x=o-w,_=B}}else if(h<E){if(x+=c+h-E,E-=h,E<A){A-=E;do B[o++]=d[x++];while(--E);if(x=0,h<A){E=h,A-=E;do B[o++]=d[x++];while(--E);x=o-w,_=B}}}else if(x+=h-E,E<A){A-=E;do B[o++]=d[x++];while(--E);x=o-w,_=B}for(;A>2;)B[o++]=_[x++],B[o++]=_[x++],B[o++]=_[x++],A-=3;A&&(B[o++]=_[x++],A>1&&(B[o++]=_[x++]))}else{x=o-w;do B[o++]=B[x++],B[o++]=B[x++],B[o++]=B[x++],A-=3;while(A>2);A&&(B[o++]=B[x++],A>1&&(B[o++]=B[x++]))}}else if((E&64)===0){k=m[(k&65535)+(p&(1<<E)-1)];continue r}else{t.msg="invalid distance code",n.mode=si;break t}break}}else if((E&64)===0){k=v[(k&65535)+(p&(1<<E)-1)];continue e}else if(E&32){n.mode=$y;break t}else{t.msg="invalid literal/length code",n.mode=si;break t}break}}while(i<a&&o<l);A=y>>3,i-=A,y-=A<<3,p&=(1<<y)-1,t.next_in=i,t.next_out=o,t.avail_in=i<a?5+(a-i):5-(i-a),t.avail_out=o<l?257+(l-o):257-(o-l),n.hold=p,n.bits=y}});var Tl=O((Zv,Il)=>{"use strict";var El=Qt(),ur=15,kl=852,Sl=592,Al=0,za=1,Bl=2,Py=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Fy=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],Cy=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Dy=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];Il.exports=function(t,r,n,i,a,o,s,l){var f=l.bits,c=0,u=0,h=0,d=0,p=0,y=0,v=0,m=0,g=0,S=0,k,E,A,w,x,_=null,T=0,B,$=new El.Buf16(ur+1),D=new El.Buf16(ur+1),U=null,J=0,Ut,kt,Ot;for(c=0;c<=ur;c++)$[c]=0;for(u=0;u<i;u++)$[r[n+u]]++;for(p=f,d=ur;d>=1&&$[d]===0;d--);if(p>d&&(p=d),d===0)return a[o++]=1<<24|64<<16|0,a[o++]=1<<24|64<<16|0,l.bits=1,0;for(h=1;h<d&&$[h]===0;h++);for(p<h&&(p=h),m=1,c=1;c<=ur;c++)if(m<<=1,m-=$[c],m<0)return-1;if(m>0&&(t===Al||d!==1))return-1;for(D[1]=0,c=1;c<ur;c++)D[c+1]=D[c]+$[c];for(u=0;u<i;u++)r[n+u]!==0&&(s[D[r[n+u]]++]=u);if(t===Al?(_=U=s,B=19):t===za?(_=Py,T-=257,U=Fy,J-=257,B=256):(_=Cy,U=Dy,B=-1),S=0,u=0,c=h,x=o,y=p,v=0,A=-1,g=1<<p,w=g-1,t===za&&g>kl||t===Bl&&g>Sl)return 1;for(;;){Ut=c-v,s[u]<B?(kt=0,Ot=s[u]):s[u]>B?(kt=U[J+s[u]],Ot=_[T+s[u]]):(kt=96,Ot=0),k=1<<c-v,E=1<<y,h=E;do E-=k,a[x+(S>>v)+E]=Ut<<24|kt<<16|Ot|0;while(E!==0);for(k=1<<c-1;S&k;)k>>=1;if(k!==0?(S&=k-1,S+=k):S=0,u++,--$[c]===0){if(c===d)break;c=r[n+s[u]]}if(c>p&&(S&w)!==A){for(v===0&&(v=p),x+=h,y=c-v,m=1<<y;y+v<d&&(m-=$[y+v],!(m<=0));)y++,m<<=1;if(g+=1<<y,t===za&&g>kl||t===Bl&&g>Sl)return 1;A=S&w,a[A]=p<<24|y<<16|x-o|0}}return S!==0&&(a[x+S]=c-v<<24|64<<16|0),l.bits=p,0}});var lu=O(Ft=>{"use strict";var vt=Qt(),Wa=Ta(),Wt=Ra(),Uy=xl(),Qr=Tl(),Ny=0,eu=1,ru=2,Rl=4,My=5,ci=6,Ce=0,jy=1,zy=2,Tt=-2,nu=-3,Xa=-4,Ly=-5,Ol=8,iu=1,$l=2,Pl=3,Fl=4,Cl=5,Dl=6,Ul=7,Nl=8,Ml=9,jl=10,ui=11,re=12,La=13,zl=14,qa=15,Ll=16,ql=17,Hl=18,Gl=19,fi=20,li=21,Zl=22,Wl=23,Xl=24,Vl=25,Yl=26,Ha=27,Kl=28,Jl=29,Z=30,Va=31,qy=32,Hy=852,Gy=592,Zy=15,Wy=Zy;function Ql(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function Xy(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new vt.Buf16(320),this.work=new vt.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function au(e){var t;return!e||!e.state?Tt:(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=iu,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new vt.Buf32(Hy),t.distcode=t.distdyn=new vt.Buf32(Gy),t.sane=1,t.back=-1,Ce)}function ou(e){var t;return!e||!e.state?Tt:(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,au(e))}function su(e,t){var r,n;return!e||!e.state||(n=e.state,t<0?(r=0,t=-t):(r=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15))?Tt:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,ou(e))}function cu(e,t){var r,n;return e?(n=new Xy,e.state=n,n.window=null,r=su(e,t),r!==Ce&&(e.state=null),r):Tt}function Vy(e){return cu(e,Wy)}var tu=!0,Ga,Za;function Yy(e){if(tu){var t;for(Ga=new vt.Buf32(512),Za=new vt.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Qr(eu,e.lens,0,288,Ga,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Qr(ru,e.lens,0,32,Za,0,e.work,{bits:5}),tu=!1}e.lencode=Ga,e.lenbits=9,e.distcode=Za,e.distbits=5}function fu(e,t,r,n){var i,a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new vt.Buf8(a.wsize)),n>=a.wsize?(vt.arraySet(a.window,t,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>n&&(i=n),vt.arraySet(a.window,t,r-n,i,a.wnext),n-=i,n?(vt.arraySet(a.window,t,r-n,n,0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0}function Ky(e,t){var r,n,i,a,o,s,l,f,c,u,h,d,p,y,v=0,m,g,S,k,E,A,w,x,_=new vt.Buf8(4),T,B,$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return Tt;r=e.state,r.mode===re&&(r.mode=La),o=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,n=e.input,s=e.avail_in,f=r.hold,c=r.bits,u=s,h=l,x=Ce;t:for(;;)switch(r.mode){case iu:if(r.wrap===0){r.mode=La;break}for(;c<16;){if(s===0)break t;s--,f+=n[a++]<<c,c+=8}if(r.wrap&2&&f===35615){r.check=0,_[0]=f&255,_[1]=f>>>8&255,r.check=Wt(r.check,_,2,0),f=0,c=0,r.mode=$l;break}if(r.flags=0,r.head&&(r.head.done=!1),!(r.wrap&1)||(((f&255)<<8)+(f>>8))%31){e.msg="incorrect header check",r.mode=Z;break}if((f&15)!==Ol){e.msg="unknown compression method",r.mode=Z;break}if(f>>>=4,c-=4,w=(f&15)+8,r.wbits===0)r.wbits=w;else if(w>r.wbits){e.msg="invalid window size",r.mode=Z;break}r.dmax=1<<w,e.adler=r.check=1,r.mode=f&512?jl:re,f=0,c=0;break;case $l:for(;c<16;){if(s===0)break t;s--,f+=n[a++]<<c,c+=8}if(r.flags=f,(r.flags&255)!==Ol){e.msg="unknown compression method",r.mode=Z;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=Z;break}r.head&&(r.head.text=f>>8&1),r.flags&512&&(_[0]=f&255,_[1]=f>>>8&255,r.check=Wt(r.check,_,2,0)),f=0,c=0,r.mode=Pl;case Pl:for(;c<32;){if(s===0)break t;s--,f+=n[a++]<<c,c+=8}r.head&&(r.head.time=f),r.flags&512&&(_[0]=f&255,_[1]=f>>>8&255,_[2]=f>>>16&255,_[3]=f>>>24&255,r.check=Wt(r.check,_,4,0)),f=0,c=0,r.mode=Fl;case Fl:for(;c<16;){if(s===0)break t;s--,f+=n[a++]<<c,c+=8}r.head&&(r.head.xflags=f&255,r.head.os=f>>8),r.flags&512&&(_[0]=f&255,_[1]=f>>>8&255,r.check=Wt(r.check,_,2,0)),f=0,c=0,r.mode=Cl;case Cl:if(r.flags&1024){for(;c<16;){if(s===0)break t;s--,f+=n[a++]<<c,c+=8}r.length=f,r.head&&(r.head.extra_len=f),r.flags&512&&(_[0]=f&255,_[1]=f>>>8&255,r.check=Wt(r.check,_,2,0)),f=0,c=0}else r.head&&(r.head.extra=null);r.mode=Dl;case Dl:if(r.flags&1024&&(d=r.length,d>s&&(d=s),d&&(r.head&&(w=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),vt.arraySet(r.head.extra,n,a,d,w)),r.flags&512&&(r.check=Wt(r.check,n,d,a)),s-=d,a+=d,r.length-=d),r.length))break t;r.length=0,r.mode=Ul;case Ul:if(r.flags&2048){if(s===0)break t;d=0;do w=n[a+d++],r.head&&w&&r.length<65536&&(r.head.name+=String.fromCharCode(w));while(w&&d<s);if(r.flags&512&&(r.check=Wt(r.check,n,d,a)),s-=d,a+=d,w)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=Nl;case Nl:if(r.flags&4096){if(s===0)break t;d=0;do w=n[a+d++],r.head&&w&&r.length<65536&&(r.head.comment+=String.fromCharCode(w));while(w&&d<s);if(r.flags&512&&(r.check=Wt(r.check,n,d,a)),s-=d,a+=d,w)break t}else r.head&&(r.head.comment=null);r.mode=Ml;case Ml:if(r.flags&512){for(;c<16;){if(s===0)break t;s--,f+=n[a++]<<c,c+=8}if(f!==(r.check&65535)){e.msg="header crc mismatch",r.mode=Z;break}f=0,c=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=re;break;case jl:for(;c<32;){if(s===0)break t;s--,f+=n[a++]<<c,c+=8}e.adler=r.check=Ql(f),f=0,c=0,r.mode=ui;case ui:if(r.havedict===0)return e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,r.hold=f,r.bits=c,zy;e.adler=r.check=1,r.mode=re;case re:if(t===My||t===ci)break t;case La:if(r.last){f>>>=c&7,c-=c&7,r.mode=Ha;break}for(;c<3;){if(s===0)break t;s--,f+=n[a++]<<c,c+=8}switch(r.last=f&1,f>>>=1,c-=1,f&3){case 0:r.mode=zl;break;case 1:if(Yy(r),r.mode=fi,t===ci){f>>>=2,c-=2;break t}break;case 2:r.mode=ql;break;case 3:e.msg="invalid block type",r.mode=Z}f>>>=2,c-=2;break;case zl:for(f>>>=c&7,c-=c&7;c<32;){if(s===0)break t;s--,f+=n[a++]<<c,c+=8}if((f&65535)!==(f>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Z;break}if(r.length=f&65535,f=0,c=0,r.mode=qa,t===ci)break t;case qa:r.mode=Ll;case Ll:if(d=r.length,d){if(d>s&&(d=s),d>l&&(d=l),d===0)break t;vt.arraySet(i,n,a,d,o),s-=d,a+=d,l-=d,o+=d,r.length-=d;break}r.mode=re;break;case ql:for(;c<14;){if(s===0)break t;s--,f+=n[a++]<<c,c+=8}if(r.nlen=(f&31)+257,f>>>=5,c-=5,r.ndist=(f&31)+1,f>>>=5,c-=5,r.ncode=(f&15)+4,f>>>=4,c-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Z;break}r.have=0,r.mode=Hl;case Hl:for(;r.have<r.ncode;){for(;c<3;){if(s===0)break t;s--,f+=n[a++]<<c,c+=8}r.lens[$[r.have++]]=f&7,f>>>=3,c-=3}for(;r.have<19;)r.lens[$[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,T={bits:r.lenbits},x=Qr(Ny,r.lens,0,19,r.lencode,0,r.work,T),r.lenbits=T.bits,x){e.msg="invalid code lengths set",r.mode=Z;break}r.have=0,r.mode=Gl;case Gl:for(;r.have<r.nlen+r.ndist;){for(;v=r.lencode[f&(1<<r.lenbits)-1],m=v>>>24,g=v>>>16&255,S=v&65535,!(m<=c);){if(s===0)break t;s--,f+=n[a++]<<c,c+=8}if(S<16)f>>>=m,c-=m,r.lens[r.have++]=S;else{if(S===16){for(B=m+2;c<B;){if(s===0)break t;s--,f+=n[a++]<<c,c+=8}if(f>>>=m,c-=m,r.have===0){e.msg="invalid bit length repeat",r.mode=Z;break}w=r.lens[r.have-1],d=3+(f&3),f>>>=2,c-=2}else if(S===17){for(B=m+3;c<B;){if(s===0)break t;s--,f+=n[a++]<<c,c+=8}f>>>=m,c-=m,w=0,d=3+(f&7),f>>>=3,c-=3}else{for(B=m+7;c<B;){if(s===0)break t;s--,f+=n[a++]<<c,c+=8}f>>>=m,c-=m,w=0,d=11+(f&127),f>>>=7,c-=7}if(r.have+d>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Z;break}for(;d--;)r.lens[r.have++]=w}}if(r.mode===Z)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=Z;break}if(r.lenbits=9,T={bits:r.lenbits},x=Qr(eu,r.lens,0,r.nlen,r.lencode,0,r.work,T),r.lenbits=T.bits,x){e.msg="invalid literal/lengths set",r.mode=Z;break}if(r.distbits=6,r.distcode=r.distdyn,T={bits:r.distbits},x=Qr(ru,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,T),r.distbits=T.bits,x){e.msg="invalid distances set",r.mode=Z;break}if(r.mode=fi,t===ci)break t;case fi:r.mode=li;case li:if(s>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,r.hold=f,r.bits=c,Uy(e,h),o=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,n=e.input,s=e.avail_in,f=r.hold,c=r.bits,r.mode===re&&(r.back=-1);break}for(r.back=0;v=r.lencode[f&(1<<r.lenbits)-1],m=v>>>24,g=v>>>16&255,S=v&65535,!(m<=c);){if(s===0)break t;s--,f+=n[a++]<<c,c+=8}if(g&&(g&240)===0){for(k=m,E=g,A=S;v=r.lencode[A+((f&(1<<k+E)-1)>>k)],m=v>>>24,g=v>>>16&255,S=v&65535,!(k+m<=c);){if(s===0)break t;s--,f+=n[a++]<<c,c+=8}f>>>=k,c-=k,r.back+=k}if(f>>>=m,c-=m,r.back+=m,r.length=S,g===0){r.mode=Yl;break}if(g&32){r.back=-1,r.mode=re;break}if(g&64){e.msg="invalid literal/length code",r.mode=Z;break}r.extra=g&15,r.mode=Zl;case Zl:if(r.extra){for(B=r.extra;c<B;){if(s===0)break t;s--,f+=n[a++]<<c,c+=8}r.length+=f&(1<<r.extra)-1,f>>>=r.extra,c-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=Wl;case Wl:for(;v=r.distcode[f&(1<<r.distbits)-1],m=v>>>24,g=v>>>16&255,S=v&65535,!(m<=c);){if(s===0)break t;s--,f+=n[a++]<<c,c+=8}if((g&240)===0){for(k=m,E=g,A=S;v=r.distcode[A+((f&(1<<k+E)-1)>>k)],m=v>>>24,g=v>>>16&255,S=v&65535,!(k+m<=c);){if(s===0)break t;s--,f+=n[a++]<<c,c+=8}f>>>=k,c-=k,r.back+=k}if(f>>>=m,c-=m,r.back+=m,g&64){e.msg="invalid distance code",r.mode=Z;break}r.offset=S,r.extra=g&15,r.mode=Xl;case Xl:if(r.extra){for(B=r.extra;c<B;){if(s===0)break t;s--,f+=n[a++]<<c,c+=8}r.offset+=f&(1<<r.extra)-1,f>>>=r.extra,c-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Z;break}r.mode=Vl;case Vl:if(l===0)break t;if(d=h-l,r.offset>d){if(d=r.offset-d,d>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Z;break}d>r.wnext?(d-=r.wnext,p=r.wsize-d):p=r.wnext-d,d>r.length&&(d=r.length),y=r.window}else y=i,p=o-r.offset,d=r.length;d>l&&(d=l),l-=d,r.length-=d;do i[o++]=y[p++];while(--d);r.length===0&&(r.mode=li);break;case Yl:if(l===0)break t;i[o++]=r.length,l--,r.mode=li;break;case Ha:if(r.wrap){for(;c<32;){if(s===0)break t;s--,f|=n[a++]<<c,c+=8}if(h-=l,e.total_out+=h,r.total+=h,h&&(e.adler=r.check=r.flags?Wt(r.check,i,h,o-h):Wa(r.check,i,h,o-h)),h=l,(r.flags?f:Ql(f))!==r.check){e.msg="incorrect data check",r.mode=Z;break}f=0,c=0}r.mode=Kl;case Kl:if(r.wrap&&r.flags){for(;c<32;){if(s===0)break t;s--,f+=n[a++]<<c,c+=8}if(f!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=Z;break}f=0,c=0}r.mode=Jl;case Jl:x=jy;break t;case Z:x=nu;break t;case Va:return Xa;case qy:default:return Tt}return e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,r.hold=f,r.bits=c,(r.wsize||h!==e.avail_out&&r.mode<Z&&(r.mode<Ha||t!==Rl))&&fu(e,e.output,e.next_out,h-e.avail_out)?(r.mode=Va,Xa):(u-=e.avail_in,h-=e.avail_out,e.total_in+=u,e.total_out+=h,r.total+=h,r.wrap&&h&&(e.adler=r.check=r.flags?Wt(r.check,i,h,e.next_out-h):Wa(r.check,i,h,e.next_out-h)),e.data_type=r.bits+(r.last?64:0)+(r.mode===re?128:0)+(r.mode===fi||r.mode===qa?256:0),(u===0&&h===0||t===Rl)&&x===Ce&&(x=Ly),x)}function Jy(e){if(!e||!e.state)return Tt;var t=e.state;return t.window&&(t.window=null),e.state=null,Ce}function Qy(e,t){var r;return!e||!e.state||(r=e.state,(r.wrap&2)===0)?Tt:(r.head=t,t.done=!1,Ce)}function tg(e,t){var r=t.length,n,i,a;return!e||!e.state||(n=e.state,n.wrap!==0&&n.mode!==ui)?Tt:n.mode===ui&&(i=1,i=Wa(i,t,r,0),i!==n.check)?nu:(a=fu(e,t,r,r),a?(n.mode=Va,Xa):(n.havedict=1,Ce))}Ft.inflateReset=ou;Ft.inflateReset2=su;Ft.inflateResetKeep=au;Ft.inflateInit=Vy;Ft.inflateInit2=cu;Ft.inflate=Ky;Ft.inflateEnd=Jy;Ft.inflateGetHeader=Qy;Ft.inflateSetDictionary=tg;Ft.inflateInfo="pako inflate (from Nodeca project)"});var Ya=O((Xv,uu)=>{"use strict";uu.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}});var du=O((Vv,hu)=>{"use strict";function eg(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}hu.exports=eg});var wu=O(en=>{"use strict";var hr=lu(),tn=Qt(),hi=Ca(),Y=Ya(),Ka=Qn(),rg=Da(),ng=du(),pu=Object.prototype.toString;function De(e){if(!(this instanceof De))return new De(e);this.options=tn.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new rg,this.strm.avail_out=0;var r=hr.inflateInit2(this.strm,t.windowBits);if(r!==Y.Z_OK)throw new Error(Ka[r]);if(this.header=new ng,hr.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=hi.string2buf(t.dictionary):pu.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=hr.inflateSetDictionary(this.strm,t.dictionary),r!==Y.Z_OK)))throw new Error(Ka[r])}De.prototype.push=function(e,t){var r=this.strm,n=this.options.chunkSize,i=this.options.dictionary,a,o,s,l,f,c=!1;if(this.ended)return!1;o=t===~~t?t:t===!0?Y.Z_FINISH:Y.Z_NO_FLUSH,typeof e=="string"?r.input=hi.binstring2buf(e):pu.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=new tn.Buf8(n),r.next_out=0,r.avail_out=n),a=hr.inflate(r,Y.Z_NO_FLUSH),a===Y.Z_NEED_DICT&&i&&(a=hr.inflateSetDictionary(this.strm,i)),a===Y.Z_BUF_ERROR&&c===!0&&(a=Y.Z_OK,c=!1),a!==Y.Z_STREAM_END&&a!==Y.Z_OK)return this.onEnd(a),this.ended=!0,!1;r.next_out&&(r.avail_out===0||a===Y.Z_STREAM_END||r.avail_in===0&&(o===Y.Z_FINISH||o===Y.Z_SYNC_FLUSH))&&(this.options.to==="string"?(s=hi.utf8border(r.output,r.next_out),l=r.next_out-s,f=hi.buf2string(r.output,s),r.next_out=l,r.avail_out=n-l,l&&tn.arraySet(r.output,r.output,s,l,0),this.onData(f)):this.onData(tn.shrinkBuf(r.output,r.next_out))),r.avail_in===0&&r.avail_out===0&&(c=!0)}while((r.avail_in>0||r.avail_out===0)&&a!==Y.Z_STREAM_END);return a===Y.Z_STREAM_END&&(o=Y.Z_FINISH),o===Y.Z_FINISH?(a=hr.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===Y.Z_OK):(o===Y.Z_SYNC_FLUSH&&(this.onEnd(Y.Z_OK),r.avail_out=0),!0)};De.prototype.onData=function(e){this.chunks.push(e)};De.prototype.onEnd=function(e){e===Y.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=tn.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Ja(e,t){var r=new De(t);if(r.push(e,!0),r.err)throw r.msg||Ka[r.err];return r.result}function ig(e,t){return t=t||{},t.raw=!0,Ja(e,t)}en.Inflate=De;en.inflate=Ja;en.inflateRaw=ig;en.ungzip=Ja});var gu=O((Kv,yu)=>{"use strict";var ag=Qt().assign,og=bl(),sg=wu(),cg=Ya(),mu={};ag(mu,og,sg,cg);yu.exports=mu});var vu=O((Jv,bu)=>{"use strict";var _u=(e,t)=>function(...r){let n=t.promiseModule;return new n((i,a)=>{t.multiArgs?r.push((...o)=>{t.errorFirst?o[0]?a(o):(o.shift(),i(o)):i(o)}):t.errorFirst?r.push((o,s)=>{o?a(o):i(s)}):r.push(i),e.apply(this,r)})};bu.exports=(e,t)=>{t=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},t);let r=typeof e;if(!(e!==null&&(r==="object"||r==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${e===null?"null":r}\``);let n=a=>{let o=s=>typeof s=="string"?a===s:s.test(a);return t.include?t.include.some(o):!t.exclude.some(o)},i;r==="function"?i=function(...a){return t.excludeMain?e(...a):_u(e,t).apply(this,a)}:i=Object.create(Object.getPrototypeOf(e));for(let a in e){let o=e[a];i[a]=typeof o=="function"&&n(a)?_u(o,t):o}return i}});var Ru=O((Qv,Tu)=>{function xu(e){return Array.isArray(e)?e:[e]}var eo="",Eu=" ",Qa="\\",fg=/^\s+$/,lg=/(?:[^\\]|^)\\$/,ug=/^\\!/,hg=/^\\#/,dg=/\r?\n/g,pg=/^\.*\/|^\.+$/,to="/",Au="node-ignore";typeof Symbol<"u"&&(Au=Symbol.for("node-ignore"));var ku=Au,wg=(e,t,r)=>Object.defineProperty(e,t,{value:r}),mg=/([0-z])-([0-z])/g,Bu=()=>!1,yg=e=>e.replace(mg,(t,r,n)=>r.charCodeAt(0)<=n.charCodeAt(0)?t:eo),gg=e=>{let{length:t}=e;return e.slice(0,t-t%2)},_g=[[/^\uFEFF/,()=>eo],[/((?:\\\\)*?)(\\?\s+)$/,(e,t,r)=>t+(r.indexOf("\\")===0?Eu:eo)],[/(\\+?)\s/g,(e,t)=>{let{length:r}=t;return t.slice(0,r-r%2)+Eu}],[/[\\$.|*+(){^]/g,e=>`\\${e}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(e,t,r)=>t+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(e,t,r)=>{let n=r.replace(/\\\*/g,"[^\\/]*");return t+n}],[/\\\\\\(?=[$.|*+(){^])/g,()=>Qa],[/\\\\/g,()=>Qa],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(e,t,r,n,i)=>t===Qa?`\\[${r}${gg(n)}${i}`:i==="]"&&n.length%2===0?`[${yg(r)}${n}]`:"[]"],[/(?:[^*])$/,e=>/\/$/.test(e)?`${e}$`:`${e}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(e,t)=>`${t?`${t}[^/]+`:"[^/]*"}(?=$|\\/$)`]],Su=Object.create(null),bg=(e,t)=>{let r=Su[e];return r||(r=_g.reduce((n,[i,a])=>n.replace(i,a.bind(e)),e),Su[e]=r),t?new RegExp(r,"i"):new RegExp(r)},io=e=>typeof e=="string",vg=e=>e&&io(e)&&!fg.test(e)&&!lg.test(e)&&e.indexOf("#")!==0,xg=e=>e.split(dg),ro=class{constructor(t,r,n,i){this.origin=t,this.pattern=r,this.negative=n,this.regex=i}},Eg=(e,t)=>{let r=e,n=!1;e.indexOf("!")===0&&(n=!0,e=e.substr(1)),e=e.replace(ug,"!").replace(hg,"#");let i=bg(e,t);return new ro(r,e,n,i)},kg=(e,t)=>{throw new t(e)},ne=(e,t,r)=>io(e)?e?ne.isNotRelative(e)?r(`path should be a \`path.relative()\`d string, but got "${t}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${t}\``,TypeError),Iu=e=>pg.test(e);ne.isNotRelative=Iu;ne.convert=e=>e;var no=class{constructor({ignorecase:t=!0,ignoreCase:r=t,allowRelativePaths:n=!1}={}){wg(this,ku,!0),this._rules=[],this._ignoreCase=r,this._allowRelativePaths=n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(t){if(t&&t[ku]){this._rules=this._rules.concat(t._rules),this._added=!0;return}if(vg(t)){let r=Eg(t,this._ignoreCase);this._added=!0,this._rules.push(r)}}add(t){return this._added=!1,xu(io(t)?xg(t):t).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(t){return this.add(t)}_testOne(t,r){let n=!1,i=!1;return this._rules.forEach(a=>{let{negative:o}=a;if(i===o&&n!==i||o&&!n&&!i&&!r)return;a.regex.test(t)&&(n=!o,i=o)}),{ignored:n,unignored:i}}_test(t,r,n,i){let a=t&&ne.convert(t);return ne(a,t,this._allowRelativePaths?Bu:kg),this._t(a,r,n,i)}_t(t,r,n,i){if(t in r)return r[t];if(i||(i=t.split(to)),i.pop(),!i.length)return r[t]=this._testOne(t,n);let a=this._t(i.join(to)+to,r,n,i);return r[t]=a.ignored?a:this._testOne(t,n)}ignores(t){return this._test(t,this._ignoreCache,!1).ignored}createFilter(){return t=>!this.ignores(t)}filter(t){return xu(t).filter(this.createFilter())}test(t){return this._test(t,this._testCache,!0)}},di=e=>new no(e),Sg=e=>ne(e&&ne.convert(e),e,Bu);di.isPathValid=Sg;di.default=di;Tu.exports=di;if(typeof process<"u"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let e=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");ne.convert=e;let t=/^[a-z]:\//i;ne.isNotRelative=r=>t.test(r)||Iu(r)}});var $u=O((tx,Ou)=>{"use strict";function Ag(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Xt(e,t,r){return t=t instanceof RegExp?t:new RegExp(Ag(t),"g"),e.replace(t,r)}var Bg={clean:function(t){if(typeof t!="string")throw new Error("Expected a string, received: "+t);return t=Xt(t,"./","/"),t=Xt(t,"..","."),t=Xt(t," ","-"),t=Xt(t,/^[~^:?*\\\-]/g,""),t=Xt(t,/[~^:?*\\]/g,"-"),t=Xt(t,/[~^:?*\\\-]$/g,""),t=Xt(t,"@{","-"),t=Xt(t,/\.$/g,""),t=Xt(t,/\/$/g,""),t=Xt(t,/\.lock$/g,""),t}};Ou.exports=Bg});var Fu=O((ex,Pu)=>{Pu.exports=function(e,t){var r=e,n=t,i=r.length,a=n.length,o=!1,s=null,l=i+1,f=[],c=[],u=[],h="",d=-1,p=0,y=1,v,m,g=function(){i>=a&&(v=r,m=i,r=n,n=v,i=a,a=m,o=!0,l=i+1)},S=function(w,x,_){return{x:w,y:x,k:_}},k=function(w,x){return{elem:w,t:x}},E=function(w,x,_){var T,B,$;for(x>_?T=f[w-1+l]:T=f[w+1+l],$=Math.max(x,_),B=$-w;B<i&&$<a&&r[B]===n[$];)++B,++$;return f[w+l]=c.length,c[c.length]=new S(B,$,T),$},A=function(w){var x,_,T,B,$;for(x=_=1,T=B=0,$=w.length-1;$>=0;--$)for(;T<w[$].x||B<w[$].y;)w[$].y-w[$].x>B-T?(o?u[u.length]=new k(n[B],d):u[u.length]=new k(n[B],y),++_,++B):w[$].y-w[$].x<B-T?(o?u[u.length]=new k(r[T],y):u[u.length]=new k(r[T],d),++x,++T):(u[u.length]=new k(r[T],p),h+=r[T],++x,++_,++T,++B)};return g(),{SES_DELETE:-1,SES_COMMON:0,SES_ADD:1,editdistance:function(){return s},getlcs:function(){return h},getses:function(){return u},compose:function(){var w,x,_,T,B,$,D,U;for(w=a-i,x=i+a+3,_={},D=0;D<x;++D)_[D]=-1,f[D]=-1;T=-1;do{for(++T,U=-T;U<=w-1;++U)_[U+l]=E(U,_[U-1+l]+1,_[U+1+l]);for(U=w+T;U>=w+1;--U)_[U+l]=E(U,_[U-1+l]+1,_[U+1+l]);_[w+l]=E(w,_[w-1+l]+1,_[w+1+l])}while(_[w+l]!==a);for(s=w+2*T,B=f[w+l],$=[];B!==-1;)$[$.length]=new S(c[B].x,c[B].y,null),B=c[B].k;A($)}}}});var Uu=O((rx,Du)=>{var Ig=Fu();function Tg(e,t){var r=new Ig(e,t);r.compose();for(var n=r.getses(),i,a,o=e.length-1,s=t.length-1,l=n.length-1;l>=0;--l)n[l].t===r.SES_COMMON?(a?(a.chain={file1index:o,file2index:s,chain:null},a=a.chain):(i={file1index:o,file2index:s,chain:null},a=i),o--,s--):n[l].t===r.SES_DELETE?o--:n[l].t===r.SES_ADD&&s--;var f={file1index:-1,file2index:-1,chain:null};return a?(a.chain=f,i):f}function Cu(e,t){for(var r=[],n=e.length,i=t.length,a=Tg(e,t);a!==null;a=a.chain){var o=n-a.file1index-1,s=i-a.file2index-1;n=a.file1index,i=a.file2index,(o||s)&&r.push({file1:[n+1,o],file2:[i+1,s]})}return r.reverse(),r}function Rg(e,t,r){var n,i=Cu(t,e),a=Cu(t,r),o=[];function s(D,U){o.push([D.file1[0],U,D.file1[1],D.file2[0],D.file2[1]])}for(n=0;n<i.length;n++)s(i[n],0);for(n=0;n<a.length;n++)s(a[n],2);o.sort(function(D,U){return D[0]-U[0]});var l=[],f=0;function c(D){D>f&&(l.push([1,f,D-f]),f=D)}for(var u=0;u<o.length;u++){for(var h=u,d=o[u],p=d[0],y=p+d[2];u<o.length-1;){var v=o[u+1],m=v[0];if(m>y)break;y=Math.max(y,m+v[2]),u++}if(c(p),h==u)d[4]>0&&l.push([d[1],d[3],d[4]]);else{var g={0:[e.length,-1,t.length,-1],2:[r.length,-1,t.length,-1]};for(n=h;n<=u;n++){d=o[n];var S=d[1],k=g[S],E=d[0],A=E+d[2],w=d[3],x=w+d[4];k[0]=Math.min(w,k[0]),k[1]=Math.max(x,k[1]),k[2]=Math.min(E,k[2]),k[3]=Math.max(A,k[3])}var _=g[0][0]+(p-g[0][2]),T=g[0][1]+(y-g[0][3]),B=g[2][0]+(p-g[2][2]),$=g[2][1]+(y-g[2][3]);l.push([-1,_,T-_,p,y-p,B,$-B])}f=y}return c(t.length),l}function Og(e,t,r){var n=[],i=[e,t,r],a=Rg(e,t,r),o=[];function s(){o.length&&n.push({ok:o}),o=[]}function l(d){for(var p=0;p<d.length;p++)o.push(d[p])}function f(d){if(d[2]!=d[6])return!0;for(var p=d[1],y=d[5],v=0;v<d[2];v++)if(e[v+p]!=r[v+y])return!0;return!1}for(var c=0;c<a.length;c++){var u=a[c],h=u[0];h==-1?f(u)?(s(),n.push({conflict:{a:e.slice(u[1],u[1]+u[2]),aIndex:u[1],o:t.slice(u[3],u[3]+u[4]),oIndex:u[3],b:r.slice(u[5],u[5]+u[6]),bIndex:u[5]}})):l(i[0].slice(u[1],u[1]+u[2])):l(i[h].slice(u[1],u[1]+u[2]))}return s(),n}Du.exports=Og});var e0=O(F=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});function ve(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var nn=ve(Xo()),oh=ve(Tf()),$g=ve(Of()),Oo=ve(gu()),ao=ve(vu()),Pg=ve(Ru()),an=ve($u()),Fg=ve(Uu()),z=class e extends Error{constructor(t){super(t),this.caller=""}toJSON(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}fromJSON(t){let r=new e(t.message);return r.code=t.code,r.data=t.data,r.caller=t.caller,r.stack=t.stack,r}get isIsomorphicGitError(){return!0}},on=class e extends z{constructor(t){super(`Modifying the index is not possible because you have unmerged files: ${t.toString}. Fix them up in the work tree, and then use 'git add/rm as appropriate to mark resolution and make a commit.`),this.code=this.name=e.code,this.data={filepaths:t}}};on.code="UnmergedPathsError";var N=class e extends z{constructor(t){super(`An internal error caused this command to fail.

If you're not a developer, report the bug to the developers of the application you're using. If this is a bug in isomorphic-git then you should create a proper bug yourselves. The bug should include a minimal reproduction and details about the version and environment.

Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${t}`),this.code=this.name=e.code,this.data={message:t}}};N.code="InternalError";var pr=class e extends z{constructor(t){super(`The filepath "${t}" contains unsafe character sequences`),this.code=this.name=e.code,this.data={filepath:t}}};pr.code="UnsafeFilepathError";var Rt=class{constructor(t){this.buffer=t,this._start=0}eof(){return this._start>=this.buffer.length}tell(){return this._start}seek(t){this._start=t}slice(t){let r=this.buffer.slice(this._start,this._start+t);return this._start+=t,r}toString(t,r){let n=this.buffer.toString(t,this._start,this._start+r);return this._start+=r,n}write(t,r,n){let i=this.buffer.write(t,this._start,r,n);return this._start+=r,i}copy(t,r,n){let i=t.copy(this.buffer,this._start,r,n);return this._start+=i,i}readUInt8(){let t=this.buffer.readUInt8(this._start);return this._start+=1,t}writeUInt8(t){let r=this.buffer.writeUInt8(t,this._start);return this._start+=1,r}readUInt16BE(){let t=this.buffer.readUInt16BE(this._start);return this._start+=2,t}writeUInt16BE(t){let r=this.buffer.writeUInt16BE(t,this._start);return this._start+=2,r}readUInt32BE(){let t=this.buffer.readUInt32BE(this._start);return this._start+=4,t}writeUInt32BE(t){let r=this.buffer.writeUInt32BE(t,this._start);return this._start+=4,r}};function Ai(e,t){return-(e<t)||+(e>t)}function sh(e,t){return Ai(e.path,t.path)}function ch(e){let t=e>0?e>>12:0;t!==4&&t!==8&&t!==10&&t!==14&&(t=8);let r=e&511;return r&73?r=493:r=420,t!==8&&(r=0),(t<<12)+r}var Vt=2**32;function Nu(e,t,r,n){if(e!==void 0&&t!==void 0)return[e,t];r===void 0&&(r=n.valueOf());let i=Math.floor(r/1e3),a=(r-i*1e3)*1e6;return[i,a]}function wr(e){let[t,r]=Nu(e.ctimeSeconds,e.ctimeNanoseconds,e.ctimeMs,e.ctime),[n,i]=Nu(e.mtimeSeconds,e.mtimeNanoseconds,e.mtimeMs,e.mtime);return{ctimeSeconds:t%Vt,ctimeNanoseconds:r%Vt,mtimeSeconds:n%Vt,mtimeNanoseconds:i%Vt,dev:e.dev%Vt,ino:e.ino%Vt,mode:ch(e.mode%Vt),uid:e.uid%Vt,gid:e.gid%Vt,size:e.size>-1?e.size%Vt:0}}function Cg(e){let t="";for(let r of new Uint8Array(e))r<16&&(t+="0"),t+=r.toString(16);return t}var oo=null;async function ae(e){return oo===null&&(oo=await Ug()),oo?fh(e):Dg(e)}function Dg(e){return new oh().update(e).digest("hex")}async function fh(e){let t=await crypto.subtle.digest("SHA-1",e);return Cg(t)}async function Ug(){try{return await fh(new Uint8Array([]))==="da39a3ee5e6b4b0d3255bfef95601890afd80709"}catch{}return!1}function Ng(e){return{assumeValid:!!(e&32768),extended:!!(e&16384),stage:(e&12288)>>12,nameLength:e&4095}}function Mg(e){let t=e.flags;return t.extended=!1,t.nameLength=Math.min(Buffer.from(e.path).length,4095),(t.assumeValid?32768:0)+(t.extended?16384:0)+((t.stage&3)<<12)+(t.nameLength&4095)}var _o=class e{constructor(t,r){this._dirty=!1,this._unmergedPaths=r||new Set,this._entries=t||new Map}_addEntry(t){if(t.flags.stage===0)t.stages=[t],this._entries.set(t.path,t),this._unmergedPaths.delete(t.path);else{let r=this._entries.get(t.path);r||(this._entries.set(t.path,t),r=t),r.stages[t.flags.stage]=t,this._unmergedPaths.add(t.path)}}static async from(t){if(Buffer.isBuffer(t))return e.fromBuffer(t);if(t===null)return new e(null);throw new N("invalid type passed to GitIndex.from")}static async fromBuffer(t){if(t.length===0)throw new N("Index file is empty (.git/index)");let r=new e,n=new Rt(t),i=n.toString("utf8",4);if(i!=="DIRC")throw new N(`Invalid dircache magic file number: ${i}`);let a=await ae(t.slice(0,-20)),o=t.slice(-20).toString("hex");if(o!==a)throw new N(`Invalid checksum in GitIndex buffer: expected ${o} but saw ${a}`);let s=n.readUInt32BE();if(s!==2)throw new N(`Unsupported dircache version: ${s}`);let l=n.readUInt32BE(),f=0;for(;!n.eof()&&f<l;){let c={};c.ctimeSeconds=n.readUInt32BE(),c.ctimeNanoseconds=n.readUInt32BE(),c.mtimeSeconds=n.readUInt32BE(),c.mtimeNanoseconds=n.readUInt32BE(),c.dev=n.readUInt32BE(),c.ino=n.readUInt32BE(),c.mode=n.readUInt32BE(),c.uid=n.readUInt32BE(),c.gid=n.readUInt32BE(),c.size=n.readUInt32BE(),c.oid=n.slice(20).toString("hex");let u=n.readUInt16BE();c.flags=Ng(u);let h=t.indexOf(0,n.tell()+1)-n.tell();if(h<1)throw new N(`Got a path length of: ${h}`);if(c.path=n.toString("utf8",h),c.path.includes("..\\")||c.path.includes("../"))throw new pr(c.path);let d=8-(n.tell()-12)%8;for(d===0&&(d=8);d--;){let p=n.readUInt8();if(p!==0)throw new N(`Expected 1-8 null characters but got '${p}' after ${c.path}`);if(n.eof())throw new N("Unexpected end of file")}c.stages=[],r._addEntry(c),f++}return r}get unmergedPaths(){return[...this._unmergedPaths]}get entries(){return[...this._entries.values()].sort(sh)}get entriesMap(){return this._entries}get entriesFlat(){return[...this.entries].flatMap(t=>t.stages.length>1?t.stages.filter(r=>r):t)}*[Symbol.iterator](){for(let t of this.entries)yield t}insert({filepath:t,stats:r,oid:n,stage:i=0}){r||(r={ctimeSeconds:0,ctimeNanoseconds:0,mtimeSeconds:0,mtimeNanoseconds:0,dev:0,ino:0,mode:0,uid:0,gid:0,size:0}),r=wr(r);let a=Buffer.from(t),o={ctimeSeconds:r.ctimeSeconds,ctimeNanoseconds:r.ctimeNanoseconds,mtimeSeconds:r.mtimeSeconds,mtimeNanoseconds:r.mtimeNanoseconds,dev:r.dev,ino:r.ino,mode:r.mode||33188,uid:r.uid,gid:r.gid,size:r.size,path:t,oid:n,flags:{assumeValid:!1,extended:!1,stage:i,nameLength:a.length<4095?a.length:4095},stages:[]};this._addEntry(o),this._dirty=!0}delete({filepath:t}){if(this._entries.has(t))this._entries.delete(t);else for(let r of this._entries.keys())r.startsWith(t+"/")&&this._entries.delete(r);this._unmergedPaths.has(t)&&this._unmergedPaths.delete(t),this._dirty=!0}clear(){this._entries.clear(),this._dirty=!0}has({filepath:t}){return this._entries.has(t)}render(){return this.entries.map(t=>`${t.mode.toString(8)} ${t.oid}    ${t.path}`).join(`
`)}static async _entryToBuffer(t){let r=Buffer.from(t.path),n=Math.ceil((62+r.length+1)/8)*8,i=Buffer.alloc(n),a=new Rt(i),o=wr(t);return a.writeUInt32BE(o.ctimeSeconds),a.writeUInt32BE(o.ctimeNanoseconds),a.writeUInt32BE(o.mtimeSeconds),a.writeUInt32BE(o.mtimeNanoseconds),a.writeUInt32BE(o.dev),a.writeUInt32BE(o.ino),a.writeUInt32BE(o.mode),a.writeUInt32BE(o.uid),a.writeUInt32BE(o.gid),a.writeUInt32BE(o.size),a.write(t.oid,20,"hex"),a.writeUInt16BE(Mg(t)),a.write(t.path,r.length,"utf8"),i}async toObject(){let t=Buffer.alloc(12),r=new Rt(t);r.write("DIRC",4,"utf8"),r.writeUInt32BE(2),r.writeUInt32BE(this.entriesFlat.length);let n=[];for(let s of this.entries)if(n.push(e._entryToBuffer(s)),s.stages.length>1)for(let l of s.stages)l&&l!==s&&n.push(e._entryToBuffer(l));n=await Promise.all(n);let i=Buffer.concat(n),a=Buffer.concat([t,i]),o=await ae(a);return Buffer.concat([a,Buffer.from(o,"hex")])}};function mi(e,t,r=!0,n=!0){let i=wr(e),a=wr(t);return r&&i.mode!==a.mode||i.mtimeSeconds!==a.mtimeSeconds||i.ctimeSeconds!==a.ctimeSeconds||i.uid!==a.uid||i.gid!==a.gid||n&&i.ino!==a.ino||i.size!==a.size}var so=null,co=Symbol("IndexCache");function jg(){return{map:new Map,stats:new Map}}async function zg(e,t,r){let[n,i]=await Promise.all([e.lstat(t),e.read(t)]),a=await _o.from(i);r.map.set(t,a),r.stats.set(t,n)}async function Lg(e,t,r){let n=r.stats.get(t);if(n===void 0)return!0;if(n===null)return!1;let i=await e.lstat(t);return i===null?!1:mi(n,i)}var K=class{static async acquire({fs:t,gitdir:r,cache:n,allowUnmerged:i=!0},a){n[co]||(n[co]=jg());let o=`${r}/index`;so===null&&(so=new nn({maxPending:1/0}));let s,l=[];return await so.acquire(o,async()=>{let f=n[co];await Lg(t,o,f)&&await zg(t,o,f);let c=f.map.get(o);if(l=c.unmergedPaths,l.length&&!i)throw new on(l);if(s=await a(c),c._dirty){let u=await c.toObject();await t.write(o,u),f.stats.set(o,await t.lstat(o)),c._dirty=!1}}),s}};function yi(e){let t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t>-1&&(e=e.slice(t+1)),e}function mr(e){let t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t===-1?".":t===0?"/":e.slice(0,t)}function lh(e){let t=new Map,r=function(i){if(!t.has(i)){let a={type:"tree",fullpath:i,basename:yi(i),metadata:{},children:[]};t.set(i,a),a.parent=r(mr(i)),a.parent&&a.parent!==a&&a.parent.children.push(a)}return t.get(i)},n=function(i,a){if(!t.has(i)){let o={type:"blob",fullpath:i,basename:yi(i),metadata:a,parent:r(mr(i)),children:[]};o.parent&&o.parent.children.push(o),t.set(i,o)}return t.get(i)};r(".");for(let i of e)n(i.path,i);return t}function qg(e){switch(e){case 16384:return"tree";case 33188:return"blob";case 33261:return"blob";case 40960:return"blob";case 57344:return"commit"}throw new N(`Unexpected GitTree entry mode: ${e.toString(8)}`)}var bo=class{constructor({fs:t,gitdir:r,cache:n}){this.treePromise=K.acquire({fs:t,gitdir:r,cache:n},async function(a){return lh(a.entries)});let i=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){let r=t._fullpath,i=(await this.treePromise).get(r);if(!i||i.type==="blob")return null;if(i.type!=="tree")throw new Error(`ENOTDIR: not a directory, scandir '${r}'`);let a=i.children.map(o=>o.fullpath);return a.sort(Ai),a}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){let n=(await this.treePromise).get(t._fullpath);if(!n)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);let i=n.type==="tree"?{}:wr(n.metadata);t._type=n.type==="tree"?"tree":qg(i.mode),t._mode=i.mode,n.type==="tree"?t._stat=void 0:t._stat=i}return t._stat}async content(t){}async oid(t){if(t._oid===!1){let n=(await this.treePromise).get(t._fullpath);t._oid=n.metadata.oid}return t._oid}},Bi=Symbol("GitWalkSymbol");function Le(){let e=Object.create(null);return Object.defineProperty(e,Bi,{value:function({fs:t,gitdir:r,cache:n}){return new bo({fs:t,gitdir:r,cache:n})}}),Object.freeze(e),e}var H=class e extends z{constructor(t){super(`Could not find ${t}.`),this.code=this.name=e.code,this.data={what:t}}};H.code="NotFoundError";var lt=class e extends z{constructor(t,r,n,i){super(`Object ${t} ${i?`at ${i}`:""}was anticipated to be a ${n} but it is a ${r}.`),this.code=this.name=e.code,this.data={oid:t,actual:r,expected:n,filepath:i}}};lt.code="ObjectTypeError";var we=class e extends z{constructor(t){super(`Expected a 40-char hex object id but saw "${t}".`),this.code=this.name=e.code,this.data={value:t}}};we.code="InvalidOidError";var sn=class e extends z{constructor(t){super(`Could not find a fetch refspec for remote "${t}". Make sure the config file has an entry like the following:
[remote "${t}"]
	fetch = +refs/heads/*:refs/remotes/origin/*
`),this.code=this.name=e.code,this.data={remote:t}}};sn.code="NoRefspecError";var gi=class e{constructor(t){if(this.refs=new Map,this.parsedConfig=[],t){let r=null;this.parsedConfig=t.trim().split(`
`).map(n=>{if(/^\s*#/.test(n))return{line:n,comment:!0};let i=n.indexOf(" ");if(n.startsWith("^")){let a=n.slice(1);return this.refs.set(r+"^{}",a),{line:n,ref:r,peeled:a}}else{let a=n.slice(0,i);return r=n.slice(i+1),this.refs.set(r,a),{line:n,ref:r,oid:a}}})}return this}static from(t){return new e(t)}delete(t){this.parsedConfig=this.parsedConfig.filter(r=>r.ref!==t),this.refs.delete(t)}toString(){return this.parsedConfig.map(({line:t})=>t).join(`
`)+`
`}},_i=class e{constructor({remotePath:t,localPath:r,force:n,matchPrefix:i}){Object.assign(this,{remotePath:t,localPath:r,force:n,matchPrefix:i})}static from(t){let[r,n,i,a,o]=t.match(/^(\+?)(.*?)(\*?):(.*?)(\*?)$/).slice(1),s=r==="+",l=i==="*";if(l!==(o==="*"))throw new N("Invalid refspec");return new e({remotePath:n,localPath:a,force:s,matchPrefix:l})}translate(t){if(this.matchPrefix){if(t.startsWith(this.remotePath))return this.localPath+t.replace(this.remotePath,"")}else if(t===this.remotePath)return this.localPath;return null}reverseTranslate(t){if(this.matchPrefix){if(t.startsWith(this.localPath))return this.remotePath+t.replace(this.localPath,"")}else if(t===this.localPath)return this.remotePath;return null}},vo=class e{constructor(t=[]){this.rules=t}static from(t){let r=[];for(let n of t)r.push(_i.from(n));return new e(r)}add(t){let r=_i.from(t);this.rules.push(r)}translate(t){let r=[];for(let n of this.rules)for(let i of t){let a=n.translate(i);a&&r.push([i,a])}return r}translateOne(t){let r=null;for(let n of this.rules){let i=n.translate(t);i&&(r=i)}return r}localNamespaces(){return this.rules.filter(t=>t.matchPrefix).map(t=>t.localPath.replace(/\/$/,""))}};function Hg(e,t){let r=e.replace(/\^\{\}$/,""),n=t.replace(/\^\{\}$/,""),i=-(r<n)||+(r>n);return i===0?e.endsWith("^{}")?1:-1:i}function Gg(e,t){let r="",n=0,i=-1,a=0,o="\0";for(let s=0;s<=e.length;++s){if(s<e.length)o=e[s];else{if(o==="/")break;o="/"}if(o==="/"){if(!(i===s-1||a===1))if(a===2){if(r.length<2||n!==2||r.at(-1)!=="."||r.at(-2)!=="."){if(r.length>2){let l=r.lastIndexOf("/");l===-1?(r="",n=0):(r=r.slice(0,l),n=r.length-1-r.lastIndexOf("/")),i=s,a=0;continue}else if(r.length!==0){r="",n=0,i=s,a=0;continue}}t&&(r+=r.length>0?"/..":"..",n=2)}else r.length>0?r+="/"+e.slice(i+1,s):r=e.slice(i+1,s),n=s-i-1;i=s,a=0}else o==="."&&a!==-1?++a:a=-1}return r}function Zg(e){if(!e.length)return".";let t=e[0]==="/",r=e.at(-1)==="/";return e=Gg(e,!t),e.length?(r&&(e+="/"),t?`/${e}`:e):t?"/":r?"./":"."}function R(...e){if(e.length===0)return".";let t;for(let r=0;r<e.length;++r){let n=e[r];n.length>0&&(t===void 0?t=n:t+="/"+n)}return t===void 0?".":Zg(t)}var Wg=e=>{if(typeof e=="number")return e;e=e.toLowerCase();let t=parseInt(e);return e.endsWith("k")&&(t*=1024),e.endsWith("m")&&(t*=1024*1024),e.endsWith("g")&&(t*=1024*1024*1024),t},rn=e=>{if(typeof e=="boolean")return e;if(e=e.trim().toLowerCase(),e==="true"||e==="yes"||e==="on")return!0;if(e==="false"||e==="no"||e==="off")return!1;throw Error(`Expected 'true', 'false', 'yes', 'no', 'on', or 'off', but got ${e}`)},Mu={core:{filemode:rn,bare:rn,logallrefupdates:rn,symlinks:rn,ignorecase:rn,bigFileThreshold:Wg}},Xg=/^\[([A-Za-z0-9-.]+)(?: "(.*)")?\]$/,Vg=/^[A-Za-z0-9-.]+$/,Yg=/^([A-Za-z][A-Za-z-]*)(?: *= *(.*))?$/,Kg=/^[A-Za-z][A-Za-z-]*$/,Jg=/^(.*?)( *[#;].*)$/,Qg=e=>{let t=Xg.exec(e);if(t!=null){let[r,n]=t.slice(1);return[r,n]}return null},t_=e=>{let t=Yg.exec(e);if(t!=null){let[r,n="true"]=t.slice(1),i=e_(n),a=r_(i);return[r,a]}return null},e_=e=>{let t=Jg.exec(e);if(t==null)return e;let[r,n]=t.slice(1);return ju(r)&&ju(n)?`${r}${n}`:r},ju=e=>(e.match(/(?:^|[^\\])"/g)||[]).length%2!==0,r_=e=>e.split("").reduce((t,r,n,i)=>{let a=r==='"'&&i[n-1]!=="\\",o=r==="\\"&&i[n+1]==='"';return a||o?t:t+r},""),zu=e=>e!=null?e.toLowerCase():null,xo=(e,t,r)=>[zu(e),t,zu(r)].filter(n=>n!=null).join("."),Lu=e=>{let t=e.split("."),r=t.shift(),n=t.pop(),i=t.length?t.join("."):void 0;return{section:r,subsection:i,name:n,path:xo(r,i,n),sectionPath:xo(r,i,null),isSection:!!r}},n_=(e,t)=>e.reduce((r,n,i)=>t(n)?i:r,-1),Eo=class e{constructor(t){let r=null,n=null;this.parsedConfig=t?t.split(`
`).map(i=>{let a=null,o=null,s=i.trim(),l=Qg(s),f=l!=null;if(f)[r,n]=l;else{let u=t_(s);u!=null&&([a,o]=u)}let c=xo(r,n,a);return{line:i,isSection:f,section:r,subsection:n,name:a,value:o,path:c}}):[]}static from(t){return new e(t)}async get(t,r=!1){let n=Lu(t).path,i=this.parsedConfig.filter(a=>a.path===n).map(({section:a,name:o,value:s})=>{let l=Mu[a]&&Mu[a][o];return l?l(s):s});return r?i:i.pop()}async getall(t){return this.get(t,!0)}async getSubsections(t){return this.parsedConfig.filter(r=>r.isSection&&r.section===t).map(r=>r.subsection)}async deleteSection(t,r){this.parsedConfig=this.parsedConfig.filter(n=>!(n.section===t&&n.subsection===r))}async append(t,r){return this.set(t,r,!0)}async set(t,r,n=!1){let{section:i,subsection:a,name:o,path:s,sectionPath:l,isSection:f}=Lu(t),c=n_(this.parsedConfig,u=>u.path===s);if(r==null)c!==-1&&this.parsedConfig.splice(c,1);else if(c!==-1){let u=this.parsedConfig[c],h=Object.assign({},u,{name:o,value:r,modified:!0});n?this.parsedConfig.splice(c+1,0,h):this.parsedConfig[c]=h}else{let u=this.parsedConfig.findIndex(d=>d.path===l),h={section:i,subsection:a,name:o,value:r,modified:!0,path:s};if(Vg.test(i)&&Kg.test(o))if(u>=0)this.parsedConfig.splice(u+1,0,h);else{let d={isSection:f,section:i,subsection:a,modified:!0,path:l};this.parsedConfig.push(d,h)}}}toString(){return this.parsedConfig.map(({line:t,section:r,subsection:n,name:i,value:a,modified:o=!1})=>o?i!=null&&a!=null?typeof a=="string"&&/[#;]/.test(a)?`	${i} = "${a}"`:`	${i} = ${a}`:n!=null?`[${r} "${n}"]`:`[${r}]`:t).join(`
`)}},V=class{static async get({fs:t,gitdir:r}){let n=await t.read(`${r}/config`,{encoding:"utf8"});return Eo.from(n)}static async save({fs:t,gitdir:r,config:n}){await t.write(`${r}/config`,n.toString(),{encoding:"utf8"})}},pi=e=>[`${e}`,`refs/${e}`,`refs/tags/${e}`,`refs/heads/${e}`,`refs/remotes/${e}`,`refs/remotes/${e}/HEAD`],i_=["config","description","index","shallow","commondir"],fo;async function de(e,t){return fo===void 0&&(fo=new nn),fo.acquire(e,t)}var P=class e{static async updateRemoteRefs({fs:t,gitdir:r,remote:n,refs:i,symrefs:a,tags:o,refspecs:s=void 0,prune:l=!1,pruneTags:f=!1}){for(let v of i.values())if(!v.match(/[0-9a-f]{40}/))throw new we(v);let c=await V.get({fs:t,gitdir:r});if(!s){if(s=await c.getall(`remote.${n}.fetch`),s.length===0)throw new sn(n);s.unshift(`+HEAD:refs/remotes/${n}/HEAD`)}let u=vo.from(s),h=new Map;if(f){let v=await e.listRefs({fs:t,gitdir:r,filepath:"refs/tags"});await e.deleteRefs({fs:t,gitdir:r,refs:v.map(m=>`refs/tags/${m}`)})}if(o){for(let v of i.keys())if(v.startsWith("refs/tags")&&!v.endsWith("^{}")&&!await e.exists({fs:t,gitdir:r,ref:v})){let m=i.get(v);h.set(v,m)}}let d=u.translate([...i.keys()]);for(let[v,m]of d){let g=i.get(v);h.set(m,g)}let p=u.translate([...a.keys()]);for(let[v,m]of p){let g=a.get(v),S=u.translateOne(g);S&&h.set(m,`ref: ${S}`)}let y=[];if(l){for(let v of u.localNamespaces()){let m=(await e.listRefs({fs:t,gitdir:r,filepath:v})).map(g=>`${v}/${g}`);for(let g of m)h.has(g)||y.push(g)}y.length>0&&await e.deleteRefs({fs:t,gitdir:r,refs:y})}for(let[v,m]of h)await de(v,async()=>t.write(R(r,v),`${m.trim()}
`,"utf8"));return{pruned:y}}static async writeRef({fs:t,gitdir:r,ref:n,value:i}){if(!i.match(/[0-9a-f]{40}/))throw new we(i);await de(n,async()=>t.write(R(r,n),`${i.trim()}
`,"utf8"))}static async writeSymbolicRef({fs:t,gitdir:r,ref:n,value:i}){await de(n,async()=>t.write(R(r,n),`ref: ${i.trim()}
`,"utf8"))}static async deleteRef({fs:t,gitdir:r,ref:n}){return e.deleteRefs({fs:t,gitdir:r,refs:[n]})}static async deleteRefs({fs:t,gitdir:r,refs:n}){await Promise.all(n.map(s=>t.rm(R(r,s))));let i=await de("packed-refs",async()=>t.read(`${r}/packed-refs`,{encoding:"utf8"})),a=gi.from(i),o=a.refs.size;for(let s of n)a.refs.has(s)&&a.delete(s);a.refs.size<o&&(i=a.toString(),await de("packed-refs",async()=>t.write(`${r}/packed-refs`,i,{encoding:"utf8"})))}static async resolve({fs:t,gitdir:r,ref:n,depth:i=void 0}){if(i!==void 0&&(i--,i===-1))return n;if(n.startsWith("ref: "))return n=n.slice(5),e.resolve({fs:t,gitdir:r,ref:n,depth:i});if(n.length===40&&/[0-9a-f]{40}/.test(n))return n;let a=await e.packedRefs({fs:t,gitdir:r}),o=pi(n).filter(s=>!i_.includes(s));for(let s of o){let l=await de(s,async()=>await t.read(`${r}/${s}`,{encoding:"utf8"})||a.get(s));if(l)return e.resolve({fs:t,gitdir:r,ref:l.trim(),depth:i})}throw new H(n)}static async exists({fs:t,gitdir:r,ref:n}){try{return await e.expand({fs:t,gitdir:r,ref:n}),!0}catch{return!1}}static async expand({fs:t,gitdir:r,ref:n}){if(n.length===40&&/[0-9a-f]{40}/.test(n))return n;let i=await e.packedRefs({fs:t,gitdir:r}),a=pi(n);for(let o of a)if(await de(o,async()=>t.exists(`${r}/${o}`))||i.has(o))return o;throw new H(n)}static async expandAgainstMap({ref:t,map:r}){let n=pi(t);for(let i of n)if(await r.has(i))return i;throw new H(t)}static resolveAgainstMap({ref:t,fullref:r=t,depth:n=void 0,map:i}){if(n!==void 0&&(n--,n===-1))return{fullref:r,oid:t};if(t.startsWith("ref: "))return t=t.slice(5),e.resolveAgainstMap({ref:t,fullref:r,depth:n,map:i});if(t.length===40&&/[0-9a-f]{40}/.test(t))return{fullref:r,oid:t};let a=pi(t);for(let o of a){let s=i.get(o);if(s)return e.resolveAgainstMap({ref:s.trim(),fullref:o,depth:n,map:i})}throw new H(t)}static async packedRefs({fs:t,gitdir:r}){let n=await de("packed-refs",async()=>t.read(`${r}/packed-refs`,{encoding:"utf8"}));return gi.from(n).refs}static async listRefs({fs:t,gitdir:r,filepath:n}){let i=e.packedRefs({fs:t,gitdir:r}),a=null;try{a=await t.readdirDeep(`${r}/${n}`),a=a.map(o=>o.replace(`${r}/${n}/`,""))}catch{a=[]}for(let o of(await i).keys())o.startsWith(n)&&(o=o.replace(n+"/",""),a.includes(o)||a.push(o));return a.sort(Hg),a}static async listBranches({fs:t,gitdir:r,remote:n}){return n?e.listRefs({fs:t,gitdir:r,filepath:`refs/remotes/${n}`}):e.listRefs({fs:t,gitdir:r,filepath:"refs/heads"})}static async listTags({fs:t,gitdir:r}){return(await e.listRefs({fs:t,gitdir:r,filepath:"refs/tags"})).filter(i=>!i.endsWith("^{}"))}};function a_(e,t){return Ai(qu(e),qu(t))}function qu(e){return e.mode==="040000"?e.path+"/":e.path}function uh(e){switch(e){case"040000":return"tree";case"100644":return"blob";case"100755":return"blob";case"120000":return"blob";case"160000":return"commit"}throw new N(`Unexpected GitTree entry mode: ${e}`)}function o_(e){let t=[],r=0;for(;r<e.length;){let n=e.indexOf(32,r);if(n===-1)throw new N(`GitTree: Error parsing buffer at byte location ${r}: Could not find the next space character.`);let i=e.indexOf(0,r);if(i===-1)throw new N(`GitTree: Error parsing buffer at byte location ${r}: Could not find the next null character.`);let a=e.slice(r,n).toString("utf8");a==="40000"&&(a="040000");let o=uh(a),s=e.slice(n+1,i).toString("utf8");if(s.includes("\\")||s.includes("/"))throw new pr(s);let l=e.slice(i+1,i+21).toString("hex");r=i+21,t.push({mode:a,path:s,oid:l,type:o})}return t}function s_(e){if(typeof e=="number"&&(e=e.toString(8)),e.match(/^0?4.*/))return"040000";if(e.match(/^1006.*/))return"100644";if(e.match(/^1007.*/))return"100755";if(e.match(/^120.*/))return"120000";if(e.match(/^160.*/))return"160000";throw new N(`Could not understand file mode: ${e}`)}function c_(e){return!e.oid&&e.sha&&(e.oid=e.sha),e.mode=s_(e.mode),e.type||(e.type=uh(e.mode)),e}var wt=class e{constructor(t){if(Buffer.isBuffer(t))this._entries=o_(t);else if(Array.isArray(t))this._entries=t.map(c_);else throw new N("invalid type passed to GitTree constructor");this._entries.sort(sh)}static from(t){return new e(t)}render(){return this._entries.map(t=>`${t.mode} ${t.type} ${t.oid}    ${t.path}`).join(`
`)}toObject(){let t=[...this._entries];return t.sort(a_),Buffer.concat(t.map(r=>{let n=Buffer.from(r.mode.replace(/^0/,"")),i=Buffer.from(" "),a=Buffer.from(r.path,"utf8"),o=Buffer.from([0]),s=Buffer.from(r.oid,"hex");return Buffer.concat([n,i,a,o,s])}))}entries(){return this._entries}*[Symbol.iterator](){for(let t of this._entries)yield t}},me=class{static wrap({type:t,object:r}){let n=`${t} ${r.length}\0`,i=n.length,a=i+r.length,o=new Uint8Array(a);for(let s=0;s<i;s++)o[s]=n.charCodeAt(s);return o.set(r,i),o}static unwrap(t){let r=t.indexOf(32),n=t.indexOf(0),i=t.slice(0,r).toString("utf8"),a=t.slice(r+1,n).toString("utf8"),o=t.length-(n+1);if(parseInt(a)!==o)throw new N(`Length mismatch: expected ${a} bytes but got ${o} instead.`);return{type:i,object:Buffer.from(t.slice(n+1))}}};async function hh({fs:e,gitdir:t,oid:r}){let n=`objects/${r.slice(0,2)}/${r.slice(2)}`,i=await e.read(`${t}/${n}`);return i?{object:i,format:"deflated",source:n}:null}function f_(e,t){let r=new Rt(e),n=Hu(r);if(n!==t.byteLength)throw new N(`applyDelta expected source buffer to be ${n} bytes but the provided buffer was ${t.length} bytes`);let i=Hu(r),a,o=Zu(r,t);if(o.byteLength===i)a=o;else{a=Buffer.alloc(i);let s=new Rt(a);for(s.copy(o);!r.eof();)s.copy(Zu(r,t));let l=s.tell();if(i!==l)throw new N(`applyDelta expected target buffer to be ${i} bytes but the resulting buffer was ${l} bytes`)}return a}function Hu(e){let t=0,r=0,n=null;do n=e.readUInt8(),t|=(n&127)<<r,r+=7;while(n&128);return t}function Gu(e,t,r){let n=0,i=0;for(;r--;)t&1&&(n|=e.readUInt8()<<i),t>>=1,i+=8;return n}function Zu(e,t){let r=e.readUInt8(),n=128,i=15,a=112;if(r&n){let o=Gu(e,r&i,4),s=Gu(e,(r&a)>>4,3);return s===0&&(s=65536),t.slice(o,o+s)}else return e.slice(r)}function l_(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function dh(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:l_(e)}var bi=class{constructor(t){if(typeof Buffer>"u")throw new Error("Missing Buffer dependency");this.stream=dh(t),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}eof(){return this._ended&&this.cursor===this.buffer.length}tell(){return this._discardedBytes+this.cursor}async byte(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(1),this.buffer[this.undoCursor]}async chunk(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(this.buffer.length),this.buffer.slice(this.undoCursor,this.cursor)}async read(t){if(!this.eof())return this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t),this.buffer.slice(this.undoCursor,this.cursor)}async skip(t){this.eof()||(this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t))}async undo(){this.cursor=this.undoCursor}async _next(){this.started=!0;let{done:t,value:r}=await this.stream.next();return t&&(this._ended=!0,!r)?Buffer.alloc(0):(r&&(r=Buffer.from(r)),r)}_trim(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}_moveCursor(t){this.undoCursor=this.cursor,this.cursor+=t,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}async _accumulate(t){if(this._ended)return;let r=[this.buffer];for(;this.cursor+t>u_(r);){let n=await this._next();if(this._ended)break;r.push(n)}this.buffer=Buffer.concat(r)}async _loadnext(){this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,this.buffer=await this._next()}async _init(){this.buffer=await this._next()}};function u_(e){return e.reduce((t,r)=>t+r.length,0)}async function h_(e,t){let r=new bi(e),n=await r.read(4);if(n=n.toString("utf8"),n!=="PACK")throw new N(`Invalid PACK header '${n}'`);let i=await r.read(4);if(i=i.readUInt32BE(0),i!==2)throw new N(`Invalid packfile version: ${i}`);let a=await r.read(4);if(a=a.readUInt32BE(0),!(a<1))for(;!r.eof()&&a--;){let o=r.tell(),{type:s,length:l,ofs:f,reference:c}=await d_(r),u=new Oo.Inflate;for(;!u.result;){let h=await r.chunk();if(!h)break;if(u.push(h,!1),u.err)throw new N(`Pako error: ${u.msg}`);if(u.result){if(u.result.length!==l)throw new N("Inflated object size is different from that stated in packfile.");await r.undo(),await r.read(h.length-u.strm.avail_in);let d=r.tell();await t({data:u.result,type:s,num:a,offset:o,end:d,reference:c,ofs:f})}}}}async function d_(e){let t=await e.byte(),r=t>>4&7,n=t&15;if(t&128){let o=4;do t=await e.byte(),n|=(t&127)<<o,o+=7;while(t&128)}let i,a;if(r===6){let o=0;i=0;let s=[];do t=await e.byte(),i|=(t&127)<<o,o+=7,s.push(t);while(t&128);a=Buffer.from(s)}return r===7&&(a=await e.read(20)),{type:r,length:n,ofs:i,reference:a}}var lo=!1;async function ph(e){return lo===null&&(lo=w_()),lo?p_(e):Oo.inflate(e)}async function p_(e){let t=new DecompressionStream("deflate"),r=new Blob([e]).stream().pipeThrough(t);return new Uint8Array(await new Response(r).arrayBuffer())}function w_(){try{if(new DecompressionStream("deflate"))return!0}catch{}return!1}function m_(e){let t=[],r=0,n=0;do{r=e.readUInt8();let i=r&127;t.push(i),n=r&128}while(n);return t.reduce((i,a)=>i+1<<7|a,-1)}function y_(e,t){let r=t,n=4,i=null;do i=e.readUInt8(),r|=(i&127)<<n,n+=7;while(i&128);return r}var cn=class e{constructor(t){Object.assign(this,t),this.offsetCache={}}static async fromIdx({idx:t,getExternalRefDelta:r}){let n=new Rt(t);if(n.slice(4).toString("hex")!=="ff744f63")return;let a=n.readUInt32BE();if(a!==2)throw new N(`Unable to read version ${a} packfile IDX. (Only version 2 supported)`);if(t.byteLength>2048*1024*1024)throw new N("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");n.seek(n.tell()+1020);let o=n.readUInt32BE(),s=[];for(let c=0;c<o;c++){let u=n.slice(20).toString("hex");s[c]=u}n.seek(n.tell()+4*o);let l=new Map;for(let c=0;c<o;c++)l.set(s[c],n.readUInt32BE());let f=n.slice(20).toString("hex");return new e({hashes:s,crcs:{},offsets:l,packfileSha:f,getExternalRefDelta:r})}static async fromPack({pack:t,getExternalRefDelta:r,onProgress:n}){let i={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},a={},o=t.slice(-20).toString("hex"),s=[],l={},f=new Map,c=null,u=null;await h_([t],async({data:v,type:m,reference:g,offset:S,num:k})=>{c===null&&(c=k);let E=Math.floor((c-k)*100/c);E!==u&&n&&await n({phase:"Receiving objects",loaded:c-k,total:c}),u=E,m=i[m],["commit","tree","blob","tag"].includes(m)?a[S]={type:m,offset:S}:m==="ofs-delta"?a[S]={type:m,offset:S}:m==="ref-delta"&&(a[S]={type:m,offset:S})});let h=Object.keys(a).map(Number);for(let[v,m]of h.entries()){let g=v+1===h.length?t.byteLength-20:h[v+1],S=a[m],k=$g.buf(t.slice(m,g))>>>0;S.end=g,S.crc=k}let d=new e({pack:Promise.resolve(t),packfileSha:o,crcs:l,hashes:s,offsets:f,getExternalRefDelta:r});u=null;let p=0,y=[0,0,0,0,0,0,0,0,0,0,0,0];for(let v in a){v=Number(v);let m=Math.floor(p*100/c);m!==u&&n&&await n({phase:"Resolving deltas",loaded:p,total:c}),p++,u=m;let g=a[v];if(!g.oid)try{d.readDepth=0,d.externalReadDepth=0;let{type:S,object:k}=await d.readSlice({start:v});y[d.readDepth]+=1;let E=await ae(me.wrap({type:S,object:k}));g.oid=E,s.push(E),f.set(E,v),l[E]=g.crc}catch{continue}}return s.sort(),d}async toBuffer(){let t=[],r=(f,c)=>{t.push(Buffer.from(f,c))};r("ff744f63","hex"),r("00000002","hex");let n=new Rt(Buffer.alloc(256*4));for(let f=0;f<256;f++){let c=0;for(let u of this.hashes)parseInt(u.slice(0,2),16)<=f&&c++;n.writeUInt32BE(c)}t.push(n.buffer);for(let f of this.hashes)r(f,"hex");let i=new Rt(Buffer.alloc(this.hashes.length*4));for(let f of this.hashes)i.writeUInt32BE(this.crcs[f]);t.push(i.buffer);let a=new Rt(Buffer.alloc(this.hashes.length*4));for(let f of this.hashes)a.writeUInt32BE(this.offsets.get(f));t.push(a.buffer),r(this.packfileSha,"hex");let o=Buffer.concat(t),s=await ae(o),l=Buffer.alloc(20);return l.write(s,"hex"),Buffer.concat([o,l])}async load({pack:t}){this.pack=t}async unload(){this.pack=null}async read({oid:t}){if(!this.offsets.get(t)){if(this.getExternalRefDelta)return this.externalReadDepth++,this.getExternalRefDelta(t);throw new N(`Could not read object ${t} from packfile`)}let r=this.offsets.get(t);return this.readSlice({start:r})}async readSlice({start:t}){if(this.offsetCache[t])return Object.assign({},this.offsetCache[t]);this.readDepth++;let r={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"};if(!this.pack)throw new N("Tried to read from a GitPackIndex with no packfile loaded into memory");let n=(await this.pack).slice(t),i=new Rt(n),a=i.readUInt8(),o=a&112,s=r[o];if(s===void 0)throw new N("Unrecognized type: 0b"+o.toString(2));let l=a&15,f=l;a&128&&(f=y_(i,l));let u=null,h=null;if(s==="ofs_delta"){let p=m_(i),y=t-p;({object:u,type:s}=await this.readSlice({start:y}))}if(s==="ref_delta"){let p=i.slice(20).toString("hex");({object:u,type:s}=await this.read({oid:p}))}let d=n.slice(i.tell());if(h=Buffer.from(await ph(d)),h.byteLength!==f)throw new N(`Packfile told us object would have length ${f} but it had length ${h.byteLength}`);return u&&(h=Buffer.from(f_(h,u))),this.readDepth>3&&(this.offsetCache[t]={type:s,object:h}),{type:s,format:"content",object:h}}},wi=Symbol("PackfileCache");async function g_({fs:e,filename:t,getExternalRefDelta:r,emitter:n,emitterPrefix:i}){let a=await e.read(t);return cn.fromIdx({idx:a,getExternalRefDelta:r})}function $o({fs:e,cache:t,filename:r,getExternalRefDelta:n,emitter:i,emitterPrefix:a}){t[wi]||(t[wi]=new Map);let o=t[wi].get(r);return o||(o=g_({fs:e,filename:r,getExternalRefDelta:n,emitter:i,emitterPrefix:a}),t[wi].set(r,o)),o}async function __({fs:e,cache:t,gitdir:r,oid:n,format:i="content",getExternalRefDelta:a}){let o=await e.readdir(R(r,"objects/pack"));o=o.filter(s=>s.endsWith(".idx"));for(let s of o){let l=`${r}/objects/pack/${s}`,f=await $o({fs:e,cache:t,filename:l,getExternalRefDelta:a});if(f.error)throw new N(f.error);if(f.offsets.has(n)){if(!f.pack){let u=l.replace(/idx$/,"pack");f.pack=e.read(u)}let c=await f.read({oid:n,getExternalRefDelta:a});return c.format="content",c.source=`objects/pack/${s.replace(/idx$/,"pack")}`,c}}return null}async function G({fs:e,cache:t,gitdir:r,oid:n,format:i="content"}){let a=c=>G({fs:e,cache:t,gitdir:r,oid:c}),o;if(n==="4b825dc642cb6eb9a060e54bf8d69288fbee4904"&&(o={format:"wrapped",object:Buffer.from("tree 0\0")}),o||(o=await hh({fs:e,gitdir:r,oid:n})),!o){if(o=await __({fs:e,cache:t,gitdir:r,oid:n,getExternalRefDelta:a}),!o)throw new H(n);return o}if(i==="deflated"||(o.format==="deflated"&&(o.object=Buffer.from(await ph(o.object)),o.format="wrapped"),i==="wrapped"))return o;let s=await ae(o.object);if(s!==n)throw new N(`SHA check failed! Expected ${n}, computed ${s}`);let{object:l,type:f}=me.unwrap(o.object);if(o.type=f,o.object=l,o.format="content",i==="content")return o;throw new N(`invalid requested format "${i}"`)}var Ct=class e extends z{constructor(t,r,n=!0){super(`Failed to create ${t} at ${r} because it already exists.${n?` (Hint: use 'force: true' parameter to overwrite existing ${t}.)`:""}`),this.code=this.name=e.code,this.data={noun:t,where:r,canForce:n}}};Ct.code="AlreadyExistsError";var fn=class e extends z{constructor(t,r,n){super(`Found multiple ${t} matching "${r}" (${n.join(", ")}). Use a longer abbreviation length to disambiguate them.`),this.code=this.name=e.code,this.data={nouns:t,short:r,matches:n}}};fn.code="AmbiguousError";var ln=class e extends z{constructor(t){super(`Your local changes to the following files would be overwritten by checkout: ${t.join(", ")}`),this.code=this.name=e.code,this.data={filepaths:t}}};ln.code="CheckoutConflictError";var un=class e extends z{constructor(t,r){super(`Failed to checkout "${t}" because commit ${r} is not available locally. Do a git fetch to make the branch available locally.`),this.code=this.name=e.code,this.data={ref:t,oid:r}}};un.code="CommitNotFetchedError";var hn=class e extends z{constructor(){super("Empty response from git server."),this.code=this.name=e.code,this.data={}}};hn.code="EmptyServerResponseError";var dn=class e extends z{constructor(){super("A simple fast-forward merge was not possible."),this.code=this.name=e.code,this.data={}}};dn.code="FastForwardError";var pn=class e extends z{constructor(t,r){super(`One or more branches were not updated: ${t}`),this.code=this.name=e.code,this.data={prettyDetails:t,result:r}}};pn.code="GitPushError";var yr=class e extends z{constructor(t,r,n){super(`HTTP Error: ${t} ${r}`),this.code=this.name=e.code,this.data={statusCode:t,statusMessage:r,response:n}}};yr.code="HttpError";var ye=class e extends z{constructor(t){let r="invalid filepath";t==="leading-slash"||t==="trailing-slash"?r='"filepath" parameter should not include leading or trailing directory separators because these can cause problems on some platforms.':t==="directory"&&(r='"filepath" should not be a directory.'),super(r),this.code=this.name=e.code,this.data={reason:t}}};ye.code="InvalidFilepathError";var Dt=class e extends z{constructor(t,r){super(`"${t}" would be an invalid git reference. (Hint: a valid alternative would be "${r}".)`),this.code=this.name=e.code,this.data={ref:t,suggestion:r}}};Dt.code="InvalidRefNameError";var wn=class e extends z{constructor(t){super(`Maximum search depth of ${t} exceeded.`),this.code=this.name=e.code,this.data={depth:t}}};wn.code="MaxDepthError";var gr=class e extends z{constructor(){super("Merges with conflicts are not supported yet."),this.code=this.name=e.code,this.data={}}};gr.code="MergeNotSupportedError";var _r=class e extends z{constructor(t,r,n,i){super(`Automatic merge failed with one or more merge conflicts in the following files: ${t.toString()}. Fix conflicts then commit the result.`),this.code=this.name=e.code,this.data={filepaths:t,bothModified:r,deleteByUs:n,deleteByTheirs:i}}};_r.code="MergeConflictError";var ot=class e extends z{constructor(t){super(`No name was provided for ${t} in the argument or in the .git/config file.`),this.code=this.name=e.code,this.data={role:t}}};ot.code="MissingNameError";var pt=class e extends z{constructor(t){super(`The function requires a "${t}" parameter but none was provided.`),this.code=this.name=e.code,this.data={parameter:t}}};pt.code="MissingParameterError";var mn=class e extends z{constructor(t){super('There are multiple errors that were thrown by the method. Please refer to the "errors" property to see more'),this.code=this.name=e.code,this.data={errors:t},this.errors=t}};mn.code="MultipleGitError";var Me=class e extends z{constructor(t,r){super(`Expected "${t}" but received "${r}".`),this.code=this.name=e.code,this.data={expected:t,actual:r}}};Me.code="ParseError";var br=class e extends z{constructor(t){let r="";t==="not-fast-forward"?r=" because it was not a simple fast-forward":t==="tag-exists"&&(r=" because tag already exists"),super(`Push rejected${r}. Use "force: true" to override.`),this.code=this.name=e.code,this.data={reason:t}}};br.code="PushRejectedError";var pe=class e extends z{constructor(t,r){super(`Remote does not support the "${t}" so the "${r}" parameter cannot be used.`),this.code=this.name=e.code,this.data={capability:t,parameter:r}}};pe.code="RemoteCapabilityError";var yn=class e extends z{constructor(t,r){super(`Remote did not reply using the "smart" HTTP protocol. Expected "001e# service=git-upload-pack" but received: ${t}`),this.code=this.name=e.code,this.data={preview:t,response:r}}};yn.code="SmartHttpError";var gn=class e extends z{constructor(t,r,n){super(`Git remote "${t}" uses an unrecognized transport protocol: "${r}"`),this.code=this.name=e.code,this.data={url:t,transport:r,suggestion:n}}};gn.code="UnknownTransportError";var _n=class e extends z{constructor(t){super(`Cannot parse remote URL: "${t}"`),this.code=this.name=e.code,this.data={url:t}}};_n.code="UrlParseError";var vr=class e extends z{constructor(){super("The operation was canceled."),this.code=this.name=e.code,this.data={}}};vr.code="UserCanceledError";var bn=class e extends z{constructor(t){super(`Could not merge index: Entry for '${t}' is not up to date. Either reset the index entry to HEAD, or stage your unstaged changes.`),this.code=this.name=e.code,this.data={filepath:t}}};bn.code="IndexResetError";var vn=class e extends z{constructor(t){super(`"${t}" does not point to any commit. You're maybe working on a repository with no commits yet. `),this.code=this.name=e.code,this.data={ref:t}}};vn.code="NoCommitError";var wh=Object.freeze({__proto__:null,AlreadyExistsError:Ct,AmbiguousError:fn,CheckoutConflictError:ln,CommitNotFetchedError:un,EmptyServerResponseError:hn,FastForwardError:dn,GitPushError:pn,HttpError:yr,InternalError:N,InvalidFilepathError:ye,InvalidOidError:we,InvalidRefNameError:Dt,MaxDepthError:wn,MergeNotSupportedError:gr,MergeConflictError:_r,MissingNameError:ot,MissingParameterError:pt,MultipleGitError:mn,NoRefspecError:sn,NotFoundError:H,ObjectTypeError:lt,ParseError:Me,PushRejectedError:br,RemoteCapabilityError:pe,SmartHttpError:yn,UnknownTransportError:gn,UnsafeFilepathError:pr,UrlParseError:_n,UserCanceledError:vr,UnmergedPathsError:on,IndexResetError:bn,NoCommitError:vn});function ko({name:e,email:t,timestamp:r,timezoneOffset:n}){return n=b_(n),`${e} <${t}> ${r} ${n}`}function b_(e){let t=v_(x_(e));e=Math.abs(e);let r=Math.floor(e/60);e-=r*60;let n=String(r),i=String(e);return n.length<2&&(n="0"+n),i.length<2&&(i="0"+i),(t===-1?"-":"+")+n+i}function v_(e){return Math.sign(e)||(Object.is(e,-0)?-1:1)}function x_(e){return e===0?e:-e}function ie(e){return e=e.replace(/\r/g,""),e=e.replace(/^\n+/,""),e=e.replace(/\n+$/,"")+`
`,e}function vi(e){let[,t,r,n,i]=e.match(/^(.*) <(.*)> (.*) (.*)$/);return{name:t,email:r,timestamp:Number(n),timezoneOffset:E_(i)}}function E_(e){let[,t,r,n]=e.match(/(\+|-)(\d\d)(\d\d)/);return n=(t==="+"?1:-1)*(Number(r)*60+Number(n)),k_(n)}function k_(e){return e===0?e:-e}var Et=class e{constructor(t){if(typeof t=="string")this._tag=t;else if(Buffer.isBuffer(t))this._tag=t.toString("utf8");else if(typeof t=="object")this._tag=e.render(t);else throw new N("invalid type passed to GitAnnotatedTag constructor")}static from(t){return new e(t)}static render(t){return`object ${t.object}
type ${t.type}
tag ${t.tag}
tagger ${ko(t.tagger)}

${t.message}
${t.gpgsig?t.gpgsig:""}`}justHeaders(){return this._tag.slice(0,this._tag.indexOf(`

`))}message(){let t=this.withoutSignature();return t.slice(t.indexOf(`

`)+2)}parse(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}render(){return this._tag}headers(){let t=this.justHeaders().split(`
`),r=[];for(let i of t)i[0]===" "?r[r.length-1]+=`
`+i.slice(1):r.push(i);let n={};for(let i of r){let a=i.slice(0,i.indexOf(" ")),o=i.slice(i.indexOf(" ")+1);Array.isArray(n[a])?n[a].push(o):n[a]=o}return n.tagger&&(n.tagger=vi(n.tagger)),n.committer&&(n.committer=vi(n.committer)),n}withoutSignature(){let t=ie(this._tag);return t.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1?t:t.slice(0,t.lastIndexOf(`
-----BEGIN PGP SIGNATURE-----`))}gpgsig(){if(this._tag.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1)return;let t=this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+27);return ie(t)}payload(){return this.withoutSignature()+`
`}toObject(){return Buffer.from(this._tag,"utf8")}static async sign(t,r,n){let i=t.payload(),{signature:a}=await r({payload:i,secretKey:n});a=ie(a);let o=i+a;return e.from(o)}};function uo(e){return e.trim().split(`
`).map(t=>" "+t).join(`
`)+`
`}function S_(e){return e.split(`
`).map(t=>t.replace(/^ /,"")).join(`
`)}var mt=class e{constructor(t){if(typeof t=="string")this._commit=t;else if(Buffer.isBuffer(t))this._commit=t.toString("utf8");else if(typeof t=="object")this._commit=e.render(t);else throw new N("invalid type passed to GitCommit constructor")}static fromPayloadSignature({payload:t,signature:r}){let n=e.justHeaders(t),i=e.justMessage(t),a=ie(n+`
gpgsig`+uo(r)+`
`+i);return new e(a)}static from(t){return new e(t)}toObject(){return Buffer.from(this._commit,"utf8")}headers(){return this.parseHeaders()}message(){return e.justMessage(this._commit)}parse(){return Object.assign({message:this.message()},this.headers())}static justMessage(t){return ie(t.slice(t.indexOf(`

`)+2))}static justHeaders(t){return t.slice(0,t.indexOf(`

`))}parseHeaders(){let t=e.justHeaders(this._commit).split(`
`),r=[];for(let i of t)i[0]===" "?r[r.length-1]+=`
`+i.slice(1):r.push(i);let n={parent:[]};for(let i of r){let a=i.slice(0,i.indexOf(" ")),o=i.slice(i.indexOf(" ")+1);Array.isArray(n[a])?n[a].push(o):n[a]=o}return n.author&&(n.author=vi(n.author)),n.committer&&(n.committer=vi(n.committer)),n}static renderHeaders(t){let r="";if(t.tree?r+=`tree ${t.tree}
`:r+=`tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904
`,t.parent){if(t.parent.length===void 0)throw new N("commit 'parent' property should be an array");for(let a of t.parent)r+=`parent ${a}
`}let n=t.author;r+=`author ${ko(n)}
`;let i=t.committer||t.author;return r+=`committer ${ko(i)}
`,t.gpgsig&&(r+="gpgsig"+uo(t.gpgsig)),r}static render(t){return e.renderHeaders(t)+`
`+ie(t.message)}render(){return this._commit}withoutSignature(){let t=ie(this._commit);if(t.indexOf(`
gpgsig`)===-1)return t;let r=t.slice(0,t.indexOf(`
gpgsig`)),n=t.slice(t.indexOf(`-----END PGP SIGNATURE-----
`)+28);return ie(r+`
`+n)}isolateSignature(){let t=this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+27);return S_(t)}static async sign(t,r,n){let i=t.withoutSignature(),a=e.justMessage(t._commit),{signature:o}=await r({payload:i,secretKey:n});o=ie(o);let l=e.justHeaders(t._commit)+`
gpgsig`+uo(o)+`
`+a;return e.from(l)}};async function xr({fs:e,cache:t,gitdir:r,oid:n}){if(n==="4b825dc642cb6eb9a060e54bf8d69288fbee4904")return{tree:wt.from([]),oid:n};let{type:i,object:a}=await G({fs:e,cache:t,gitdir:r,oid:n});if(i==="tag")return n=Et.from(a).parse().object,xr({fs:e,cache:t,gitdir:r,oid:n});if(i==="commit")return n=mt.from(a).parse().tree,xr({fs:e,cache:t,gitdir:r,oid:n});if(i!=="tree")throw new lt(n,i,"tree");return{tree:wt.from(a),oid:n}}var So=class{constructor({fs:t,gitdir:r,ref:n,cache:i}){this.fs=t,this.cache=i,this.gitdir=r,this.mapPromise=(async()=>{let o=new Map,s;try{s=await P.resolve({fs:t,gitdir:r,ref:n})}catch(f){f instanceof H&&(s="4b825dc642cb6eb9a060e54bf8d69288fbee4904")}let l=await xr({fs:t,cache:this.cache,gitdir:r,oid:s});return l.type="tree",l.mode="40000",o.set(".",l),o})();let a=this;this.ConstructEntry=class{constructor(s){this._fullpath=s,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return a.type(this)}async mode(){return a.mode(this)}async stat(){return a.stat(this)}async content(){return a.content(this)}async oid(){return a.oid(this)}}}async readdir(t){let r=t._fullpath,{fs:n,cache:i,gitdir:a}=this,o=await this.mapPromise,s=o.get(r);if(!s)throw new Error(`No obj for ${r}`);let l=s.oid;if(!l)throw new Error(`No oid for obj ${JSON.stringify(s)}`);if(s.type!=="tree")return null;let{type:f,object:c}=await G({fs:n,cache:i,gitdir:a,oid:l});if(f!==s.type)throw new lt(l,f,s.type);let u=wt.from(c);for(let h of u)o.set(R(r,h.path),h);return u.entries().map(h=>R(r,h.path))}async type(t){if(t._type===!1){let r=await this.mapPromise,{type:n}=r.get(t._fullpath);t._type=n}return t._type}async mode(t){if(t._mode===!1){let r=await this.mapPromise,{mode:n}=r.get(t._fullpath);t._mode=ch(parseInt(n,8))}return t._mode}async stat(t){}async content(t){if(t._content===!1){let r=await this.mapPromise,{fs:n,cache:i,gitdir:a}=this,s=r.get(t._fullpath).oid,{type:l,object:f}=await G({fs:n,cache:i,gitdir:a,oid:s});l!=="blob"?t._content=void 0:t._content=new Uint8Array(f)}return t._content}async oid(t){if(t._oid===!1){let n=(await this.mapPromise).get(t._fullpath);t._oid=n.oid}return t._oid}};function xt({ref:e="HEAD"}={}){let t=Object.create(null);return Object.defineProperty(t,Bi,{value:function({fs:r,gitdir:n,cache:i}){return new So({fs:r,gitdir:n,ref:e,cache:i})}}),Object.freeze(t),t}var Ao=class{constructor({fs:t,dir:r,gitdir:n,cache:i}){this.fs=t,this.cache=i,this.dir=r,this.gitdir=n,this.config=null;let a=this;this.ConstructEntry=class{constructor(s){this._fullpath=s,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return a.type(this)}async mode(){return a.mode(this)}async stat(){return a.stat(this)}async content(){return a.content(this)}async oid(){return a.oid(this)}}}async readdir(t){let r=t._fullpath,{fs:n,dir:i}=this,a=await n.readdir(R(i,r));return a===null?null:a.map(o=>R(r,o))}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){let{fs:r,dir:n}=this,i=await r.lstat(`${n}/${t._fullpath}`);if(!i)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);let a=i.isDirectory()?"tree":"blob";a==="blob"&&!i.isFile()&&!i.isSymbolicLink()&&(a="special"),t._type=a,i=wr(i),t._mode=i.mode,i.size===-1&&t._actualSize&&(i.size=t._actualSize),t._stat=i}return t._stat}async content(t){if(t._content===!1){let{fs:r,dir:n,gitdir:i}=this;if(await t.type()==="tree")t._content=void 0;else{let o=await(await this._getGitConfig(r,i)).get("core.autocrlf"),s=await r.read(`${n}/${t._fullpath}`,{autocrlf:o});t._actualSize=s.length,t._stat&&t._stat.size===-1&&(t._stat.size=t._actualSize),t._content=new Uint8Array(s)}}return t._content}async oid(t){if(t._oid===!1){let r=this,{fs:n,gitdir:i,cache:a}=this,o;await K.acquire({fs:n,gitdir:i,cache:a},async function(s){let l=s.entriesMap.get(t._fullpath),f=await t.stat(),u=await(await r._getGitConfig(n,i)).get("core.filemode"),h=typeof process<"u"?process.platform!=="win32":!0;if(!l||mi(f,l,u,h)){let d=await t.content();d===void 0?o=void 0:(o=await ae(me.wrap({type:"blob",object:d})),l&&o===l.oid&&(!u||f.mode===l.mode)&&mi(f,l,u,h)&&s.insert({filepath:t._fullpath,stats:f,oid:o}))}else o=l.oid}),t._oid=o}return t._oid}async _getGitConfig(t,r){return this.config?this.config:(this.config=await V.get({fs:t,gitdir:r}),this.config)}};function Ir(){let e=Object.create(null);return Object.defineProperty(e,Bi,{value:function({fs:t,dir:r,gitdir:n,cache:i}){return new Ao({fs:t,dir:r,gitdir:n,cache:i})}}),Object.freeze(e),e}function A_(e,t){let r=t-e;return Array.from({length:r},(n,i)=>e+i)}var mh=typeof Array.prototype.flat>"u"?e=>e.reduce((t,r)=>t.concat(r),[]):e=>e.flat(),Bo=class{constructor(){this.value=null}consider(t){t!=null&&(this.value===null?this.value=t:t<this.value&&(this.value=t))}reset(){this.value=null}};function*B_(e){let t=new Bo,r,n=[],i=e.length;for(let a=0;a<i;a++)n[a]=e[a].next().value,n[a]!==void 0&&t.consider(n[a]);if(t.value!==null)for(;;){let a=[];r=t.value,t.reset();for(let o=0;o<i;o++)n[o]!==void 0&&n[o]===r?(a[o]=n[o],n[o]=e[o].next().value):a[o]=null,n[o]!==void 0&&t.consider(n[o]);if(yield a,t.value===null)return}}async function ge({fs:e,cache:t,dir:r,gitdir:n,trees:i,map:a=async(l,f)=>f,reduce:o=async(l,f)=>{let c=mh(f);return l!==void 0&&c.unshift(l),c},iterate:s=(l,f)=>Promise.all([...f].map(l))}){let l=i.map(d=>d[Bi]({fs:e,dir:r,gitdir:n,cache:t})),f=new Array(l.length).fill("."),c=A_(0,l.length),u=async d=>{c.forEach(v=>{let m=d[v];d[v]=m&&new l[v].ConstructEntry(m)});let y=(await Promise.all(c.map(v=>{let m=d[v];return m?l[v].readdir(m):[]}))).map(v=>(v===null?[]:v)[Symbol.iterator]());return{entries:d,children:B_(y)}},h=async d=>{let{entries:p,children:y}=await u(d),v=p.find(g=>g&&g._fullpath)._fullpath,m=await a(v,p);if(m!==null){let g=await s(h,y);return g=g.filter(S=>S!==void 0),o(m,g)}};return h(f)}async function Io(e,t){let r=await e.readdir(t);r==null?await e.rm(t):r.length?await Promise.all(r.map(n=>{let i=R(t,n);return e.lstat(i).then(a=>{if(a)return a.isDirectory()?Io(e,i):e.rm(i)})})).then(()=>e.rmdir(t)):await e.rmdir(t)}function I_(e){return T_(e)&&Wu(e.then)&&Wu(e.catch)}function T_(e){return e&&typeof e=="object"}function Wu(e){return typeof e=="function"}function Xu(e){return I_((r=>{try{return r.readFile().catch(n=>n)}catch(n){return n}})(e))}var Vu=["readFile","writeFile","mkdir","rmdir","unlink","stat","lstat","readdir","readlink","symlink"];function Yu(e,t){if(Xu(t))for(let r of Vu)e[`_${r}`]=t[r].bind(t);else for(let r of Vu)e[`_${r}`]=ao(t[r].bind(t));Xu(t)?t.rm?e._rm=t.rm.bind(t):t.rmdir.length>1?e._rm=t.rmdir.bind(t):e._rm=Io.bind(null,e):t.rm?e._rm=ao(t.rm.bind(t)):t.rmdir.length>2?e._rm=ao(t.rmdir.bind(t)):e._rm=Io.bind(null,e)}var C=class{constructor(t){if(typeof t._original_unwrapped_fs<"u")return t;let r=Object.getOwnPropertyDescriptor(t,"promises");r&&r.enumerable?Yu(this,t.promises):Yu(this,t),this._original_unwrapped_fs=t}async exists(t,r={}){try{return await this._stat(t),!0}catch(n){if(n.code==="ENOENT"||n.code==="ENOTDIR"||(n.code||"").includes("ENS"))return!1;throw console.log('Unhandled error in "FileSystem.exists()" function',n),n}}async read(t,r={}){try{let n=await this._readFile(t,r);if(r.autocrlf==="true")try{n=new TextDecoder("utf8",{fatal:!0}).decode(n),n=n.replace(/\r\n/g,`
`),n=new TextEncoder().encode(n)}catch{}return typeof n!="string"&&(n=Buffer.from(n)),n}catch{return null}}async write(t,r,n={}){try{await this._writeFile(t,r,n)}catch{await this.mkdir(mr(t)),await this._writeFile(t,r,n)}}async mkdir(t,r=!1){try{await this._mkdir(t)}catch(n){if(n===null||n.code==="EEXIST")return;if(r)throw n;if(n.code==="ENOENT"){let i=mr(t);if(i==="."||i==="/"||i===t)throw n;await this.mkdir(i),await this.mkdir(t,!0)}}}async rm(t){try{await this._unlink(t)}catch(r){if(r.code!=="ENOENT")throw r}}async rmdir(t,r){try{r&&r.recursive?await this._rm(t,r):await this._rmdir(t)}catch(n){if(n.code!=="ENOENT")throw n}}async readdir(t){try{let r=await this._readdir(t);return r.sort(Ai),r}catch(r){return r.code==="ENOTDIR"?null:[]}}async readdirDeep(t){let r=await this._readdir(t);return(await Promise.all(r.map(async i=>{let a=t+"/"+i;return(await this._stat(a)).isDirectory()?this.readdirDeep(a):a}))).reduce((i,a)=>i.concat(a),[])}async lstat(t){try{return await this._lstat(t)}catch(r){if(r.code==="ENOENT"||(r.code||"").includes("ENS"))return null;throw r}}async readlink(t,r={encoding:"buffer"}){try{let n=await this._readlink(t,r);return Buffer.isBuffer(n)?n:Buffer.from(n)}catch(n){if(n.code==="ENOENT"||(n.code||"").includes("ENS"))return null;throw n}}async writelink(t,r){return this._symlink(r.toString("utf8"),t)}};function b(e,t){if(t===void 0)throw new pt(e)}async function xi(e,t){return!e&&!t?!1:e&&!t||!e&&t?!0:!(await e.type()==="tree"&&await t.type()==="tree"||await e.type()===await t.type()&&await e.mode()===await t.mode()&&await e.oid()===await t.oid())}async function yh({fs:e,dir:t,gitdir:r=R(t,".git"),commit:n="HEAD",cache:i={}}){try{b("fs",e),b("dir",t),b("gitdir",r);let a=new C(e),o=[xt({ref:n}),Ir(),Le()],s=[];await K.acquire({fs:a,gitdir:r,cache:i},async function(f){s=f.unmergedPaths});let l=await ge({fs:a,cache:i,dir:t,gitdir:r,trees:o,map:async function(f,[c,u,h]){let d=!await xi(u,h),p=s.includes(f),y=!await xi(h,c);if(d||p)return c?{path:f,mode:await c.mode(),oid:await c.oid(),type:await c.type(),content:await c.content()}:void 0;if(y)return!1;throw new bn(f)}});await K.acquire({fs:a,gitdir:r,cache:i},async function(f){for(let c of l)if(c!==!1){if(!c){await a.rmdir(`${t}/${c.path}`,{recursive:!0}),f.delete({filepath:c.path});continue}if(c.type==="blob"){let u=new TextDecoder().decode(c.content);await a.write(`${t}/${c.path}`,u,{mode:c.mode}),f.insert({filepath:c.path,oid:c.oid,stage:0})}}})}catch(a){throw a.caller="git.abortMerge",a}}var _e=class{static async isIgnored({fs:t,dir:r,gitdir:n=R(r,".git"),filepath:i}){if(yi(i)===".git")return!0;if(i===".")return!1;let a="",o=R(n,"info","exclude");await t.exists(o)&&(a=await t.read(o,"utf8"));let s=[{gitignore:R(r,".gitignore"),filepath:i}],l=i.split("/").filter(Boolean);for(let c=1;c<l.length;c++){let u=l.slice(0,c).join("/"),h=l.slice(c).join("/");s.push({gitignore:R(r,u,".gitignore"),filepath:h})}let f=!1;for(let c of s){let u;try{u=await t.read(c.gitignore,"utf8")}catch(p){if(p.code==="NOENT")continue}let h=Pg().add(a);h.add(u);let d=mr(c.filepath);if(d!=="."&&h.ignores(d))return!0;f?f=!h.test(c.filepath).unignored:f=h.test(c.filepath).ignored}return f}};async function R_({fs:e,gitdir:t,object:r,format:n,oid:i}){if(n!=="deflated")throw new N("GitObjectStoreLoose expects objects to write to be in deflated format");let a=`objects/${i.slice(0,2)}/${i.slice(2)}`,o=`${t}/${a}`;await e.exists(o)||await e.write(o,r)}var ho=null;async function gh(e){return ho===null&&(ho=$_()),ho?O_(e):Oo.deflate(e)}async function O_(e){let t=new CompressionStream("deflate"),r=new Blob([e]).stream().pipeThrough(t);return new Uint8Array(await new Response(r).arrayBuffer())}function $_(){try{return new CompressionStream("deflate").writable.close(),new Blob([]).stream().cancel(),!0}catch{return!1}}async function yt({fs:e,gitdir:t,type:r,object:n,format:i="content",oid:a=void 0,dryRun:o=!1}){return i!=="deflated"&&(i!=="wrapped"&&(n=me.wrap({type:r,object:n})),a=await ae(n),n=Buffer.from(await gh(n))),o||await R_({fs:e,gitdir:t,object:n,format:"deflated",oid:a}),a}function _h(e){let t;for(;~(t=e.indexOf(92));)e[t]=47;return e}async function bh({fs:e,dir:t,gitdir:r=R(t,".git"),filepath:n,cache:i={},force:a=!1,parallel:o=!0}){try{b("fs",e),b("dir",t),b("gitdir",r),b("filepath",n);let s=new C(e);await K.acquire({fs:s,gitdir:r,cache:i},async l=>{let c=await(await V.get({fs:s,gitdir:r})).get("core.autocrlf");return To({dir:t,gitdir:r,fs:s,filepath:n,index:l,force:a,parallel:o,autocrlf:c})})}catch(s){throw s.caller="git.add",s}}async function To({dir:e,gitdir:t,fs:r,filepath:n,index:i,force:a,parallel:o,autocrlf:s}){n=Array.isArray(n)?n:[n];let l=n.map(async h=>{if(!a&&await _e.isIgnored({fs:r,dir:e,gitdir:t,filepath:h}))return;let d=await r.lstat(R(e,h));if(!d)throw new H(h);if(d.isDirectory()){let p=await r.readdir(R(e,h));if(o){let y=p.map(v=>To({dir:e,gitdir:t,fs:r,filepath:[R(h,v)],index:i,force:a,parallel:o,autocrlf:s}));await Promise.all(y)}else for(let y of p)await To({dir:e,gitdir:t,fs:r,filepath:[R(h,y)],index:i,force:a,parallel:o,autocrlf:s})}else{let p=d.isSymbolicLink()?await r.readlink(R(e,h)).then(_h):await r.read(R(e,h),{autocrlf:s});if(p===null)throw new H(h);let y=await yt({fs:r,gitdir:t,type:"blob",object:p});i.insert({filepath:h,stats:d,oid:y})}}),f=await Promise.allSettled(l),c=f.filter(h=>h.status==="rejected").map(h=>h.reason);if(c.length>1)throw new mn(c);if(c.length===1)throw c[0];return f.filter(h=>h.status==="fulfilled"&&h.value).map(h=>h.value)}async function xn({fs:e,gitdir:t,path:r}){return(await V.get({fs:e,gitdir:t})).get(r)}function vh(e,...t){for(let r of t)if(r)for(let n of Object.keys(r)){let i=r[n];i!==void 0&&(e[n]=i)}return e}async function be({fs:e,gitdir:t,author:r,commit:n}){let i=Math.floor(Date.now()/1e3),a={name:await xn({fs:e,gitdir:t,path:"user.name"}),email:await xn({fs:e,gitdir:t,path:"user.email"})||"",timestamp:i,timezoneOffset:new Date(i*1e3).getTimezoneOffset()},o=vh({},a,n?n.author:void 0,r);if(o.name!==void 0)return o}async function Er({fs:e,gitdir:t,author:r,committer:n,commit:i}){let a=Math.floor(Date.now()/1e3),o={name:await xn({fs:e,gitdir:t,path:"user.name"}),email:await xn({fs:e,gitdir:t,path:"user.email"})||"",timestamp:a,timezoneOffset:new Date(a*1e3).getTimezoneOffset()},s=vh({},o,i?i.committer:void 0,r,n);if(s.name!==void 0)return s}async function xh({fs:e,cache:t,gitdir:r,oid:n}){let{type:i,object:a}=await G({fs:e,cache:t,gitdir:r,oid:n});if(i==="tag")return n=Et.from(a).parse().object,xh({fs:e,cache:t,gitdir:r,oid:n});if(i!=="commit")throw new lt(n,i,"commit");return{commit:mt.from(a),oid:n}}async function kr({fs:e,cache:t,gitdir:r,oid:n}){let{commit:i,oid:a}=await xh({fs:e,cache:t,gitdir:r,oid:n});return{oid:a,commit:i.parse(),payload:i.withoutSignature()}}async function Ii({fs:e,cache:t,onSign:r,gitdir:n,message:i,author:a,committer:o,signingKey:s,amend:l=!1,dryRun:f=!1,noUpdateBranch:c=!1,ref:u,parent:h,tree:d}){let p=!1;u||(u=await P.resolve({fs:e,gitdir:n,ref:"HEAD",depth:2}));let y,v;try{y=await P.resolve({fs:e,gitdir:n,ref:u}),v=await kr({fs:e,gitdir:n,oid:y,cache:{}})}catch{p=!0}if(l&&p)throw new vn(u);let m=l?await be({fs:e,gitdir:n,author:a,commit:v.commit}):await be({fs:e,gitdir:n,author:a});if(!m)throw new ot("author");let g=l?await Er({fs:e,gitdir:n,author:m,committer:o,commit:v.commit}):await Er({fs:e,gitdir:n,author:m,committer:o});if(!g)throw new ot("committer");return K.acquire({fs:e,gitdir:n,cache:t,allowUnmerged:!1},async function(S){let E=lh(S.entries).get(".");if(d||(d=await Eh({fs:e,gitdir:n,inode:E,dryRun:f})),h?h=await Promise.all(h.map(x=>P.resolve({fs:e,gitdir:n,ref:x}))):l?h=v.commit.parent:h=y?[y]:[],!i)if(l)i=v.commit.message;else throw new pt("message");let A=mt.from({tree:d,parent:h,author:m,committer:g,message:i});s&&(A=await mt.sign(A,r,s));let w=await yt({fs:e,gitdir:n,type:"commit",object:A.toObject(),dryRun:f});return!c&&!f&&await P.writeRef({fs:e,gitdir:n,ref:u,value:w}),w})}async function Eh({fs:e,gitdir:t,inode:r,dryRun:n}){let i=r.children;for(let l of i)l.type==="tree"&&(l.metadata.mode="040000",l.metadata.oid=await Eh({fs:e,gitdir:t,inode:l,dryRun:n}));let a=i.map(l=>({mode:l.metadata.mode,path:l.basename,oid:l.metadata.oid,type:l.type})),o=wt.from(a);return await yt({fs:e,gitdir:t,type:"tree",object:o.toObject(),dryRun:n})}async function kn({fs:e,cache:t,gitdir:r,oid:n,filepath:i}){if(i.startsWith("/"))throw new ye("leading-slash");if(i.endsWith("/"))throw new ye("trailing-slash");let a=n,o=await xr({fs:e,cache:t,gitdir:r,oid:n}),s=o.tree;if(i==="")n=o.oid;else{let l=i.split("/");n=await kh({fs:e,cache:t,gitdir:r,tree:s,pathArray:l,oid:a,filepath:i})}return n}async function kh({fs:e,cache:t,gitdir:r,tree:n,pathArray:i,oid:a,filepath:o}){let s=i.shift();for(let l of n)if(l.path===s){if(i.length===0)return l.oid;{let{type:f,object:c}=await G({fs:e,cache:t,gitdir:r,oid:l.oid});if(f!=="tree")throw new lt(a,f,"tree",o);return n=wt.from(c),kh({fs:e,cache:t,gitdir:r,tree:n,pathArray:i,oid:a,filepath:o})}}throw new H(`file or directory found at "${a}:${o}"`)}async function Tr({fs:e,cache:t,gitdir:r,oid:n,filepath:i=void 0}){i!==void 0&&(n=await kn({fs:e,cache:t,gitdir:r,oid:n,filepath:i}));let{tree:a,oid:o}=await xr({fs:e,cache:t,gitdir:r,oid:n});return{oid:o,tree:a.entries()}}async function Sn({fs:e,gitdir:t,tree:r}){let n=wt.from(r).toObject();return await yt({fs:e,gitdir:t,type:"tree",object:n,format:"content"})}async function P_({fs:e,cache:t,onSign:r,gitdir:n,ref:i,oid:a,note:o,force:s,author:l,committer:f,signingKey:c}){let u;try{u=await P.resolve({gitdir:n,fs:e,ref:i})}catch(m){if(!(m instanceof H))throw m}let d=(await Tr({fs:e,cache:t,gitdir:n,oid:u||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;if(s)d=d.filter(m=>m.path!==a);else for(let m of d)if(m.path===a)throw new Ct("note",a);typeof o=="string"&&(o=Buffer.from(o,"utf8"));let p=await yt({fs:e,gitdir:n,type:"blob",object:o,format:"content"});d.push({mode:"100644",path:a,oid:p,type:"blob"});let y=await Sn({fs:e,gitdir:n,tree:d});return await Ii({fs:e,cache:t,onSign:r,gitdir:n,ref:i,tree:y,parent:u&&[u],message:`Note added by 'isomorphic-git addNote'
`,author:l,committer:f,signingKey:c})}async function Sh({fs:e,onSign:t,dir:r,gitdir:n=R(r,".git"),ref:i="refs/notes/commits",oid:a,note:o,force:s,author:l,committer:f,signingKey:c,cache:u={}}){try{b("fs",e),b("gitdir",n),b("oid",a),b("note",o),c&&b("onSign",t);let h=new C(e),d=await be({fs:h,gitdir:n,author:l});if(!d)throw new ot("author");let p=await Er({fs:h,gitdir:n,author:d,committer:f});if(!p)throw new ot("committer");return await P_({fs:new C(h),cache:u,onSign:t,gitdir:n,ref:i,oid:a,note:o,force:s,author:d,committer:p,signingKey:c})}catch(h){throw h.caller="git.addNote",h}}var F_=/(^|[/.])([/.]|$)|^@$|@{|[\x00-\x20\x7f~^:?*[\\]|\.lock(\/|$)/;function En(e,t){if(typeof e!="string")throw new TypeError("Reference name must be a string");return!F_.test(e)&&(!!t||e.includes("/"))}async function Ah({fs:e,gitdir:t,remote:r,url:n,force:i}){if(!En(r,!0))throw new Dt(r,an.clean(r));let a=await V.get({fs:e,gitdir:t});if(!i&&(await a.getSubsections("remote")).includes(r)&&n!==await a.get(`remote.${r}.url`))throw new Ct("remote",r);await a.set(`remote.${r}.url`,n),await a.set(`remote.${r}.fetch`,`+refs/heads/*:refs/remotes/${r}/*`),await V.save({fs:e,gitdir:t,config:a})}async function Bh({fs:e,dir:t,gitdir:r=R(t,".git"),remote:n,url:i,force:a=!1}){try{return b("fs",e),b("gitdir",r),b("remote",n),b("url",i),await Ah({fs:new C(e),gitdir:r,remote:n,url:i,force:a})}catch(o){throw o.caller="git.addRemote",o}}async function C_({fs:e,cache:t,onSign:r,gitdir:n,ref:i,tagger:a,message:o=i,gpgsig:s,object:l,signingKey:f,force:c=!1}){if(i=i.startsWith("refs/tags/")?i:`refs/tags/${i}`,!c&&await P.exists({fs:e,gitdir:n,ref:i}))throw new Ct("tag",i);let u=await P.resolve({fs:e,gitdir:n,ref:l||"HEAD"}),{type:h}=await G({fs:e,cache:t,gitdir:n,oid:u}),d=Et.from({object:u,type:h,tag:i.replace("refs/tags/",""),tagger:a,message:o,gpgsig:s});f&&(d=await Et.sign(d,r,f));let p=await yt({fs:e,gitdir:n,type:"tag",object:d.toObject()});await P.writeRef({fs:e,gitdir:n,ref:i,value:p})}async function Ih({fs:e,onSign:t,dir:r,gitdir:n=R(r,".git"),ref:i,tagger:a,message:o=i,gpgsig:s,object:l,signingKey:f,force:c=!1,cache:u={}}){try{b("fs",e),b("gitdir",n),b("ref",i),f&&b("onSign",t);let h=new C(e),d=await be({fs:h,gitdir:n,author:a});if(!d)throw new ot("tagger");return await C_({fs:h,cache:u,onSign:t,gitdir:n,ref:i,tagger:d,message:o,gpgsig:s,object:l,signingKey:f,force:c})}catch(h){throw h.caller="git.annotatedTag",h}}async function D_({fs:e,gitdir:t,ref:r,object:n,checkout:i=!1,force:a=!1}){if(!En(r,!0))throw new Dt(r,an.clean(r));let o=`refs/heads/${r}`;if(!a&&await P.exists({fs:e,gitdir:t,ref:o}))throw new Ct("branch",r,!1);let s;try{s=await P.resolve({fs:e,gitdir:t,ref:n||"HEAD"})}catch{}s&&await P.writeRef({fs:e,gitdir:t,ref:o,value:s}),i&&await P.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:o})}async function Th({fs:e,dir:t,gitdir:r=R(t,".git"),ref:n,object:i,checkout:a=!1,force:o=!1}){try{return b("fs",e),b("gitdir",r),b("ref",n),await D_({fs:new C(e),gitdir:r,ref:n,object:i,checkout:a,force:o})}catch(s){throw s.caller="git.branch",s}}var Rh=(e,t)=>e==="."||t==null||t.length===0||t==="."?!0:t.length>=e.length?t.startsWith(e):e.startsWith(t);async function Po({fs:e,cache:t,onProgress:r,onPostCheckout:n,dir:i,gitdir:a,remote:o,ref:s,filepaths:l,noCheckout:f,noUpdateHead:c,dryRun:u,force:h,track:d=!0,nonBlocking:p=!1,batchSize:y=100}){let v;if(n)try{v=await P.resolve({fs:e,gitdir:a,ref:"HEAD"})}catch{v="0000000000000000000000000000000000000000"}let m;try{m=await P.resolve({fs:e,gitdir:a,ref:s})}catch(g){if(s==="HEAD")throw g;let S=`${o}/${s}`;if(m=await P.resolve({fs:e,gitdir:a,ref:S}),d){let k=await V.get({fs:e,gitdir:a});await k.set(`branch.${s}.remote`,o),await k.set(`branch.${s}.merge`,`refs/heads/${s}`),await V.save({fs:e,gitdir:a,config:k})}await P.writeRef({fs:e,gitdir:a,ref:`refs/heads/${s}`,value:m})}if(!f){let g;try{g=await U_({fs:e,cache:t,onProgress:r,dir:i,gitdir:a,ref:s,force:h,filepaths:l})}catch(w){throw w instanceof H&&w.data.what===m?new un(s,m):w}let S=g.filter(([w])=>w==="conflict").map(([w,x])=>x);if(S.length>0)throw new ln(S);let k=g.filter(([w])=>w==="error").map(([w,x])=>x);if(k.length>0)throw new N(k.join(", "));if(u){n&&await n({previousHead:v,newHead:m,type:l!=null&&l.length>0?"file":"branch"});return}let E=0,A=g.length;if(await K.acquire({fs:e,gitdir:a,cache:t},async function(w){await Promise.all(g.filter(([x])=>x==="delete"||x==="delete-index").map(async function([x,_]){let T=`${i}/${_}`;x==="delete"&&await e.rm(T),w.delete({filepath:_}),r&&await r({phase:"Updating workdir",loaded:++E,total:A})}))}),await K.acquire({fs:e,gitdir:a,cache:t},async function(w){for(let[x,_]of g)if(x==="rmdir"||x==="rmdir-index"){let T=`${i}/${_}`;try{x==="rmdir"&&await e.rmdir(T),w.delete({filepath:_}),r&&await r({phase:"Updating workdir",loaded:++E,total:A})}catch(B){if(B.code==="ENOTEMPTY")console.log(`Did not delete ${_} because directory is not empty`);else throw B}}}),await Promise.all(g.filter(([w])=>w==="mkdir"||w==="mkdir-index").map(async function([w,x]){let _=`${i}/${x}`;await e.mkdir(_),r&&await r({phase:"Updating workdir",loaded:++E,total:A})})),p){let w=g.filter(([_])=>_==="create"||_==="create-index"||_==="update"||_==="mkdir-index"),x=await Ku("Update Working Dir",w.map(([_,T,B,$,D])=>()=>M_({fs:e,cache:t,gitdir:a,dir:i},[_,T,B,$,D])),r,y);await K.acquire({fs:e,gitdir:a,cache:t,allowUnmerged:!0},async function(_){await Ku("Update Index",x.map(([T,B,$])=>()=>N_({index:_,fullpath:T,oid:B,stats:$})),r,y)})}else await K.acquire({fs:e,gitdir:a,cache:t,allowUnmerged:!0},async function(w){await Promise.all(g.filter(([x])=>x==="create"||x==="create-index"||x==="update"||x==="mkdir-index").map(async function([x,_,T,B,$]){let D=`${i}/${_}`;try{if(x!=="create-index"&&x!=="mkdir-index"){let{object:J}=await G({fs:e,cache:t,gitdir:a,oid:T});if($&&await e.rm(D),B===33188)await e.write(D,J);else if(B===33261)await e.write(D,J,{mode:511});else if(B===40960)await e.writelink(D,J);else throw new N(`Invalid mode 0o${B.toString(8)} detected in blob ${T}`)}let U=await e.lstat(D);B===33261&&(U.mode=493),x==="mkdir-index"&&(U.mode=57344),w.insert({filepath:_,stats:U,oid:T}),r&&await r({phase:"Updating workdir",loaded:++E,total:A})}catch(U){console.log(U)}}))});n&&await n({previousHead:v,newHead:m,type:l!=null&&l.length>0?"file":"branch"})}if(!c){let g=await P.expand({fs:e,gitdir:a,ref:s});g.startsWith("refs/heads")?await P.writeSymbolicRef({fs:e,gitdir:a,ref:"HEAD",value:g}):await P.writeRef({fs:e,gitdir:a,ref:"HEAD",value:m})}}async function U_({fs:e,cache:t,onProgress:r,dir:n,gitdir:i,ref:a,force:o,filepaths:s}){let l=0;return ge({fs:e,cache:t,dir:n,gitdir:i,trees:[xt({ref:a}),Ir(),Le()],map:async function(f,[c,u,h]){if(f===".")return;if(s&&!s.some(p=>Rh(f,p)))return null;switch(r&&await r({phase:"Analyzing workdir",loaded:++l}),[!!h,!!c,!!u].map(Number).join("")){case"000":return;case"001":return o&&s&&s.includes(f)?["delete",f]:void 0;case"010":switch(await c.type()){case"tree":return["mkdir",f];case"blob":return["create",f,await c.oid(),await c.mode()];case"commit":return["mkdir-index",f,await c.oid(),await c.mode()];default:return["error",`new entry Unhandled type ${await c.type()}`]}case"011":switch(`${await c.type()}-${await u.type()}`){case"tree-tree":return;case"tree-blob":case"blob-tree":return["conflict",f];case"blob-blob":return await c.oid()!==await u.oid()?o?["update",f,await c.oid(),await c.mode(),await c.mode()!==await u.mode()]:["conflict",f]:await c.mode()!==await u.mode()?o?["update",f,await c.oid(),await c.mode(),!0]:["conflict",f]:["create-index",f,await c.oid(),await c.mode()];case"commit-tree":return;case"commit-blob":return["conflict",f];default:return["error",`new entry Unhandled type ${c.type}`]}case"100":return["delete-index",f];case"101":switch(await h.type()){case"tree":return["rmdir-index",f];case"blob":return await h.oid()!==await u.oid()?o?["delete",f]:["conflict",f]:["delete",f];case"commit":return["rmdir-index",f];default:return["error",`delete entry Unhandled type ${await h.type()}`]}case"110":case"111":switch(`${await h.type()}-${await c.type()}`){case"tree-tree":return;case"blob-blob":{if(await h.oid()===await c.oid()&&await h.mode()===await c.mode()&&!o)return;if(u){if(await u.oid()!==await h.oid()&&await u.oid()!==await c.oid())return o?["update",f,await c.oid(),await c.mode(),await c.mode()!==await u.mode()]:["conflict",f]}else if(o)return["update",f,await c.oid(),await c.mode(),await c.mode()!==await h.mode()];return await c.mode()!==await h.mode()?["update",f,await c.oid(),await c.mode(),!0]:await c.oid()!==await h.oid()?["update",f,await c.oid(),await c.mode(),!1]:void 0}case"tree-blob":return["update-dir-to-blob",f,await c.oid()];case"blob-tree":return["update-blob-to-tree",f];case"commit-commit":return["mkdir-index",f,await c.oid(),await c.mode()];default:return["error",`update entry Unhandled type ${await h.type()}-${await c.type()}`]}}},reduce:async function(f,c){return c=mh(c),f?f&&f[0]==="rmdir"?(c.push(f),c):(c.unshift(f),c):c}})}async function N_({index:e,fullpath:t,stats:r,oid:n}){try{e.insert({filepath:t,stats:r,oid:n})}catch(i){console.warn(`Error inserting ${t} into index:`,i)}}async function M_({fs:e,cache:t,gitdir:r,dir:n},[i,a,o,s,l]){let f=`${n}/${a}`;if(i!=="create-index"&&i!=="mkdir-index"){let{object:u}=await G({fs:e,cache:t,gitdir:r,oid:o});if(l&&await e.rm(f),s===33188)await e.write(f,u);else if(s===33261)await e.write(f,u,{mode:511});else if(s===40960)await e.writelink(f,u);else throw new N(`Invalid mode 0o${s.toString(8)} detected in blob ${o}`)}let c=await e.lstat(f);return s===33261&&(c.mode=493),i==="mkdir-index"&&(c.mode=57344),[a,o,c]}async function Ku(e,t,r,n){let i=[];try{for(let a=0;a<t.length;a+=n){let o=t.slice(a,a+n).map(l=>l());(await Promise.allSettled(o)).forEach(l=>{l.status==="fulfilled"&&i.push(l.value)}),r&&await r({phase:"Updating workdir",loaded:a+o.length,total:t.length})}return i}catch(a){console.error(`Error during ${e}: ${a}`)}return i}async function Fo({fs:e,onProgress:t,onPostCheckout:r,dir:n,gitdir:i=R(n,".git"),remote:a="origin",ref:o,filepaths:s,noCheckout:l=!1,noUpdateHead:f=o===void 0,dryRun:c=!1,force:u=!1,track:h=!0,cache:d={},nonBlocking:p=!1,batchSize:y=100}){try{b("fs",e),b("dir",n),b("gitdir",i);let v=o||"HEAD";return await Po({fs:new C(e),cache:d,onProgress:t,onPostCheckout:r,dir:n,gitdir:i,remote:a,ref:v,filepaths:s,noCheckout:l,noUpdateHead:f,dryRun:c,force:u,track:h,nonBlocking:p,batchSize:y})}catch(v){throw v.caller="git.checkout",v}}var j_=/^refs\/(heads\/|tags\/|remotes\/)?(.*)/;function Ne(e){let t=j_.exec(e);return t?t[1]==="remotes/"&&e.endsWith("/HEAD")?t[2].slice(0,-5):t[2]:e}async function xe({fs:e,gitdir:t,fullname:r=!1,test:n=!1}){let i=await P.resolve({fs:e,gitdir:t,ref:"HEAD",depth:2});if(n)try{await P.resolve({fs:e,gitdir:t,ref:i})}catch{return}if(i.startsWith("refs/"))return r?i:Ne(i)}function z_(e){return e=e.replace(/^git@([^:]+):/,"https://$1/"),e=e.replace(/^ssh:\/\//,"https://"),e}function Oh({username:e="",password:t=""}){return`Basic ${Buffer.from(`${e}:${t}`).toString("base64")}`}async function An(e,t){let r=dh(e);for(;;){let{value:n,done:i}=await r.next();if(n&&await t(n),i)break}r.return&&r.return()}async function Ei(e){let t=0,r=[];await An(e,a=>{r.push(a),t+=a.byteLength});let n=new Uint8Array(t),i=0;for(let a of r)n.set(a,i),i+=a.byteLength;return n}function Ju(e){let t=e.match(/^https?:\/\/([^/]+)@/);if(t==null)return{url:e,auth:{}};t=t[1];let[r,n]=t.split(":");return e=e.replace(`${t}@`,""),{url:e,auth:{username:r,password:n}}}function Ro(e,t){let r=t.toString(16);return"0".repeat(e-r.length)+r}var X=class{static flush(){return Buffer.from("0000","utf8")}static delim(){return Buffer.from("0001","utf8")}static encode(t){typeof t=="string"&&(t=Buffer.from(t));let r=t.length+4,n=Ro(4,r);return Buffer.concat([Buffer.from(n,"utf8"),t])}static streamReader(t){let r=new bi(t);return async function(){try{let i=await r.read(4);if(i==null)return!0;if(i=parseInt(i.toString("utf8"),16),i===0||i===1)return null;let a=await r.read(i-4);return a??!0}catch(i){return t.error=i,!0}}}};async function Qu(e){let t={},r;for(;r=await e(),r!==!0;){if(r===null)continue;r=r.toString("utf8").replace(/\n$/,"");let n=r.indexOf("=");if(n>-1){let i=r.slice(0,n),a=r.slice(n+1);t[i]=a}else t[r]=!0}return{protocolVersion:2,capabilities2:t}}async function th(e,{service:t}){let r=new Set,n=new Map,i=new Map,a=X.streamReader(e),o=await a();for(;o===null;)o=await a();if(o===!0)throw new hn;if(o.includes("version 2"))return Qu(a);if(o.toString("utf8").replace(/\n$/,"")!==`# service=${t}`)throw new Me(`# service=${t}\\n`,o.toString("utf8"));let s=await a();for(;s===null;)s=await a();if(s===!0)return{capabilities:r,refs:n,symrefs:i};if(s=s.toString("utf8"),s.includes("version 2"))return Qu(a);let[l,f]=po(s,"\0","\\x00");if(f.split(" ").map(c=>r.add(c)),l!=="0000000000000000000000000000000000000000 capabilities^{}"){let[c,u]=po(l," "," ");for(n.set(u,c);;){let h=await a();if(h===!0)break;if(h!==null){let[d,p]=po(h.toString("utf8")," "," ");n.set(p,d)}}}for(let c of r)if(c.startsWith("symref=")){let u=c.match(/symref=([^:]+):(.*)/);u.length===3&&i.set(u[1],u[2])}return{protocolVersion:1,capabilities:r,refs:n,symrefs:i}}function po(e,t,r){let n=e.trim().split(t);if(n.length!==2)throw new Me(`Two strings separated by '${r}'`,e.toString("utf8"));return n}var eh=(e,t)=>e.endsWith("?")?`${e}${t}`:`${e}/${t.replace(/^https?:\/\//,"")}`,rh=(e,t)=>{(t.username||t.password)&&(e.Authorization=Oh(t)),t.headers&&Object.assign(e,t.headers)},wo=async e=>{try{let t=Buffer.from(await Ei(e.body)),r=t.toString("utf8");return{preview:r.length<256?r:r.slice(0,256)+"...",response:r,data:t}}catch{return{}}},Sr=class{static async capabilities(){return["discover","connect"]}static async discover({http:t,onProgress:r,onAuth:n,onAuthSuccess:i,onAuthFailure:a,corsProxy:o,service:s,url:l,headers:f,protocolVersion:c}){let{url:u,auth:h}=Ju(l),d=o?eh(o,u):u;(h.username||h.password)&&(f.Authorization=Oh(h)),c===2&&(f["Git-Protocol"]="version=2");let p,y,v=!1;do if(p=await t.request({onProgress:r,method:"GET",url:`${d}/info/refs?service=${s}`,headers:f}),y=!1,p.statusCode===401||p.statusCode===203){let m=v?a:n;if(m){if(h=await m(u,{...h,headers:{...f}}),h&&h.cancel)throw new vr;h&&(rh(f,h),v=!0,y=!0)}}else p.statusCode===200&&v&&i&&await i(u,h);while(y);if(p.statusCode!==200){let{response:m}=await wo(p);throw new yr(p.statusCode,p.statusMessage,m)}if(p.headers["content-type"]===`application/x-${s}-advertisement`){let m=await th(p.body,{service:s});return m.auth=h,m}else{let{preview:m,response:g,data:S}=await wo(p);try{let k=await th([S],{service:s});return k.auth=h,k}catch{throw new yn(m,g)}}}static async connect({http:t,onProgress:r,corsProxy:n,service:i,url:a,auth:o,body:s,headers:l}){let f=Ju(a);f&&(a=f.url),n&&(a=eh(n,a)),l["content-type"]=`application/x-${i}-request`,l.accept=`application/x-${i}-result`,rh(l,o);let c=await t.request({onProgress:r,method:"POST",url:`${a}/${i}`,body:s,headers:l});if(c.statusCode!==200){let{response:u}=wo(c);throw new yr(c.statusCode,c.statusMessage,u)}return c}},Ar=class{static getRemoteHelperFor({url:t}){let r=new Map;r.set("http",Sr),r.set("https",Sr);let n=L_({url:t});if(!n)throw new _n(t);if(r.has(n.transport))return r.get(n.transport);throw new gn(t,n.transport,n.transport==="ssh"?z_(t):void 0)}};function L_({url:e}){if(e.startsWith("git@"))return{transport:"ssh",address:e};let t=e.match(/(\w+)(:\/\/|::)(.*)/);if(t!==null){if(t[2]==="://")return{transport:t[1],address:t[0]};if(t[2]==="::")return{transport:t[1],address:t[3]}}}var Ue=null,je=class{static async read({fs:t,gitdir:r}){Ue===null&&(Ue=new nn);let n=R(r,"shallow"),i=new Set;return await Ue.acquire(n,async function(){let a=await t.read(n,{encoding:"utf8"});if(a===null||a.trim()==="")return i;a.trim().split(`
`).map(o=>i.add(o))}),i}static async write({fs:t,gitdir:r,oids:n}){Ue===null&&(Ue=new nn);let i=R(r,"shallow");if(n.size>0){let a=[...n].join(`
`)+`
`;await Ue.acquire(i,async function(){await t.write(i,a,{encoding:"utf8"})})}else await Ue.acquire(i,async function(){await t.rm(i)})}};async function q_({fs:e,gitdir:t,oid:r}){let n=`objects/${r.slice(0,2)}/${r.slice(2)}`;return e.exists(`${t}/${n}`)}async function H_({fs:e,cache:t,gitdir:r,oid:n,getExternalRefDelta:i}){let a=await e.readdir(R(r,"objects/pack"));a=a.filter(o=>o.endsWith(".idx"));for(let o of a){let s=`${r}/objects/pack/${o}`,l=await $o({fs:e,cache:t,filename:s,getExternalRefDelta:i});if(l.error)throw new N(l.error);if(l.offsets.has(n))return!0}return!1}async function nh({fs:e,cache:t,gitdir:r,oid:n,format:i="content"}){let a=s=>G({fs:e,cache:t,gitdir:r,oid:s}),o=await q_({fs:e,gitdir:r,oid:n});return o||(o=await H_({fs:e,cache:t,gitdir:r,oid:n,getExternalRefDelta:a})),o}function G_(e){let i="5041434b"+"00000002"+"00000000";return e.slice(0,12).toString("hex")===i}function $h(e,t){let r=e.map(n=>n.split("=",1)[0]);return t.filter(n=>{let i=n.split("=",1)[0];return r.includes(i)})}var Ti={name:"isomorphic-git",version:"1.35.0",agent:"git/isomorphic-git@1.35.0"},dr=class{constructor(){this._queue=[]}write(t){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){let r=this._waiting;this._waiting=null,r({value:t})}else this._queue.push(t)}end(){if(this._ended=!0,this._waiting){let t=this._waiting;this._waiting=null,t({done:!0})}}destroy(t){this.error=t,this.end()}async next(){if(this._queue.length>0)return{value:this._queue.shift()};if(this._ended)return{done:!0};if(this._waiting)throw Error("You cannot call read until the previous call to read has returned!");return new Promise(t=>{this._waiting=t})}};function Z_(e){let t=e.indexOf("\r"),r=e.indexOf(`
`);return t===-1&&r===-1?-1:t===-1?r+1:r===-1?t+1:r===t+1?r+1:Math.min(t,r)+1}function Ph(e){let t=new dr,r="";return(async()=>(await An(e,n=>{for(n=n.toString("utf8"),r+=n;;){let i=Z_(r);if(i===-1)break;t.write(r.slice(0,i)),r=r.slice(i)}}),r.length>0&&t.write(r),t.end()))(),t}var ki=class{static demux(t){let r=X.streamReader(t),n=new dr,i=new dr,a=new dr,o=async function(){let s=await r();if(s===null)return o();if(s===!0){n.end(),a.end(),t.error?i.destroy(t.error):i.end();return}switch(s[0]){case 1:{i.write(s.slice(1));break}case 2:{a.write(s.slice(1));break}case 3:{let l=s.slice(1);a.write(l),n.end(),a.end(),i.destroy(new Error(l.toString("utf8")));return}default:n.write(s)}o()};return o(),{packetlines:n,packfile:i,progress:a}}};async function W_(e){let{packetlines:t,packfile:r,progress:n}=ki.demux(e),i=[],a=[],o=[],s=!1,l=!1;return new Promise((f,c)=>{An(t,u=>{let h=u.toString("utf8").trim();if(h.startsWith("shallow")){let d=h.slice(-41).trim();d.length!==40&&c(new we(d)),i.push(d)}else if(h.startsWith("unshallow")){let d=h.slice(-41).trim();d.length!==40&&c(new we(d)),a.push(d)}else if(h.startsWith("ACK")){let[,d,p]=h.split(" ");o.push({oid:d,status:p}),p||(l=!0)}else h.startsWith("NAK")?(s=!0,l=!0):(l=!0,s=!0);l&&(e.error?c(e.error):f({shallows:i,unshallows:a,acks:o,nak:s,packfile:r,progress:n}))}).finally(()=>{l||(e.error?c(e.error):f({shallows:i,unshallows:a,acks:o,nak:s,packfile:r,progress:n}))})})}function X_({capabilities:e=[],wants:t=[],haves:r=[],shallows:n=[],depth:i=null,since:a=null,exclude:o=[]}){let s=[];t=[...new Set(t)];let l=` ${e.join(" ")}`;for(let f of t)s.push(X.encode(`want ${f}${l}
`)),l="";for(let f of n)s.push(X.encode(`shallow ${f}
`));i!==null&&s.push(X.encode(`deepen ${i}
`)),a!==null&&s.push(X.encode(`deepen-since ${Math.floor(a.valueOf()/1e3)}
`));for(let f of o)s.push(X.encode(`deepen-not ${f}
`));s.push(X.flush());for(let f of r)s.push(X.encode(`have ${f}
`));return s.push(X.encode(`done
`)),s}async function Co({fs:e,cache:t,http:r,onProgress:n,onMessage:i,onAuth:a,onAuthSuccess:o,onAuthFailure:s,gitdir:l,ref:f,remoteRef:c,remote:u,url:h,corsProxy:d,depth:p=null,since:y=null,exclude:v=[],relative:m=!1,tags:g=!1,singleBranch:S=!1,headers:k={},prune:E=!1,pruneTags:A=!1}){let w=f||await xe({fs:e,gitdir:l,test:!0}),x=await V.get({fs:e,gitdir:l}),_=u||w&&await x.get(`branch.${w}.remote`)||"origin",T=h||await x.get(`remote.${_}.url`);if(typeof T>"u")throw new pt("remote OR url");let B=c||w&&await x.get(`branch.${w}.merge`)||f||"HEAD";d===void 0&&(d=await x.get("http.corsProxy"));let $=Ar.getRemoteHelperFor({url:T}),D=await $.discover({http:r,onAuth:a,onAuthSuccess:o,onAuthFailure:s,corsProxy:d,service:"git-upload-pack",url:T,headers:k,protocolVersion:1}),U=D.auth,J=D.refs;if(J.size===0)return{defaultBranch:null,fetchHead:null,fetchHeadDescription:null};if(p!==null&&!D.capabilities.has("shallow"))throw new pe("shallow","depth");if(y!==null&&!D.capabilities.has("deepen-since"))throw new pe("deepen-since","since");if(v.length>0&&!D.capabilities.has("deepen-not"))throw new pe("deepen-not","exclude");if(m===!0&&!D.capabilities.has("deepen-relative"))throw new pe("deepen-relative","relative");let{oid:Ut,fullref:kt}=P.resolveAgainstMap({ref:B,map:J});for(let q of J.keys())q===kt||q==="HEAD"||q.startsWith("refs/heads/")||g&&q.startsWith("refs/tags/")||J.delete(q);let Ot=$h([...D.capabilities],["multi_ack_detailed","no-done","side-band-64k","ofs-delta",`agent=${Ti.agent}`]);m&&Ot.push("deepen-relative");let Pi=S?[Ut]:J.values(),Fi=S?[w]:await P.listRefs({fs:e,gitdir:l,filepath:"refs"}),_t=[];for(let q of Fi)try{q=await P.expand({fs:e,gitdir:l,ref:q});let nt=await P.resolve({fs:e,gitdir:l,ref:q});await nh({fs:e,cache:t,gitdir:l,oid:nt})&&_t.push(nt)}catch{}_t=[...new Set(_t)];let W=await je.read({fs:e,gitdir:l}),Nt=D.capabilities.has("shallow")?[...W]:[],at=X_({capabilities:Ot,wants:Pi,haves:_t,shallows:Nt,depth:p,since:y,exclude:v}),Or=Buffer.from(await Ei(at)),ke=await $.connect({http:r,onProgress:n,corsProxy:d,service:"git-upload-pack",url:T,auth:U,body:[Or],headers:k}),Q=await W_(ke.body);ke.headers&&(Q.headers=ke.headers);for(let q of Q.shallows)if(!W.has(q))try{let{object:nt}=await G({fs:e,cache:t,gitdir:l,oid:q}),St=new mt(nt),Mt=await Promise.all(St.headers().parent.map(Pr=>nh({fs:e,cache:t,gitdir:l,oid:Pr})));Mt.length===0||Mt.every(Pr=>Pr)||W.add(q)}catch{W.add(q)}for(let q of Q.unshallows)W.delete(q);if(await je.write({fs:e,gitdir:l,oids:W}),S){let q=new Map([[kt,Ut]]),nt=new Map,St=10,Mt=kt;for(;St--;){let Di=D.symrefs.get(Mt);if(Di===void 0)break;nt.set(Mt,Di),Mt=Di}let Ci=J.get(Mt);Ci&&q.set(Mt,Ci);let{pruned:Pr}=await P.updateRemoteRefs({fs:e,gitdir:l,remote:_,refs:q,symrefs:nt,tags:g,prune:E});E&&(Q.pruned=Pr)}else{let{pruned:q}=await P.updateRemoteRefs({fs:e,gitdir:l,remote:_,refs:J,symrefs:D.symrefs,tags:g,prune:E,pruneTags:A});E&&(Q.pruned=q)}if(Q.HEAD=D.symrefs.get("HEAD"),Q.HEAD===void 0){let{oid:q}=P.resolveAgainstMap({ref:"HEAD",map:J});for(let[nt,St]of J.entries())if(nt!=="HEAD"&&St===q){Q.HEAD=nt;break}}let N0=kt.startsWith("refs/tags")?"tag":"branch";if(Q.FETCH_HEAD={oid:Ut,description:`${N0} '${Ne(kt)}' of ${T}`},n||i){let q=Ph(Q.progress);An(q,async nt=>{if(i&&await i(nt),n){let St=nt.match(/([^:]*).*\((\d+?)\/(\d+?)\)/);St&&await n({phase:St[1].trim(),loaded:parseInt(St[2],10),total:parseInt(St[3],10)})}})}let Tn=Buffer.from(await Ei(Q.packfile));if(ke.body.error)throw ke.body.error;let Ho=Tn.slice(-20).toString("hex"),$r={defaultBranch:Q.HEAD,fetchHead:Q.FETCH_HEAD.oid,fetchHeadDescription:Q.FETCH_HEAD.description};if(Q.headers&&($r.headers=Q.headers),E&&($r.pruned=Q.pruned),Ho!==""&&!G_(Tn)){$r.packfile=`objects/pack/pack-${Ho}.pack`;let q=R(l,$r.packfile);await e.write(q,Tn);let nt=Mt=>G({fs:e,cache:t,gitdir:l,oid:Mt}),St=await cn.fromPack({pack:Tn,getExternalRefDelta:nt,onProgress:n});await e.write(q.replace(/\.pack$/,".idx"),await St.toBuffer())}return $r}async function Fh({fs:e,bare:t=!1,dir:r,gitdir:n=t?r:R(r,".git"),defaultBranch:i="master"}){if(await e.exists(n+"/config"))return;let a=["hooks","info","objects/info","objects/pack","refs/heads","refs/tags"];a=a.map(o=>n+"/"+o);for(let o of a)await e.mkdir(o);await e.write(n+"/config",`[core]
	repositoryformatversion = 0
	filemode = false
	bare = ${t}
`+(t?"":`	logallrefupdates = true
`)+`	symlinks = false
	ignorecase = true
`),await e.write(n+"/HEAD",`ref: refs/heads/${i}
`)}async function V_({fs:e,cache:t,http:r,onProgress:n,onMessage:i,onAuth:a,onAuthSuccess:o,onAuthFailure:s,onPostCheckout:l,dir:f,gitdir:c,url:u,corsProxy:h,ref:d,remote:p,depth:y,since:v,exclude:m,relative:g,singleBranch:S,noCheckout:k,noTags:E,headers:A,nonBlocking:w,batchSize:x=100}){try{if(await Fh({fs:e,gitdir:c}),await Ah({fs:e,gitdir:c,remote:p,url:u,force:!1}),h){let B=await V.get({fs:e,gitdir:c});await B.set("http.corsProxy",h),await V.save({fs:e,gitdir:c,config:B})}let{defaultBranch:_,fetchHead:T}=await Co({fs:e,cache:t,http:r,onProgress:n,onMessage:i,onAuth:a,onAuthSuccess:o,onAuthFailure:s,gitdir:c,ref:d,remote:p,corsProxy:h,depth:y,since:v,exclude:m,relative:g,singleBranch:S,headers:A,tags:!E});if(T===null)return;d=d||_,d=d.replace("refs/heads/",""),await Po({fs:e,cache:t,onProgress:n,onPostCheckout:l,dir:f,gitdir:c,ref:d,remote:p,noCheckout:k,nonBlocking:w,batchSize:x})}catch(_){throw await e.rmdir(c,{recursive:!0,maxRetries:10}).catch(()=>{}),_}}async function Ch({fs:e,http:t,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:o,onPostCheckout:s,dir:l,gitdir:f=R(l,".git"),url:c,corsProxy:u=void 0,ref:h=void 0,remote:d="origin",depth:p=void 0,since:y=void 0,exclude:v=[],relative:m=!1,singleBranch:g=!1,noCheckout:S=!1,noTags:k=!1,headers:E={},cache:A={},nonBlocking:w=!1,batchSize:x=100}){try{return b("fs",e),b("http",t),b("gitdir",f),S||b("dir",l),b("url",c),await V_({fs:new C(e),cache:A,http:t,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:o,onPostCheckout:s,dir:l,gitdir:f,url:c,corsProxy:u,ref:h,remote:d,depth:p,since:y,exclude:v,relative:m,singleBranch:g,noCheckout:S,noTags:k,headers:E,nonBlocking:w,batchSize:x})}catch(_){throw _.caller="git.clone",_}}async function Dh({fs:e,onSign:t,dir:r,gitdir:n=R(r,".git"),message:i,author:a,committer:o,signingKey:s,amend:l=!1,dryRun:f=!1,noUpdateBranch:c=!1,ref:u,parent:h,tree:d,cache:p={}}){try{b("fs",e),l||b("message",i),s&&b("onSign",t);let y=new C(e);return await Ii({fs:y,cache:p,onSign:t,gitdir:n,message:i,author:a,committer:o,signingKey:s,amend:l,dryRun:f,noUpdateBranch:c,ref:u,parent:h,tree:d})}catch(y){throw y.caller="git.commit",y}}async function Uh({fs:e,dir:t,gitdir:r=R(t,".git"),fullname:n=!1,test:i=!1}){try{return b("fs",e),b("gitdir",r),await xe({fs:new C(e),gitdir:r,fullname:n,test:i})}catch(a){throw a.caller="git.currentBranch",a}}async function Y_({fs:e,gitdir:t,ref:r}){if(r=r.startsWith("refs/heads/")?r:`refs/heads/${r}`,!await P.exists({fs:e,gitdir:t,ref:r}))throw new H(r);let i=await P.expand({fs:e,gitdir:t,ref:r}),a=await xe({fs:e,gitdir:t,fullname:!0});if(i===a){let l=await P.resolve({fs:e,gitdir:t,ref:i});await P.writeRef({fs:e,gitdir:t,ref:"HEAD",value:l})}await P.deleteRef({fs:e,gitdir:t,ref:i});let o=Ne(r),s=await V.get({fs:e,gitdir:t});await s.deleteSection("branch",o),await V.save({fs:e,gitdir:t,config:s})}async function Nh({fs:e,dir:t,gitdir:r=R(t,".git"),ref:n}){try{return b("fs",e),b("ref",n),await Y_({fs:new C(e),gitdir:r,ref:n})}catch(i){throw i.caller="git.deleteBranch",i}}async function Mh({fs:e,dir:t,gitdir:r=R(t,".git"),ref:n}){try{b("fs",e),b("ref",n),await P.deleteRef({fs:new C(e),gitdir:r,ref:n})}catch(i){throw i.caller="git.deleteRef",i}}async function K_({fs:e,gitdir:t,remote:r}){let n=await V.get({fs:e,gitdir:t});await n.deleteSection("remote",r),await V.save({fs:e,gitdir:t,config:n})}async function jh({fs:e,dir:t,gitdir:r=R(t,".git"),remote:n}){try{return b("fs",e),b("remote",n),await K_({fs:new C(e),gitdir:r,remote:n})}catch(i){throw i.caller="git.deleteRemote",i}}async function J_({fs:e,gitdir:t,ref:r}){r=r.startsWith("refs/tags/")?r:`refs/tags/${r}`,await P.deleteRef({fs:e,gitdir:t,ref:r})}async function zh({fs:e,dir:t,gitdir:r=R(t,".git"),ref:n}){try{return b("fs",e),b("ref",n),await J_({fs:new C(e),gitdir:r,ref:n})}catch(i){throw i.caller="git.deleteTag",i}}async function Q_({fs:e,gitdir:t,oid:r}){let n=r.slice(0,2);return(await e.readdir(`${t}/objects/${n}`)).map(a=>`${n}${a}`).filter(a=>a.startsWith(r))}async function tb({fs:e,cache:t,gitdir:r,oid:n,getExternalRefDelta:i}){let a=[],o=await e.readdir(R(r,"objects/pack"));o=o.filter(s=>s.endsWith(".idx"));for(let s of o){let l=`${r}/objects/pack/${s}`,f=await $o({fs:e,cache:t,filename:l,getExternalRefDelta:i});if(f.error)throw new N(f.error);for(let c of f.offsets.keys())c.startsWith(n)&&a.push(c)}return a}async function eb({fs:e,cache:t,gitdir:r,oid:n}){let i=s=>G({fs:e,cache:t,gitdir:r,oid:s}),a=await Q_({fs:e,gitdir:r,oid:n}),o=await tb({fs:e,cache:t,gitdir:r,oid:n,getExternalRefDelta:i});for(let s of o)a.indexOf(s)===-1&&a.push(s);if(a.length===1)return a[0];throw a.length>1?new fn("oids",n,a):new H(`an object matching "${n}"`)}async function Lh({fs:e,dir:t,gitdir:r=R(t,".git"),oid:n,cache:i={}}){try{return b("fs",e),b("gitdir",r),b("oid",n),await eb({fs:new C(e),cache:i,gitdir:r,oid:n})}catch(a){throw a.caller="git.expandOid",a}}async function qh({fs:e,dir:t,gitdir:r=R(t,".git"),ref:n}){try{return b("fs",e),b("gitdir",r),b("ref",n),await P.expand({fs:new C(e),gitdir:r,ref:n})}catch(i){throw i.caller="git.expandRef",i}}async function Do({fs:e,cache:t,gitdir:r,oids:n}){let i={},a=n.length,o=n.map((s,l)=>({index:l,oid:s}));for(;o.length;){let s=new Set;for(let{oid:f,index:c}of o)i[f]||(i[f]=new Set),i[f].add(c),i[f].size===a&&s.add(f);if(s.size>0)return[...s];let l=new Map;for(let{oid:f,index:c}of o)try{let{object:u}=await G({fs:e,cache:t,gitdir:r,oid:f}),h=mt.from(u),{parent:d}=h.parseHeaders();for(let p of d)(!i[p]||!i[p].has(c))&&l.set(p+":"+c,{oid:p,index:c})}catch{}o=Array.from(l.values())}return[]}var mo=/^.*(\r?\n|$)/gm;function rb({branches:e,contents:t}){let r=e[1],n=e[2],i=t[0],a=t[1],o=t[2],s=a.match(mo),l=i.match(mo),f=o.match(mo),c=Fg(s,l,f),u=7,h="",d=!0;for(let p of c)p.ok&&(h+=p.ok.join("")),p.conflict&&(d=!1,h+=`${"<".repeat(u)} ${r}
`,h+=p.conflict.a.join(""),h+=`${"=".repeat(u)}
`,h+=p.conflict.b.join(""),h+=`${">".repeat(u)} ${n}
`);return{cleanMerge:d,mergedText:h}}async function nb({fs:e,cache:t,dir:r,gitdir:n=R(r,".git"),index:i,ourOid:a,baseOid:o,theirOid:s,ourName:l="ours",baseName:f="base",theirName:c="theirs",dryRun:u=!1,abortOnConflict:h=!0,mergeDriver:d}){let p=xt({ref:a}),y=xt({ref:o}),v=xt({ref:s}),m=[],g=[],S=[],k=[],E=await ge({fs:e,cache:t,dir:r,gitdir:n,trees:[p,y,v],map:async function(A,[w,x,_]){let T=yi(A),B=await xi(w,x),$=await xi(_,x);switch(`${B}-${$}`){case"false-false":return{mode:await x.mode(),path:T,oid:await x.oid(),type:await x.type()};case"false-true":return!_&&await w.type()==="tree"?{mode:await w.mode(),path:T,oid:await w.oid(),type:await w.type()}:_?{mode:await _.mode(),path:T,oid:await _.oid(),type:await _.type()}:void 0;case"true-false":return!w&&await _.type()==="tree"?{mode:await _.mode(),path:T,oid:await _.oid(),type:await _.type()}:w?{mode:await w.mode(),path:T,oid:await w.oid(),type:await w.type()}:void 0;case"true-true":{if(w&&_&&await w.type()==="tree"&&await _.type()==="tree")return{mode:await w.mode(),path:T,oid:await w.oid(),type:"tree"};if(w&&_&&await w.type()==="blob"&&await _.type()==="blob")return ib({fs:e,gitdir:n,path:T,ours:w,base:x,theirs:_,ourName:l,baseName:f,theirName:c,mergeDriver:d}).then(async D=>{if(D.cleanMerge)h||i.insert({filepath:A,oid:D.mergeResult.oid,stage:0});else if(m.push(A),g.push(A),!h){let U="";x&&await x.type()==="blob"&&(U=await x.oid());let J=await w.oid(),Ut=await _.oid();i.delete({filepath:A}),U&&i.insert({filepath:A,oid:U,stage:1}),i.insert({filepath:A,oid:J,stage:2}),i.insert({filepath:A,oid:Ut,stage:3})}return D.mergeResult});if(x&&!w&&_&&await x.type()==="blob"&&await _.type()==="blob"){if(m.push(A),S.push(A),!h){let D=await x.oid(),U=await _.oid();i.delete({filepath:A}),i.insert({filepath:A,oid:D,stage:1}),i.insert({filepath:A,oid:U,stage:3})}return{mode:await _.mode(),oid:await _.oid(),type:"blob",path:T}}if(x&&w&&!_&&await x.type()==="blob"&&await w.type()==="blob"){if(m.push(A),k.push(A),!h){let D=await x.oid(),U=await w.oid();i.delete({filepath:A}),i.insert({filepath:A,oid:D,stage:1}),i.insert({filepath:A,oid:U,stage:2})}return{mode:await w.mode(),oid:await w.oid(),type:"blob",path:T}}if(x&&!w&&!_&&(await x.type()==="blob"||await x.type()==="tree"))return;throw new gr}}},reduce:m.length!==0&&(!r||h)?void 0:async(A,w)=>{let x=w.filter(Boolean);if(A&&!(A&&A.type==="tree"&&x.length===0&&A.path!==".")){if(x.length>0||A.path==="."&&x.length===0){let T=new wt(x).toObject(),B=await yt({fs:e,gitdir:n,type:"tree",object:T,dryRun:u});A.oid=B}return A}}});return m.length!==0?(r&&!h&&await ge({fs:e,cache:t,dir:r,gitdir:n,trees:[xt({ref:E.oid})],map:async function(A,[w]){let x=`${r}/${A}`;if(await w.type()==="blob"){let _=await w.mode(),T=new TextDecoder().decode(await w.content());await e.write(x,T,{mode:_})}return!0}}),new _r(m,g,S,k)):E.oid}async function ib({fs:e,gitdir:t,path:r,ours:n,base:i,theirs:a,ourName:o,theirName:s,baseName:l,dryRun:f,mergeDriver:c=rb}){let u="blob",h="100755",d="",p="";i&&await i.type()==="blob"&&(h=await i.mode(),d=await i.oid(),p=Buffer.from(await i.content()).toString("utf8"));let y=h===await n.mode()?await a.mode():await n.mode();if(await n.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:y,path:r,oid:await n.oid(),type:u}};if(await n.oid()===d)return{cleanMerge:!0,mergeResult:{mode:y,path:r,oid:await a.oid(),type:u}};if(await a.oid()===d)return{cleanMerge:!0,mergeResult:{mode:y,path:r,oid:await n.oid(),type:u}};let v=Buffer.from(await n.content()).toString("utf8"),m=Buffer.from(await a.content()).toString("utf8"),{mergedText:g,cleanMerge:S}=await c({branches:[l,o,s],contents:[p,v,m],path:r}),k=await yt({fs:e,gitdir:t,type:"blob",object:Buffer.from(g,"utf8"),dryRun:f});return{cleanMerge:S,mergeResult:{mode:y,path:r,oid:k,type:u}}}async function Hh({fs:e,cache:t,dir:r,gitdir:n,ours:i,theirs:a,fastForward:o=!0,fastForwardOnly:s=!1,dryRun:l=!1,noUpdateBranch:f=!1,abortOnConflict:c=!0,message:u,author:h,committer:d,signingKey:p,onSign:y,mergeDriver:v,allowUnrelatedHistories:m=!1}){i===void 0&&(i=await xe({fs:e,gitdir:n,fullname:!0})),i=await P.expand({fs:e,gitdir:n,ref:i}),a=await P.expand({fs:e,gitdir:n,ref:a});let g=await P.resolve({fs:e,gitdir:n,ref:i}),S=await P.resolve({fs:e,gitdir:n,ref:a}),k=await Do({fs:e,cache:t,gitdir:n,oids:[g,S]});if(k.length!==1)if(k.length===0&&m)k.push("4b825dc642cb6eb9a060e54bf8d69288fbee4904");else throw new gr;let E=k[0];if(E===S)return{oid:g,alreadyMerged:!0};if(o&&E===g)return!l&&!f&&await P.writeRef({fs:e,gitdir:n,ref:i,value:S}),{oid:S,fastForward:!0};{if(s)throw new dn;let A=await K.acquire({fs:e,gitdir:n,cache:t,allowUnmerged:!1},async x=>nb({fs:e,cache:t,dir:r,gitdir:n,index:x,ourOid:g,theirOid:S,baseOid:E,ourName:Ne(i),baseName:"base",theirName:Ne(a),dryRun:l,abortOnConflict:c,mergeDriver:v}));if(A instanceof _r)throw A;return u||(u=`Merge branch '${Ne(a)}' into ${Ne(i)}`),{oid:await Ii({fs:e,cache:t,gitdir:n,message:u,ref:i,tree:A,parent:[g,S],author:h,committer:d,signingKey:p,onSign:y,dryRun:l,noUpdateBranch:f}),tree:A,mergeCommit:!0}}}async function Gh({fs:e,cache:t,http:r,onProgress:n,onMessage:i,onAuth:a,onAuthSuccess:o,onAuthFailure:s,dir:l,gitdir:f,ref:c,url:u,remote:h,remoteRef:d,prune:p,pruneTags:y,fastForward:v,fastForwardOnly:m,corsProxy:g,singleBranch:S,headers:k,author:E,committer:A,signingKey:w}){try{if(!c){let T=await xe({fs:e,gitdir:f});if(!T)throw new pt("ref");c=T}let{fetchHead:x,fetchHeadDescription:_}=await Co({fs:e,cache:t,http:r,onProgress:n,onMessage:i,onAuth:a,onAuthSuccess:o,onAuthFailure:s,gitdir:f,corsProxy:g,ref:c,url:u,remote:h,remoteRef:d,singleBranch:S,headers:k,prune:p,pruneTags:y});await Hh({fs:e,cache:t,gitdir:f,ours:c,theirs:x,fastForward:v,fastForwardOnly:m,message:`Merge ${_}`,author:E,committer:A,signingKey:w,dryRun:!1,noUpdateBranch:!1}),await Po({fs:e,cache:t,onProgress:n,dir:l,gitdir:f,ref:c,remote:h,noCheckout:!1})}catch(x){throw x.caller="git.pull",x}}async function Zh({fs:e,http:t,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:o,dir:s,gitdir:l=R(s,".git"),ref:f,url:c,remote:u,remoteRef:h,corsProxy:d,singleBranch:p,headers:y={},cache:v={}}){try{b("fs",e),b("http",t),b("gitdir",l);let m={name:"",email:"",timestamp:Date.now(),timezoneOffset:0};return await Gh({fs:new C(e),cache:v,http:t,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:o,dir:s,gitdir:l,ref:f,url:c,remote:u,remoteRef:h,fastForwardOnly:!0,corsProxy:d,singleBranch:p,headers:y,author:m,committer:m})}catch(m){throw m.caller="git.fastForward",m}}async function Wh({fs:e,http:t,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:o,dir:s,gitdir:l=R(s,".git"),ref:f,remote:c,remoteRef:u,url:h,corsProxy:d,depth:p=null,since:y=null,exclude:v=[],relative:m=!1,tags:g=!1,singleBranch:S=!1,headers:k={},prune:E=!1,pruneTags:A=!1,cache:w={}}){try{return b("fs",e),b("http",t),b("gitdir",l),await Co({fs:new C(e),cache:w,http:t,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:o,gitdir:l,ref:f,remote:c,remoteRef:u,url:h,corsProxy:d,depth:p,since:y,exclude:v,relative:m,tags:g,singleBranch:S,headers:k,prune:E,pruneTags:A})}catch(x){throw x.caller="git.fetch",x}}async function Xh({fs:e,dir:t,gitdir:r=R(t,".git"),oids:n,cache:i={}}){try{return b("fs",e),b("gitdir",r),b("oids",n),await Do({fs:new C(e),cache:i,gitdir:r,oids:n})}catch(a){throw a.caller="git.findMergeBase",a}}async function Vh({fs:e,filepath:t}){if(await e.exists(R(t,".git")))return t;{let r=mr(t);if(r===t)throw new H(`git root for ${t}`);return Vh({fs:e,filepath:r})}}async function Yh({fs:e,filepath:t}){try{return b("fs",e),b("filepath",t),await Vh({fs:new C(e),filepath:t})}catch(r){throw r.caller="git.findRoot",r}}async function Kh({fs:e,dir:t,gitdir:r=R(t,".git"),path:n}){try{return b("fs",e),b("gitdir",r),b("path",n),await xn({fs:new C(e),gitdir:r,path:n})}catch(i){throw i.caller="git.getConfig",i}}async function ab({fs:e,gitdir:t,path:r}){return(await V.get({fs:e,gitdir:t})).getall(r)}async function Jh({fs:e,dir:t,gitdir:r=R(t,".git"),path:n}){try{return b("fs",e),b("gitdir",r),b("path",n),await ab({fs:new C(e),gitdir:r,path:n})}catch(i){throw i.caller="git.getConfigAll",i}}async function Qh({http:e,onAuth:t,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,url:a,headers:o={},forPush:s=!1}){try{b("http",e),b("url",a);let f=await Ar.getRemoteHelperFor({url:a}).discover({http:e,onAuth:t,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,service:s?"git-receive-pack":"git-upload-pack",url:a,headers:o,protocolVersion:1}),c={capabilities:[...f.capabilities]};for(let[u,h]of f.refs){let d=u.split("/"),p=d.pop(),y=c;for(let v of d)y[v]=y[v]||{},y=y[v];y[p]=h}for(let[u,h]of f.symrefs){let d=u.split("/"),p=d.pop(),y=c;for(let v of d)y[v]=y[v]||{},y=y[v];y[p]=h}return c}catch(l){throw l.caller="git.getRemoteInfo",l}}function td(e,t,r,n){let i=[];for(let[a,o]of e.refs){if(t&&!a.startsWith(t))continue;if(a.endsWith("^{}")){if(n){let l=a.replace("^{}",""),f=i[i.length-1],c=f.ref===l?f:i.find(u=>u.ref===l);if(c===void 0)throw new Error("I did not expect this to happen");c.peeled=o}continue}let s={ref:a,oid:o};r&&e.symrefs.has(a)&&(s.target=e.symrefs.get(a)),i.push(s)}return i}async function ed({http:e,onAuth:t,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,url:a,headers:o={},forPush:s=!1,protocolVersion:l=2}){try{b("http",e),b("url",a);let c=await Ar.getRemoteHelperFor({url:a}).discover({http:e,onAuth:t,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,service:s?"git-receive-pack":"git-upload-pack",url:a,headers:o,protocolVersion:l});if(c.protocolVersion===2)return{protocolVersion:c.protocolVersion,capabilities:c.capabilities2};let u={};for(let h of c.capabilities){let[d,p]=h.split("=");p?u[d]=p:u[d]=!0}return{protocolVersion:1,capabilities:u,refs:td(c,void 0,!0,!0)}}catch(f){throw f.caller="git.getRemoteInfo2",f}}async function ob({type:e,object:t,format:r="content",oid:n=void 0}){return r!=="deflated"&&(r!=="wrapped"&&(t=me.wrap({type:e,object:t})),n=await ae(t)),{oid:n,object:t}}async function rd({object:e}){try{b("object",e),typeof e=="string"?e=Buffer.from(e,"utf8"):e instanceof Uint8Array||(e=new Uint8Array(e));let t="blob",{oid:r,object:n}=await ob({type:t,format:"content",object:e});return{oid:r,type:t,object:n,format:"wrapped"}}catch(t){throw t.caller="git.hashBlob",t}}async function sb({fs:e,cache:t,onProgress:r,dir:n,gitdir:i,filepath:a}){try{a=R(n,a);let o=await e.read(a),s=f=>G({fs:e,cache:t,gitdir:i,oid:f}),l=await cn.fromPack({pack:o,getExternalRefDelta:s,onProgress:r});return await e.write(a.replace(/\.pack$/,".idx"),await l.toBuffer()),{oids:[...l.hashes]}}catch(o){throw o.caller="git.indexPack",o}}async function nd({fs:e,onProgress:t,dir:r,gitdir:n=R(r,".git"),filepath:i,cache:a={}}){try{return b("fs",e),b("dir",r),b("gitdir",r),b("filepath",i),await sb({fs:new C(e),cache:a,onProgress:t,dir:r,gitdir:n,filepath:i})}catch(o){throw o.caller="git.indexPack",o}}async function id({fs:e,bare:t=!1,dir:r,gitdir:n=t?r:R(r,".git"),defaultBranch:i="master"}){try{return b("fs",e),b("gitdir",n),t||b("dir",r),await Fh({fs:new C(e),bare:t,dir:r,gitdir:n,defaultBranch:i})}catch(a){throw a.caller="git.init",a}}async function ad({fs:e,cache:t,gitdir:r,oid:n,ancestor:i,depth:a}){let o=await je.read({fs:e,gitdir:r});if(!n)throw new pt("oid");if(!i)throw new pt("ancestor");if(n===i)return!1;let s=[n],l=new Set,f=0;for(;s.length;){if(f++===a)throw new wn(a);let c=s.shift(),{type:u,object:h}=await G({fs:e,cache:t,gitdir:r,oid:c});if(u!=="commit")throw new lt(c,u,"commit");let d=mt.from(h).parse();for(let p of d.parent)if(p===i)return!0;if(!o.has(c))for(let p of d.parent)l.has(p)||(s.push(p),l.add(p))}return!1}async function od({fs:e,dir:t,gitdir:r=R(t,".git"),oid:n,ancestor:i,depth:a=-1,cache:o={}}){try{return b("fs",e),b("gitdir",r),b("oid",n),b("ancestor",i),await ad({fs:new C(e),cache:o,gitdir:r,oid:n,ancestor:i,depth:a})}catch(s){throw s.caller="git.isDescendent",s}}async function sd({fs:e,dir:t,gitdir:r=R(t,".git"),filepath:n}){try{return b("fs",e),b("dir",t),b("gitdir",r),b("filepath",n),_e.isIgnored({fs:new C(e),dir:t,gitdir:r,filepath:n})}catch(i){throw i.caller="git.isIgnored",i}}async function cd({fs:e,dir:t,gitdir:r=R(t,".git"),remote:n}){try{return b("fs",e),b("gitdir",r),P.listBranches({fs:new C(e),gitdir:r,remote:n})}catch(i){throw i.caller="git.listBranches",i}}async function cb({fs:e,gitdir:t,ref:r,cache:n}){if(r){let i=await P.resolve({gitdir:t,fs:e,ref:r}),a=[];return await fd({fs:e,cache:n,gitdir:t,oid:i,filenames:a,prefix:""}),a}else return K.acquire({fs:e,gitdir:t,cache:n},async function(i){return i.entries.map(a=>a.path)})}async function fd({fs:e,cache:t,gitdir:r,oid:n,filenames:i,prefix:a}){let{tree:o}=await Tr({fs:e,cache:t,gitdir:r,oid:n});for(let s of o)s.type==="tree"?await fd({fs:e,cache:t,gitdir:r,oid:s.oid,filenames:i,prefix:R(a,s.path)}):i.push(R(a,s.path))}async function ld({fs:e,dir:t,gitdir:r=R(t,".git"),ref:n,cache:i={}}){try{return b("fs",e),b("gitdir",r),await cb({fs:new C(e),cache:i,gitdir:r,ref:n})}catch(a){throw a.caller="git.listFiles",a}}async function fb({fs:e,cache:t,gitdir:r,ref:n}){let i;try{i=await P.resolve({gitdir:r,fs:e,ref:n})}catch(s){if(s instanceof H)return[]}return(await Tr({fs:e,cache:t,gitdir:r,oid:i})).tree.map(s=>({target:s.path,note:s.oid}))}async function ud({fs:e,dir:t,gitdir:r=R(t,".git"),ref:n="refs/notes/commits",cache:i={}}){try{return b("fs",e),b("gitdir",r),b("ref",n),await fb({fs:new C(e),cache:i,gitdir:r,ref:n})}catch(a){throw a.caller="git.listNotes",a}}async function hd({fs:e,dir:t,gitdir:r=R(t,".git"),filepath:n}){try{return b("fs",e),b("gitdir",r),P.listRefs({fs:new C(e),gitdir:r,filepath:n})}catch(i){throw i.caller="git.listRefs",i}}async function lb({fs:e,gitdir:t}){let r=await V.get({fs:e,gitdir:t}),n=await r.getSubsections("remote");return Promise.all(n.map(async a=>{let o=await r.get(`remote.${a}.url`);return{remote:a,url:o}}))}async function dd({fs:e,dir:t,gitdir:r=R(t,".git")}){try{return b("fs",e),b("gitdir",r),await lb({fs:new C(e),gitdir:r})}catch(n){throw n.caller="git.listRemotes",n}}async function ub(e){let t=X.streamReader(e),r=[],n;for(;n=await t(),n!==!0;){if(n===null)continue;n=n.toString("utf8").replace(/\n$/,"");let[i,a,...o]=n.split(" "),s={ref:a,oid:i};for(let l of o){let[f,c]=l.split(":");f==="symref-target"?s.target=c:f==="peeled"&&(s.peeled=c)}r.push(s)}return r}async function hb({prefix:e,symrefs:t,peelTags:r}){let n=[];return n.push(X.encode(`command=ls-refs
`)),n.push(X.encode(`agent=${Ti.agent}
`)),(r||t||e)&&n.push(X.delim()),r&&n.push(X.encode("peel")),t&&n.push(X.encode("symrefs")),e&&n.push(X.encode(`ref-prefix ${e}`)),n.push(X.flush()),n}async function pd({http:e,onAuth:t,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,url:a,headers:o={},forPush:s=!1,protocolVersion:l=2,prefix:f,symrefs:c,peelTags:u}){try{b("http",e),b("url",a);let h=await Sr.discover({http:e,onAuth:t,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,service:s?"git-receive-pack":"git-upload-pack",url:a,headers:o,protocolVersion:l});if(h.protocolVersion===1)return td(h,f,c,u);let d=await hb({prefix:f,symrefs:c,peelTags:u}),p=await Sr.connect({http:e,auth:h.auth,headers:o,corsProxy:i,service:s?"git-receive-pack":"git-upload-pack",url:a,body:d});return ub(p.body)}catch(h){throw h.caller="git.listServerRefs",h}}async function wd({fs:e,dir:t,gitdir:r=R(t,".git")}){try{return b("fs",e),b("gitdir",r),P.listTags({fs:new C(e),gitdir:r})}catch(n){throw n.caller="git.listTags",n}}function db(e,t){return e.committer.timestamp-t.committer.timestamp}var pb="e69de29bb2d1d6434b8b29ae775ad8c2e48c5391";async function ih({fs:e,cache:t,gitdir:r,oid:n,fileId:i}){if(i===pb)return;let a=n,o,s=await xr({fs:e,cache:t,gitdir:r,oid:n}),l=s.tree;return i===s.oid?o=s.path:(o=await md({fs:e,cache:t,gitdir:r,tree:l,fileId:i,oid:a}),Array.isArray(o)&&(o.length===0?o=void 0:o.length===1&&(o=o[0]))),o}async function md({fs:e,cache:t,gitdir:r,tree:n,fileId:i,oid:a,filepaths:o=[],parentPath:s=""}){let l=n.entries().map(function(f){let c;return f.oid===i?(c=R(s,f.path),o.push(c)):f.type==="tree"&&(c=G({fs:e,cache:t,gitdir:r,oid:f.oid}).then(function({object:u}){return md({fs:e,cache:t,gitdir:r,tree:wt.from(u),fileId:i,oid:a,filepaths:o,parentPath:R(s,f.path)})})),c});return await Promise.all(l),o}async function wb({fs:e,cache:t,gitdir:r,filepath:n,ref:i,depth:a,since:o,force:s,follow:l}){let f=typeof o>"u"?void 0:Math.floor(o.valueOf()/1e3),c=[],u=await je.read({fs:e,gitdir:r}),h=await P.resolve({fs:e,gitdir:r,ref:i}),d=[await kr({fs:e,cache:t,gitdir:r,oid:h})],p,y,v;function m(g){v&&n&&c.push(g)}for(;d.length>0;){let g=d.pop();if(f!==void 0&&g.commit.committer.timestamp<=f)break;if(n){let S;try{S=await kn({fs:e,cache:t,gitdir:r,oid:g.commit.tree,filepath:n}),y&&p!==S&&c.push(y),p=S,y=g,v=!0}catch(k){if(k instanceof H){let E=l&&p;if(E&&(E=await ih({fs:e,cache:t,gitdir:r,oid:g.commit.tree,fileId:p}),E))if(Array.isArray(E)){if(y){let A=await ih({fs:e,cache:t,gitdir:r,oid:y.commit.tree,fileId:p});if(Array.isArray(A))if(E=E.filter(w=>A.indexOf(w)===-1),E.length===1)E=E[0],n=E,y&&c.push(y);else{E=!1,y&&c.push(y);break}}}else n=E,y&&c.push(y);if(!E){if(v&&p&&(c.push(y),!s))break;if(!s&&!l)throw k}y=g,v=!1}else throw k}}else c.push(g);if(a!==void 0&&c.length===a){m(g);break}if(!u.has(g.oid))for(let S of g.commit.parent){let k=await kr({fs:e,cache:t,gitdir:r,oid:S});d.map(E=>E.oid).includes(k.oid)||d.push(k)}d.length===0&&m(g),d.sort((S,k)=>db(S.commit,k.commit))}return c}async function yd({fs:e,dir:t,gitdir:r=R(t,".git"),filepath:n,ref:i="HEAD",depth:a,since:o,force:s,follow:l,cache:f={}}){try{return b("fs",e),b("gitdir",r),b("ref",i),await wb({fs:new C(e),cache:f,gitdir:r,filepath:n,ref:i,depth:a,since:o,force:s,follow:l})}catch(c){throw c.caller="git.log",c}}async function gd({fs:e,onSign:t,dir:r,gitdir:n=R(r,".git"),ours:i,theirs:a,fastForward:o=!0,fastForwardOnly:s=!1,dryRun:l=!1,noUpdateBranch:f=!1,abortOnConflict:c=!0,message:u,author:h,committer:d,signingKey:p,cache:y={},mergeDriver:v,allowUnrelatedHistories:m=!1}){try{b("fs",e),p&&b("onSign",t);let g=new C(e),S=await be({fs:g,gitdir:n,author:h});if(!S&&(!s||!o))throw new ot("author");let k=await Er({fs:g,gitdir:n,author:S,committer:d});if(!k&&(!s||!o))throw new ot("committer");return await Hh({fs:g,cache:y,dir:r,gitdir:n,ours:i,theirs:a,fastForward:o,fastForwardOnly:s,dryRun:l,noUpdateBranch:f,abortOnConflict:c,message:u,author:S,committer:k,signingKey:p,onSign:t,mergeDriver:v,allowUnrelatedHistories:m})}catch(g){throw g.caller="git.merge",g}}var mb={commit:16,tree:32,blob:48,tag:64,ofs_delta:96,ref_delta:112};async function _d({fs:e,cache:t,dir:r,gitdir:n=R(r,".git"),oids:i}){let a=new oh,o=[];function s(c,u){let h=Buffer.from(c,u);o.push(h),a.update(h)}async function l({stype:c,object:u}){let h=mb[c],d=u.length,p=d>15?128:0,y=d&15;d=d>>>4;let v=(p|h|y).toString(16);for(s(v,"hex");p;)p=d>127?128:0,v=p|d&127,s(Ro(2,v),"hex"),d=d>>>7;s(Buffer.from(await gh(u)))}s("PACK"),s("00000002","hex"),s(Ro(8,i.length),"hex");for(let c of i){let{type:u,object:h}=await G({fs:e,cache:t,gitdir:n,oid:c});await l({write:s,object:h,stype:u})}let f=a.digest();return o.push(f),o}async function yb({fs:e,cache:t,gitdir:r,oids:n,write:i}){let a=await _d({fs:e,cache:t,gitdir:r,oids:n}),o=Buffer.from(await Ei(a)),l=`pack-${o.slice(-20).toString("hex")}.pack`;return i?(await e.write(R(r,`objects/pack/${l}`),o),{filename:l}):{filename:l,packfile:new Uint8Array(o)}}async function bd({fs:e,dir:t,gitdir:r=R(t,".git"),oids:n,write:i=!1,cache:a={}}){try{return b("fs",e),b("gitdir",r),b("oids",n),await yb({fs:new C(e),cache:a,gitdir:r,oids:n,write:i})}catch(o){throw o.caller="git.packObjects",o}}async function vd({fs:e,http:t,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:o,dir:s,gitdir:l=R(s,".git"),ref:f,url:c,remote:u,remoteRef:h,prune:d=!1,pruneTags:p=!1,fastForward:y=!0,fastForwardOnly:v=!1,corsProxy:m,singleBranch:g,headers:S={},author:k,committer:E,signingKey:A,cache:w={}}){try{b("fs",e),b("gitdir",l);let x=new C(e),_=await be({fs:x,gitdir:l,author:k});if(!_)throw new ot("author");let T=await Er({fs:x,gitdir:l,author:_,committer:E});if(!T)throw new ot("committer");return await Gh({fs:x,cache:w,http:t,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:o,dir:s,gitdir:l,ref:f,url:c,remote:u,remoteRef:h,fastForward:y,fastForwardOnly:v,corsProxy:m,singleBranch:g,headers:S,author:_,committer:T,signingKey:A,prune:d,pruneTags:p})}catch(x){throw x.caller="git.pull",x}}async function gb({fs:e,cache:t,dir:r,gitdir:n=R(r,".git"),start:i,finish:a}){let o=await je.read({fs:e,gitdir:n}),s=new Set,l=new Set;for(let u of i)s.add(await P.resolve({fs:e,gitdir:n,ref:u}));for(let u of a)try{let h=await P.resolve({fs:e,gitdir:n,ref:u});l.add(h)}catch{}let f=new Set;async function c(u){f.add(u);let{type:h,object:d}=await G({fs:e,cache:t,gitdir:n,oid:u});if(h==="tag"){let y=Et.from(d).headers().object;return c(y)}if(h!=="commit")throw new lt(u,h,"commit");if(!o.has(u)){let y=mt.from(d).headers().parent;for(u of y)!l.has(u)&&!f.has(u)&&await c(u)}}for(let u of s)await c(u);return f}async function yo({fs:e,cache:t,dir:r,gitdir:n=R(r,".git"),oids:i}){let a=new Set;async function o(s){if(a.has(s))return;a.add(s);let{type:l,object:f}=await G({fs:e,cache:t,gitdir:n,oid:s});if(l==="tag"){let u=Et.from(f).headers().object;await o(u)}else if(l==="commit"){let u=mt.from(f).headers().tree;await o(u)}else if(l==="tree"){let c=wt.from(f);for(let u of c)u.type==="blob"&&a.add(u.oid),u.type==="tree"&&await o(u.oid)}}for(let s of i)await o(s);return a}async function _b(e){let t={},r="",n=X.streamReader(e),i=await n();for(;i!==!0;)i!==null&&(r+=i.toString("utf8")+`
`),i=await n();let a=r.toString("utf8").split(`
`);if(i=a.shift(),!i.startsWith("unpack "))throw new Me('unpack ok" or "unpack [error message]',i);t.ok=i==="unpack ok",t.ok||(t.error=i.slice(7)),t.refs={};for(let o of a){if(o.trim()==="")continue;let s=o.slice(0,2),l=o.slice(3),f=l.indexOf(" ");f===-1&&(f=l.length);let c=l.slice(0,f),u=l.slice(f+1);t.refs[c]={ok:s==="ok",error:u}}return t}async function bb({capabilities:e=[],triplets:t=[]}){let r=[],n=`\0 ${e.join(" ")}`;for(let i of t)r.push(X.encode(`${i.oldoid} ${i.oid} ${i.fullRef}${n}
`)),n="";return r.push(X.flush()),r}async function vb({fs:e,cache:t,http:r,onProgress:n,onMessage:i,onAuth:a,onAuthSuccess:o,onAuthFailure:s,onPrePush:l,gitdir:f,ref:c,remoteRef:u,remote:h,url:d,force:p=!1,delete:y=!1,corsProxy:v,headers:m={}}){let g=c||await xe({fs:e,gitdir:f});if(typeof g>"u")throw new pt("ref");let S=await V.get({fs:e,gitdir:f});h=h||await S.get(`branch.${g}.pushRemote`)||await S.get("remote.pushDefault")||await S.get(`branch.${g}.remote`)||"origin";let k=d||await S.get(`remote.${h}.pushurl`)||await S.get(`remote.${h}.url`);if(typeof k>"u")throw new pt("remote OR url");let E=u||await S.get(`branch.${g}.merge`);if(typeof k>"u")throw new pt("remoteRef");v===void 0&&(v=await S.get("http.corsProxy"));let A=await P.expand({fs:e,gitdir:f,ref:g}),w=y?"0000000000000000000000000000000000000000":await P.resolve({fs:e,gitdir:f,ref:A}),x=Ar.getRemoteHelperFor({url:k}),_=await x.discover({http:r,onAuth:a,onAuthSuccess:o,onAuthFailure:s,corsProxy:v,service:"git-receive-pack",url:k,headers:m,protocolVersion:1}),T=_.auth,B;if(!E)B=A;else try{B=await P.expandAgainstMap({ref:E,map:_.refs})}catch(W){if(W instanceof H)B=E.startsWith("refs/")?E:`refs/heads/${E}`;else throw W}let $=_.refs.get(B)||"0000000000000000000000000000000000000000";if(l&&!await l({remote:h,url:k,localRef:{ref:y?"(delete)":A,oid:w},remoteRef:{ref:B,oid:$}}))throw new vr;let D=!_.capabilities.has("no-thin"),U=new Set;if(!y){let W=[..._.refs.values()],Nt=new Set;if($!=="0000000000000000000000000000000000000000"){let at=await Do({fs:e,cache:t,gitdir:f,oids:[w,$]});for(let Or of at)W.push(Or);D&&(Nt=await yo({fs:e,cache:t,gitdir:f,oids:at}))}if(!W.includes(w)){let at=await gb({fs:e,cache:t,gitdir:f,start:[w],finish:W});U=await yo({fs:e,cache:t,gitdir:f,oids:at})}if(D){try{let at=await P.resolve({fs:e,gitdir:f,ref:`refs/remotes/${h}/HEAD`,depth:2}),{oid:Or}=await P.resolveAgainstMap({ref:at.replace(`refs/remotes/${h}/`,""),fullref:at,map:_.refs}),ke=[Or];for(let Q of await yo({fs:e,cache:t,gitdir:f,oids:ke}))Nt.add(Q)}catch{}for(let at of Nt)U.delete(at)}if(w===$&&(p=!0),!p){if(A.startsWith("refs/tags")&&$!=="0000000000000000000000000000000000000000")throw new br("tag-exists");if(w!=="0000000000000000000000000000000000000000"&&$!=="0000000000000000000000000000000000000000"&&!await ad({fs:e,cache:t,gitdir:f,oid:w,ancestor:$,depth:-1}))throw new br("not-fast-forward")}}let J=$h([..._.capabilities],["report-status","side-band-64k",`agent=${Ti.agent}`]),Ut=await bb({capabilities:J,triplets:[{oldoid:$,oid:w,fullRef:B}]}),kt=y?[]:await _d({fs:e,cache:t,gitdir:f,oids:[...U]}),Ot=await x.connect({http:r,onProgress:n,corsProxy:v,service:"git-receive-pack",url:k,auth:T,headers:m,body:[...Ut,...kt]}),{packfile:Pi,progress:Fi}=await ki.demux(Ot.body);if(i){let W=Ph(Fi);An(W,async Nt=>{await i(Nt)})}let _t=await _b(Pi);if(Ot.headers&&(_t.headers=Ot.headers),h&&_t.ok&&_t.refs[B].ok&&!A.startsWith("refs/tags")){let W=`refs/remotes/${h}/${B.replace("refs/heads","")}`;y?await P.deleteRef({fs:e,gitdir:f,ref:W}):await P.writeRef({fs:e,gitdir:f,ref:W,value:w})}if(_t.ok&&Object.values(_t.refs).every(W=>W.ok))return _t;{let W=Object.entries(_t.refs).filter(([Nt,at])=>!at.ok).map(([Nt,at])=>`
  - ${Nt}: ${at.error}`).join("");throw new pn(W,_t)}}async function xd({fs:e,http:t,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:o,onPrePush:s,dir:l,gitdir:f=R(l,".git"),ref:c,remoteRef:u,remote:h="origin",url:d,force:p=!1,delete:y=!1,corsProxy:v,headers:m={},cache:g={}}){try{return b("fs",e),b("http",t),b("gitdir",f),await vb({fs:new C(e),cache:g,http:t,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:o,onPrePush:s,gitdir:f,ref:c,remoteRef:u,remote:h,url:d,force:p,delete:y,corsProxy:v,headers:m})}catch(S){throw S.caller="git.push",S}}async function Ed({fs:e,cache:t,gitdir:r,oid:n}){let{type:i,object:a}=await G({fs:e,cache:t,gitdir:r,oid:n});if(i==="tag")return n=Et.from(a).parse().object,Ed({fs:e,cache:t,gitdir:r,oid:n});if(i!=="blob")throw new lt(n,i,"blob");return{oid:n,blob:new Uint8Array(a)}}async function kd({fs:e,cache:t,gitdir:r,oid:n,filepath:i=void 0}){return i!==void 0&&(n=await kn({fs:e,cache:t,gitdir:r,oid:n,filepath:i})),await Ed({fs:e,cache:t,gitdir:r,oid:n})}async function Sd({fs:e,dir:t,gitdir:r=R(t,".git"),oid:n,filepath:i,cache:a={}}){try{return b("fs",e),b("gitdir",r),b("oid",n),await kd({fs:new C(e),cache:a,gitdir:r,oid:n,filepath:i})}catch(o){throw o.caller="git.readBlob",o}}async function Uo({fs:e,dir:t,gitdir:r=R(t,".git"),oid:n,cache:i={}}){try{return b("fs",e),b("gitdir",r),b("oid",n),await kr({fs:new C(e),cache:i,gitdir:r,oid:n})}catch(a){throw a.caller="git.readCommit",a}}async function xb({fs:e,cache:t,gitdir:r,ref:n="refs/notes/commits",oid:i}){let a=await P.resolve({gitdir:r,fs:e,ref:n}),{blob:o}=await kd({fs:e,cache:t,gitdir:r,oid:a,filepath:i});return o}async function Ad({fs:e,dir:t,gitdir:r=R(t,".git"),ref:n="refs/notes/commits",oid:i,cache:a={}}){try{return b("fs",e),b("gitdir",r),b("ref",n),b("oid",i),await xb({fs:new C(e),cache:a,gitdir:r,ref:n,oid:i})}catch(o){throw o.caller="git.readNote",o}}async function Bd({fs:e,dir:t,gitdir:r=R(t,".git"),oid:n,format:i="parsed",filepath:a=void 0,encoding:o=void 0,cache:s={}}){try{b("fs",e),b("gitdir",r),b("oid",n);let l=new C(e);a!==void 0&&(n=await kn({fs:l,cache:s,gitdir:r,oid:n,filepath:a}));let c=await G({fs:l,cache:s,gitdir:r,oid:n,format:i==="parsed"?"content":i});if(c.oid=n,i==="parsed")switch(c.format="parsed",c.type){case"commit":c.object=mt.from(c.object).parse();break;case"tree":c.object=wt.from(c.object).entries();break;case"blob":o?c.object=c.object.toString(o):(c.object=new Uint8Array(c.object),c.format="content");break;case"tag":c.object=Et.from(c.object).parse();break;default:throw new lt(c.oid,c.type,"blob|commit|tag|tree")}else(c.format==="deflated"||c.format==="wrapped")&&(c.type=c.format);return c}catch(l){throw l.caller="git.readObject",l}}async function Eb({fs:e,cache:t,gitdir:r,oid:n}){let{type:i,object:a}=await G({fs:e,cache:t,gitdir:r,oid:n,format:"content"});if(i!=="tag")throw new lt(n,i,"tag");let o=Et.from(a);return{oid:n,tag:o.parse(),payload:o.payload()}}async function Id({fs:e,dir:t,gitdir:r=R(t,".git"),oid:n,cache:i={}}){try{return b("fs",e),b("gitdir",r),b("oid",n),await Eb({fs:new C(e),cache:i,gitdir:r,oid:n})}catch(a){throw a.caller="git.readTag",a}}async function Td({fs:e,dir:t,gitdir:r=R(t,".git"),oid:n,filepath:i=void 0,cache:a={}}){try{return b("fs",e),b("gitdir",r),b("oid",n),await Tr({fs:new C(e),cache:a,gitdir:r,oid:n,filepath:i})}catch(o){throw o.caller="git.readTree",o}}async function Rd({fs:e,dir:t,gitdir:r=R(t,".git"),filepath:n,cache:i={}}){try{b("fs",e),b("gitdir",r),b("filepath",n),await K.acquire({fs:new C(e),gitdir:r,cache:i},async function(a){a.delete({filepath:n})})}catch(a){throw a.caller="git.remove",a}}async function kb({fs:e,cache:t,onSign:r,gitdir:n,ref:i="refs/notes/commits",oid:a,author:o,committer:s,signingKey:l}){let f;try{f=await P.resolve({gitdir:n,fs:e,ref:i})}catch(p){if(!(p instanceof H))throw p}let u=(await Tr({fs:e,gitdir:n,oid:f||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;u=u.filter(p=>p.path!==a);let h=await Sn({fs:e,gitdir:n,tree:u});return await Ii({fs:e,cache:t,onSign:r,gitdir:n,ref:i,tree:h,parent:f&&[f],message:`Note removed by 'isomorphic-git removeNote'
`,author:o,committer:s,signingKey:l})}async function Od({fs:e,onSign:t,dir:r,gitdir:n=R(r,".git"),ref:i="refs/notes/commits",oid:a,author:o,committer:s,signingKey:l,cache:f={}}){try{b("fs",e),b("gitdir",n),b("oid",a);let c=new C(e),u=await be({fs:c,gitdir:n,author:o});if(!u)throw new ot("author");let h=await Er({fs:c,gitdir:n,author:u,committer:s});if(!h)throw new ot("committer");return await kb({fs:c,cache:f,onSign:t,gitdir:n,ref:i,oid:a,author:u,committer:h,signingKey:l})}catch(c){throw c.caller="git.removeNote",c}}async function Sb({fs:e,gitdir:t,oldref:r,ref:n,checkout:i=!1}){if(!En(n,!0))throw new Dt(n,an.clean(n));if(!En(r,!0))throw new Dt(r,an.clean(r));let a=`refs/heads/${r}`,o=`refs/heads/${n}`;if(await P.exists({fs:e,gitdir:t,ref:o}))throw new Ct("branch",n,!1);let l=await P.resolve({fs:e,gitdir:t,ref:a,depth:1});await P.writeRef({fs:e,gitdir:t,ref:o,value:l}),await P.deleteRef({fs:e,gitdir:t,ref:a});let c=await xe({fs:e,gitdir:t,fullname:!0})===a;(i||c)&&await P.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:o})}async function $d({fs:e,dir:t,gitdir:r=R(t,".git"),ref:n,oldref:i,checkout:a=!1}){try{return b("fs",e),b("gitdir",r),b("ref",n),b("oldref",i),await Sb({fs:new C(e),gitdir:r,ref:n,oldref:i,checkout:a})}catch(o){throw o.caller="git.renameBranch",o}}async function Pd({gitdir:e,type:t,object:r}){return ae(me.wrap({type:t,object:r}))}async function Fd({fs:e,dir:t,gitdir:r=R(t,".git"),filepath:n,ref:i,cache:a={}}){try{b("fs",e),b("gitdir",r),b("filepath",n);let o=new C(e),s,l;try{s=await P.resolve({fs:o,gitdir:r,ref:i||"HEAD"})}catch(u){if(i)throw u}if(s)try{s=await kn({fs:o,cache:a,gitdir:r,oid:s,filepath:n})}catch{s=null}let f={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:0,uid:0,gid:0,size:0},c=t&&await o.read(R(t,n));c&&(l=await Pd({gitdir:r,type:"blob",object:c}),s===l&&(f=await o.lstat(R(t,n)))),await K.acquire({fs:o,gitdir:r,cache:a},async function(u){u.delete({filepath:n}),s&&u.insert({filepath:n,stats:f,oid:s})})}catch(o){throw o.caller="git.reset",o}}async function Cd({fs:e,dir:t,gitdir:r=R(t,".git"),ref:n,depth:i}){try{return b("fs",e),b("gitdir",r),b("ref",n),await P.resolve({fs:new C(e),gitdir:r,ref:n,depth:i})}catch(a){throw a.caller="git.resolveRef",a}}async function Dd({fs:e,dir:t,gitdir:r=R(t,".git"),path:n,value:i,append:a=!1}){try{b("fs",e),b("gitdir",r),b("path",n);let o=new C(e),s=await V.get({fs:o,gitdir:r});a?await s.append(n,i):await s.set(n,i),await V.save({fs:o,gitdir:r,config:s})}catch(o){throw o.caller="git.setConfig",o}}async function Ud({fs:e,gitdir:t,commit:r}){let n=mt.from(r).toObject();return await yt({fs:e,gitdir:t,type:"commit",object:n,format:"content"})}var Si=class e{static get timezoneOffsetForRefLogEntry(){let t=new Date().getTimezoneOffset(),r=Math.abs(Math.floor(t/60)),n=Math.abs(t%60).toString().padStart(2,"0");return`${t>0?"-":"+"}${r.toString().padStart(2,"0")}${n}`}static createStashReflogEntry(t,r,n){let i=t.name.replace(/\s/g,""),a="0000000000000000000000000000000000000000",o=Math.floor(Date.now()/1e3),s=e.timezoneOffsetForRefLogEntry;return`${a} ${r} ${i} ${t.email} ${o} ${s}	${n}
`}static getStashReflogEntry(t,r=!1){return t.split(`
`).filter(a=>a).reverse().map((a,o)=>r?`stash@{${o}}: ${a.split("	")[1]}`:a)}},Ab={stage:Le,workdir:Ir},go;async function Br(e,t){return go===void 0&&(go=new nn),go.acquire(e,t)}async function Bb(e,t,r,n,i=null){let a=R(r,n),o=await e.lstat(a);if(!o)throw new H(a);if(o.isDirectory())throw new N(`${a}: file expected, but found directory`);let s=i?await hh({fs:e,gitdir:t,oid:i}):void 0,l=s?i:void 0;return s||await Br({fs:e,gitdir:t,currentFilepath:a},async()=>{let f=o.isSymbolicLink()?await e.readlink(a).then(_h):await e.read(a);if(f===null)throw new H(a);l=await yt({fs:e,gitdir:t,type:"blob",object:f})}),l}async function Ib({fs:e,dir:t,gitdir:r,entries:n}){async function i(a){if(a.type==="tree"){if(!a.oid){let o=await Promise.all(a.children.map(i));a.oid=await Sn({fs:e,gitdir:r,tree:o}),a.mode=16384}}else a.type==="blob"&&(a.oid=await Bb(e,r,t,a.path,a.oid),a.mode=33188);return a.path=a.path.split("/").pop(),a}return Promise.all(n.map(i))}async function ah({fs:e,dir:t,gitdir:r,treePair:n}){let i=n[1]==="stage",a=n.map(d=>typeof d=="string"?Ab[d]():d),o=[],c=await ge({fs:e,cache:{},dir:t,gitdir:r,trees:a,map:async(d,[p,y])=>{if(!(d==="."||await _e.isIgnored({fs:e,dir:t,gitdir:r,filepath:d}))&&y)return(!p||await p.oid()!==await y.oid()&&await y.oid()!==void 0)&&o.push([p,y]),{mode:await y.mode(),path:d,oid:await y.oid(),type:await y.type()}},reduce:async(d,p)=>(p=p.filter(Boolean),d?(d.children=p,d):p.length>0?p:void 0),iterate:async(d,p)=>{let y=[];for(let v of p){let[m,g]=v;i?g&&(await e.exists(`${t}/${g.toString()}`)?y.push(v):o.push([null,g])):m&&(g?y.push(v):o.push([m,null]))}return y.length?Promise.all(y.map(d)):[]}});if(o.length===0||c.length===0)return null;let h=(await Ib({fs:e,dir:t,gitdir:r,entries:c})).filter(Boolean).map(d=>({mode:d.mode,path:d.path,oid:d.oid,type:d.type}));return Sn({fs:e,gitdir:r,tree:h})}async function Tb({fs:e,dir:t,gitdir:r,stashCommit:n,parentCommit:i,wasStaged:a}){let o=[],s=[],l=await ge({fs:e,cache:{},dir:t,gitdir:r,trees:[xt({ref:i}),xt({ref:n})],map:async(f,[c,u])=>{if(f==="."||await _e.isIgnored({fs:e,dir:t,gitdir:r,filepath:f}))return;let h=u?await u.type():await c.type();if(h!=="tree"&&h!=="blob")return;if(!u&&c){let p=h==="tree"?"rmdir":"rm";return h==="tree"&&o.push(f),h==="blob"&&a&&s.push({filepath:f,oid:await c.oid()}),{method:p,filepath:f}}let d=await u.oid();if(!c||await c.oid()!==d)return h==="tree"?{method:"mkdir",filepath:f}:(a&&s.push({filepath:f,oid:d,stats:await e.lstat(R(t,f))}),{method:"write",filepath:f,oid:d})}});await Br({fs:e,gitdir:r,dirRemoved:o,ops:l},async()=>{for(let f of l){let c=R(t,f.filepath);switch(f.method){case"rmdir":await e.rmdir(c);break;case"mkdir":await e.mkdir(c);break;case"rm":await e.rm(c);break;case"write":if(!o.some(u=>c.startsWith(u))){let{object:u}=await G({fs:e,cache:{},gitdir:r,oid:f.oid});await e.exists(c)&&await e.rm(c),await e.write(c,u)}break}}}),await K.acquire({fs:e,gitdir:r,cache:{}},async f=>{s.forEach(({filepath:c,stats:u,oid:h})=>{f.insert({filepath:c,stats:u,oid:h})})})}var ze=class e{constructor({fs:t,dir:r,gitdir:n=R(r,".git")}){Object.assign(this,{fs:t,dir:r,gitdir:n,_author:null})}static get refStash(){return"refs/stash"}static get refLogsStash(){return"logs/refs/stash"}get refStashPath(){return R(this.gitdir,e.refStash)}get refLogsStashPath(){return R(this.gitdir,e.refLogsStash)}async getAuthor(){if(!this._author&&(this._author=await be({fs:this.fs,gitdir:this.gitdir,author:{}}),!this._author))throw new ot("author");return this._author}async getStashSHA(t,r){return await this.fs.exists(this.refStashPath)?(r||await this.readStashReflogs({parsed:!1}))[t].split(" ")[1]:null}async writeStashCommit({message:t,tree:r,parent:n}){return Ud({fs:this.fs,gitdir:this.gitdir,commit:{message:t,tree:r,parent:n,author:await this.getAuthor(),committer:await this.getAuthor()}})}async readStashCommit(t){let r=await this.readStashReflogs({parsed:!1});if(t!==0&&(t<0||t>r.length-1))throw new Dt(`stash@${t}`,"number that is in range of [0, num of stash pushed]");let n=await this.getStashSHA(t,r);return n?kr({fs:this.fs,cache:{},gitdir:this.gitdir,oid:n}):{}}async writeStashRef(t){return P.writeRef({fs:this.fs,gitdir:this.gitdir,ref:e.refStash,value:t})}async writeStashReflogEntry({stashCommit:t,message:r}){let n=await this.getAuthor(),i=Si.createStashReflogEntry(n,t,r),a=this.refLogsStashPath;await Br({filepath:a,entry:i},async()=>{let o=await this.fs.exists(a)?await this.fs.read(a,"utf8"):"";await this.fs.write(a,o+i,"utf8")})}async readStashReflogs({parsed:t=!1}){if(!await this.fs.exists(this.refLogsStashPath))return[];let r=await this.fs.read(this.refLogsStashPath,"utf8");return Si.getStashReflogEntry(r,t)}};async function Nd({fs:e,dir:t,gitdir:r,message:n=""}){let i=new ze({fs:e,dir:t,gitdir:r});await i.getAuthor();let a=await xe({fs:e,gitdir:r,fullname:!1}),o=await P.resolve({fs:e,gitdir:r,ref:"HEAD"}),l=(await Uo({fs:e,dir:t,gitdir:r,oid:o})).commit.message,f=[o],c=null,u=xt({ref:"HEAD"}),h=await ah({fs:e,dir:t,gitdir:r,treePair:[xt({ref:"HEAD"}),"stage"]});if(h){let v=await i.writeStashCommit({message:`stash-Index: WIP on ${a} - ${new Date().toISOString()}`,tree:h,parent:f});f.push(v),c=h,u=Le()}let d=await ah({fs:e,dir:t,gitdir:r,treePair:[u,"workdir"]});if(d){let v=await i.writeStashCommit({message:`stash-WorkDir: WIP on ${a} - ${new Date().toISOString()}`,tree:d,parent:[f[f.length-1]]});f.push(v),c=d}if(!c||!h&&!d)throw new H("changes, nothing to stash");let p=(n.trim()||`WIP on ${a}`)+`: ${o.substring(0,7)} ${l}`;return{stashCommit:await i.writeStashCommit({message:p,tree:c,parent:f}),stashMsg:p,branch:a,stashMgr:i}}async function Rb({fs:e,dir:t,gitdir:r,message:n=""}){let{stashCommit:i,stashMsg:a,branch:o,stashMgr:s}=await Nd({fs:e,dir:t,gitdir:r,message:n});return await s.writeStashRef(i),await s.writeStashReflogEntry({stashCommit:i,message:a}),await Fo({fs:e,dir:t,gitdir:r,ref:o,track:!1,force:!0}),i}async function Ob({fs:e,dir:t,gitdir:r,message:n=""}){let{stashCommit:i}=await Nd({fs:e,dir:t,gitdir:r,message:n});return i}async function Md({fs:e,dir:t,gitdir:r,refIdx:n=0}){let a=await new ze({fs:e,dir:t,gitdir:r}).readStashCommit(n),{parent:o=null}=a.commit?a.commit:{};if(!(!o||!Array.isArray(o)))for(let s=0;s<o.length-1;s++){let f=(await kr({fs:e,cache:{},gitdir:r,oid:o[s+1]})).commit.message.startsWith("stash-Index");await Tb({fs:e,dir:t,gitdir:r,stashCommit:o[s+1],parentCommit:o[s],wasStaged:f})}}async function jd({fs:e,dir:t,gitdir:r,refIdx:n=0}){let i=new ze({fs:e,dir:t,gitdir:r});if(!(await i.readStashCommit(n)).commit)return;let o=i.refStashPath;await Br(o,async()=>{await e.exists(o)&&await e.rm(o)});let s=await i.readStashReflogs({parsed:!1});if(!s.length)return;s.splice(n,1);let l=i.refLogsStashPath;await Br({reflogEntries:s,stashReflogPath:l,stashMgr:i},async()=>{if(s.length){await e.write(l,s.reverse().join(`
`)+`
`,"utf8");let f=s[s.length-1].split(" ")[1];await i.writeStashRef(f)}else await e.rm(l)})}async function $b({fs:e,dir:t,gitdir:r}){return new ze({fs:e,dir:t,gitdir:r}).readStashReflogs({parsed:!0})}async function Pb({fs:e,dir:t,gitdir:r}){let n=new ze({fs:e,dir:t,gitdir:r}),i=[n.refStashPath,n.refLogsStashPath];await Br(i,async()=>{await Promise.all(i.map(async a=>{if(await e.exists(a))return e.rm(a)}))})}async function Fb({fs:e,dir:t,gitdir:r,refIdx:n=0}){await Md({fs:e,dir:t,gitdir:r,refIdx:n}),await jd({fs:e,dir:t,gitdir:r,refIdx:n})}async function zd({fs:e,dir:t,gitdir:r=R(t,".git"),op:n="push",message:i="",refIdx:a=0}){b("fs",e),b("dir",t),b("gitdir",r),b("op",n);let o={push:Rb,apply:Md,drop:jd,list:$b,clear:Pb,pop:Fb,create:Ob},s=["apply","drop","pop"];try{let l=new C(e);["refs","logs","logs/refs"].map(u=>R(r,u)).forEach(async u=>{await l.exists(u)||await l.mkdir(u)});let c=o[n];if(c){if(s.includes(n)&&a<0)throw new Dt(`stash@${a}`,"number that is in range of [0, num of stash pushed]");return await c({fs:l,dir:t,gitdir:r,message:i,refIdx:a})}throw new Error(`To be implemented: ${n}`)}catch(l){throw l.caller="git.stash",l}}async function Ld({fs:e,dir:t,gitdir:r=R(t,".git"),filepath:n,cache:i={}}){try{b("fs",e),b("gitdir",r),b("filepath",n);let a=new C(e);if(await _e.isIgnored({fs:a,gitdir:r,dir:t,filepath:n}))return"ignored";let s=await Cb({fs:a,cache:i,gitdir:r}),l=await qd({fs:a,cache:i,gitdir:r,tree:s,path:n}),f=await K.acquire({fs:a,gitdir:r,cache:i},async function(y){for(let v of y)if(v.path===n)return v;return null}),c=await a.lstat(R(t,n)),u=l!==null,h=f!==null,d=c!==null,p=async()=>{if(h&&!mi(f,c))return f.oid;{let y=await a.read(R(t,n)),v=await Pd({gitdir:r,type:"blob",object:y});return h&&f.oid===v&&c.size!==-1&&K.acquire({fs:a,gitdir:r,cache:i},async function(m){m.insert({filepath:n,stats:c,oid:v})}),v}};if(!u&&!d&&!h)return"absent";if(!u&&!d&&h)return"*absent";if(!u&&d&&!h)return"*added";if(!u&&d&&h)return await p()===f.oid?"added":"*added";if(u&&!d&&!h)return"deleted";if(u&&!d&&h)return l===f.oid,"*deleted";if(u&&d&&!h)return await p()===l?"*undeleted":"*undeletemodified";if(u&&d&&h){let y=await p();return y===l?y===f.oid?"unmodified":"*unmodified":y===f.oid?"modified":"*modified"}}catch(a){throw a.caller="git.status",a}}async function qd({fs:e,cache:t,gitdir:r,tree:n,path:i}){typeof i=="string"&&(i=i.split("/"));let a=i.shift();for(let o of n)if(o.path===a){if(i.length===0)return o.oid;let{type:s,object:l}=await G({fs:e,cache:t,gitdir:r,oid:o.oid});if(s==="tree"){let f=wt.from(l);return qd({fs:e,cache:t,gitdir:r,tree:f,path:i})}if(s==="blob")throw new lt(o.oid,s,"blob",i.join("/"))}return null}async function Cb({fs:e,cache:t,gitdir:r}){let n;try{n=await P.resolve({fs:e,gitdir:r,ref:"HEAD"})}catch(a){if(a instanceof H)return[]}let{tree:i}=await Tr({fs:e,cache:t,gitdir:r,oid:n});return i}async function Hd({fs:e,dir:t,gitdir:r=R(t,".git"),ref:n="HEAD",filepaths:i=["."],filter:a,cache:o={},ignored:s=!1}){try{b("fs",e),b("gitdir",r),b("ref",n);let l=new C(e);return await ge({fs:l,cache:o,dir:t,gitdir:r,trees:[xt({ref:n}),Ir(),Le()],map:async function(f,[c,u,h]){if(!c&&!h&&u&&!s&&await _e.isIgnored({fs:l,dir:t,filepath:f})||!i.some(A=>Rh(f,A)))return null;if(a&&!a(f))return;let[d,p,y]=await Promise.all([c&&c.type(),u&&u.type(),h&&h.type()]),v=[d,p,y].includes("blob");if((d==="tree"||d==="special")&&!v)return;if(d==="commit")return null;if((p==="tree"||p==="special")&&!v)return;if(y==="commit")return null;if((y==="tree"||y==="special")&&!v)return;let m=d==="blob"?await c.oid():void 0,g=y==="blob"?await h.oid():void 0,S;d!=="blob"&&p==="blob"&&y!=="blob"?S="42":p==="blob"&&(S=await u.oid());let k=[void 0,m,S,g],E=k.map(A=>k.indexOf(A));return E.shift(),[f,...E]}})}catch(l){throw l.caller="git.statusMatrix",l}}async function Gd({fs:e,dir:t,gitdir:r=R(t,".git"),ref:n,object:i,force:a=!1}){try{b("fs",e),b("gitdir",r),b("ref",n);let o=new C(e);if(n===void 0)throw new pt("ref");n=n.startsWith("refs/tags/")?n:`refs/tags/${n}`;let s=await P.resolve({fs:o,gitdir:r,ref:i||"HEAD"});if(!a&&await P.exists({fs:o,gitdir:r,ref:n}))throw new Ct("tag",n);await P.writeRef({fs:o,gitdir:r,ref:n,value:s})}catch(o){throw o.caller="git.tag",o}}async function Zd({fs:e,dir:t,gitdir:r=R(t,".git"),cache:n={},filepath:i,oid:a,mode:o,add:s,remove:l,force:f}){try{b("fs",e),b("gitdir",r),b("filepath",i);let c=new C(e);if(l)return await K.acquire({fs:c,gitdir:r,cache:n},async function(h){if(!f){let d=await c.lstat(R(t,i));if(d){if(d.isDirectory())throw new ye("directory");return}}h.has({filepath:i})&&h.delete({filepath:i})});let u;if(!a){if(u=await c.lstat(R(t,i)),!u)throw new H(`file at "${i}" on disk and "remove" not set`);if(u.isDirectory())throw new ye("directory")}return await K.acquire({fs:c,gitdir:r,cache:n},async function(h){if(!s&&!h.has({filepath:i}))throw new H(`file at "${i}" in index and "add" not set`);let d;if(a)d={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:o,uid:0,gid:0,size:0};else{d=u;let p=d.isSymbolicLink()?await c.readlink(R(t,i)):await c.read(R(t,i));a=await yt({fs:c,gitdir:r,type:"blob",format:"content",object:p})}return h.insert({filepath:i,oid:a,stats:d}),a})}catch(c){throw c.caller="git.updateIndex",c}}function Wd(){try{return Ti.version}catch(e){throw e.caller="git.version",e}}async function Xd({fs:e,dir:t,gitdir:r=R(t,".git"),trees:n,map:i,reduce:a,iterate:o,cache:s={}}){try{return b("fs",e),b("gitdir",r),b("trees",n),await ge({fs:new C(e),cache:s,dir:t,gitdir:r,trees:n,map:i,reduce:a,iterate:o})}catch(l){throw l.caller="git.walk",l}}async function Vd({fs:e,dir:t,gitdir:r=R(t,".git"),blob:n}){try{return b("fs",e),b("gitdir",r),b("blob",n),await yt({fs:new C(e),gitdir:r,type:"blob",object:n,format:"content"})}catch(i){throw i.caller="git.writeBlob",i}}async function Yd({fs:e,dir:t,gitdir:r=R(t,".git"),commit:n}){try{return b("fs",e),b("gitdir",r),b("commit",n),await Ud({fs:new C(e),gitdir:r,commit:n})}catch(i){throw i.caller="git.writeCommit",i}}async function Kd({fs:e,dir:t,gitdir:r=R(t,".git"),type:n,object:i,format:a="parsed",oid:o,encoding:s=void 0}){try{let l=new C(e);if(a==="parsed"){switch(n){case"commit":i=mt.from(i).toObject();break;case"tree":i=wt.from(i).toObject();break;case"blob":i=Buffer.from(i,s);break;case"tag":i=Et.from(i).toObject();break;default:throw new lt(o||"",n,"blob|commit|tag|tree")}a="content"}return o=await yt({fs:l,gitdir:r,type:n,object:i,oid:o,format:a}),o}catch(l){throw l.caller="git.writeObject",l}}async function Jd({fs:e,dir:t,gitdir:r=R(t,".git"),ref:n,value:i,force:a=!1,symbolic:o=!1}){try{b("fs",e),b("gitdir",r),b("ref",n),b("value",i);let s=new C(e);if(!En(n,!0))throw new Dt(n,an.clean(n));if(!a&&await P.exists({fs:s,gitdir:r,ref:n}))throw new Ct("ref",n);o?await P.writeSymbolicRef({fs:s,gitdir:r,ref:n,value:i}):(i=await P.resolve({fs:s,gitdir:r,ref:i}),await P.writeRef({fs:s,gitdir:r,ref:n,value:i}))}catch(s){throw s.caller="git.writeRef",s}}async function Db({fs:e,gitdir:t,tag:r}){let n=Et.from(r).toObject();return await yt({fs:e,gitdir:t,type:"tag",object:n,format:"content"})}async function Qd({fs:e,dir:t,gitdir:r=R(t,".git"),tag:n}){try{return b("fs",e),b("gitdir",r),b("tag",n),await Db({fs:new C(e),gitdir:r,tag:n})}catch(i){throw i.caller="git.writeTag",i}}async function t0({fs:e,dir:t,gitdir:r=R(t,".git"),tree:n}){try{return b("fs",e),b("gitdir",r),b("tree",n),await Sn({fs:new C(e),gitdir:r,tree:n})}catch(i){throw i.caller="git.writeTree",i}}var Ub={Errors:wh,STAGE:Le,TREE:xt,WORKDIR:Ir,add:bh,abortMerge:yh,addNote:Sh,addRemote:Bh,annotatedTag:Ih,branch:Th,checkout:Fo,clone:Ch,commit:Dh,getConfig:Kh,getConfigAll:Jh,setConfig:Dd,currentBranch:Uh,deleteBranch:Nh,deleteRef:Mh,deleteRemote:jh,deleteTag:zh,expandOid:Lh,expandRef:qh,fastForward:Zh,fetch:Wh,findMergeBase:Xh,findRoot:Yh,getRemoteInfo:Qh,getRemoteInfo2:ed,hashBlob:rd,indexPack:nd,init:id,isDescendent:od,isIgnored:sd,listBranches:cd,listFiles:ld,listNotes:ud,listRefs:hd,listRemotes:dd,listServerRefs:pd,listTags:wd,log:yd,merge:gd,packObjects:bd,pull:vd,push:xd,readBlob:Sd,readCommit:Uo,readNote:Ad,readObject:Bd,readTag:Id,readTree:Td,remove:Rd,removeNote:Od,renameBranch:$d,resetIndex:Fd,updateIndex:Zd,resolveRef:Cd,status:Ld,statusMatrix:Hd,tag:Gd,version:Wd,walk:Xd,writeBlob:Vd,writeCommit:Yd,writeObject:Kd,writeRef:Jd,writeTag:Qd,writeTree:t0,stash:zd};F.Errors=wh;F.STAGE=Le;F.TREE=xt;F.WORKDIR=Ir;F.abortMerge=yh;F.add=bh;F.addNote=Sh;F.addRemote=Bh;F.annotatedTag=Ih;F.branch=Th;F.checkout=Fo;F.clone=Ch;F.commit=Dh;F.currentBranch=Uh;F.default=Ub;F.deleteBranch=Nh;F.deleteRef=Mh;F.deleteRemote=jh;F.deleteTag=zh;F.expandOid=Lh;F.expandRef=qh;F.fastForward=Zh;F.fetch=Wh;F.findMergeBase=Xh;F.findRoot=Yh;F.getConfig=Kh;F.getConfigAll=Jh;F.getRemoteInfo=Qh;F.getRemoteInfo2=ed;F.hashBlob=rd;F.indexPack=nd;F.init=id;F.isDescendent=od;F.isIgnored=sd;F.listBranches=cd;F.listFiles=ld;F.listNotes=ud;F.listRefs=hd;F.listRemotes=dd;F.listServerRefs=pd;F.listTags=wd;F.log=yd;F.merge=gd;F.packObjects=bd;F.pull=vd;F.push=xd;F.readBlob=Sd;F.readCommit=Uo;F.readNote=Ad;F.readObject=Bd;F.readTag=Id;F.readTree=Td;F.remove=Rd;F.removeNote=Od;F.renameBranch=$d;F.resetIndex=Fd;F.resolveRef=Cd;F.setConfig=Dd;F.stash=zd;F.status=Ld;F.statusMatrix=Hd;F.tag=Gd;F.updateIndex=Zd;F.version=Wd;F.walk=Xd;F.writeBlob=Vd;F.writeCommit=Yd;F.writeObject=Kd;F.writeRef=Jd;F.writeTag=Qd;F.writeTree=t0});var n0=O((sx,r0)=>{r0.exports=Nb;function Nb(e){var t,r;if(typeof e!="function")throw new Error("expected a function but got "+e);return function(){return t||(t=!0,r=e.apply(this,arguments)),r}}});var a0=O(i0=>{(function(e){"use strict";function t(m,g){var S;return m instanceof Buffer?S=m:S=Buffer.from(m.buffer,m.byteOffset,m.byteLength),S.toString(g)}var r=function(m){return Buffer.from(m)};function n(m){for(var g=0,S=Math.min(256*256,m.length+1),k=new Uint16Array(S),E=[],A=0;;){var w=g<m.length;if(!w||A>=S-1){var x=k.subarray(0,A),_=x;if(E.push(String.fromCharCode.apply(null,_)),!w)return E.join("");m=m.subarray(g),g=0,A=0}var T=m[g++];if((T&128)===0)k[A++]=T;else if((T&224)===192){var B=m[g++]&63;k[A++]=(T&31)<<6|B}else if((T&240)===224){var B=m[g++]&63,$=m[g++]&63;k[A++]=(T&31)<<12|B<<6|$}else if((T&248)===240){var B=m[g++]&63,$=m[g++]&63,D=m[g++]&63,U=(T&7)<<18|B<<12|$<<6|D;U>65535&&(U-=65536,k[A++]=U>>>10&1023|55296,U=56320|U&1023),k[A++]=U}}}function i(m){for(var g=0,S=m.length,k=0,E=Math.max(32,S+(S>>>1)+7),A=new Uint8Array(E>>>3<<3);g<S;){var w=m.charCodeAt(g++);if(w>=55296&&w<=56319){if(g<S){var x=m.charCodeAt(g);(x&64512)===56320&&(++g,w=((w&1023)<<10)+(x&1023)+65536)}if(w>=55296&&w<=56319)continue}if(k+4>A.length){E+=8,E*=1+g/m.length*2,E=E>>>3<<3;var _=new Uint8Array(E);_.set(A),A=_}if((w&4294967168)===0){A[k++]=w;continue}else if((w&4294965248)===0)A[k++]=w>>>6&31|192;else if((w&4294901760)===0)A[k++]=w>>>12&15|224,A[k++]=w>>>6&63|128;else if((w&4292870144)===0)A[k++]=w>>>18&7|240,A[k++]=w>>>12&63|128,A[k++]=w>>>6&63|128;else continue;A[k++]=w&63|128}return A.slice?A.slice(0,k):A.subarray(0,k)}var a="Failed to ",o=function(m,g,S){if(m)throw new Error("".concat(a).concat(g,": the '").concat(S,"' option is unsupported."))},s=typeof Buffer=="function"&&Buffer.from,l=s?r:i;function f(){this.encoding="utf-8"}f.prototype.encode=function(m,g){return o(g&&g.stream,"encode","stream"),l(m)};function c(m){var g;try{var S=new Blob([m],{type:"text/plain;charset=UTF-8"});g=URL.createObjectURL(S);var k=new XMLHttpRequest;return k.open("GET",g,!1),k.send(),k.responseText}finally{g&&URL.revokeObjectURL(g)}}var u=!s&&typeof Blob=="function"&&typeof URL=="function"&&typeof URL.createObjectURL=="function",h=["utf-8","utf8","unicode-1-1-utf-8"],d=n;s?d=t:u&&(d=function(m){try{return c(m)}catch{return n(m)}});var p="construct 'TextDecoder'",y="".concat(a," ").concat(p,": the ");function v(m,g){o(g&&g.fatal,p,"fatal"),m=m||"utf-8";var S;if(s?S=Buffer.isEncoding(m):S=h.indexOf(m.toLowerCase())!==-1,!S)throw new RangeError("".concat(y," encoding label provided ('").concat(m,"') is invalid."));this.encoding=m,this.fatal=!1,this.ignoreBOM=!1}v.prototype.decode=function(m,g){o(g&&g.stream,"decode","stream");var S;return m instanceof Uint8Array?S=m:m.buffer instanceof ArrayBuffer?S=new Uint8Array(m.buffer):S=new Uint8Array(m),d(S,this.encoding)},e.TextEncoder=e.TextEncoder||f,e.TextDecoder=e.TextDecoder||v})(typeof window<"u"?window:typeof global<"u"?global:i0)});var s0=O((fx,o0)=>{a0();o0.exports={encode:e=>new TextEncoder().encode(e),decode:e=>new TextDecoder().decode(e)}});var f0=O((lx,c0)=>{c0.exports=Mb;function Mb(e,t,r){var n;return function(){if(!t)return e.apply(this,arguments);var i=this,a=arguments,o=r&&!n;if(clearTimeout(n),n=setTimeout(function(){if(n=null,!o)return e.apply(i,a)},t),o)return e.apply(this,arguments)}}});var Ri=O((ux,h0)=>{function l0(e){if(e.length===0)return".";let t=u0(e);return t=t.reduce(qb,[]),No(...t)}function jb(...e){let t="";for(let r of e)r.startsWith("/")?t=r:t=l0(No(t,r));return t}function No(...e){if(e.length===0)return"";let t=e.join("/");return t=t.replace(/\/{2,}/g,"/"),t}function u0(e){if(e.length===0)return[];if(e==="/")return["/"];let t=e.split("/");return t[t.length-1]===""&&t.pop(),e[0]==="/"?t[0]="/":t[0]!=="."&&t.unshift("."),t}function zb(e){let t=e.lastIndexOf("/");if(t===-1)throw new Error(`Cannot get dirname of "${e}"`);return t===0?"/":e.slice(0,t)}function Lb(e){if(e==="/")throw new Error(`Cannot get basename of "${e}"`);let t=e.lastIndexOf("/");return t===-1?e:e.slice(t+1)}function qb(e,t){if(e.length===0)return e.push(t),e;if(t===".")return e;if(t===".."){if(e.length===1){if(e[0]==="/")throw new Error("Unable to normalize path - traverses above root directory");if(e[0]===".")return e.push(t),e}return e[e.length-1]===".."?(e.push(".."),e):(e.pop(),e)}return e.push(t),e}h0.exports={join:No,normalize:l0,split:u0,basename:Lb,dirname:zb,resolve:jb}});var Mo=O((hx,d0)=>{function Rr(e){return class extends Error{constructor(...t){super(...t),this.code=e,this.message?this.message=e+": "+this.message:this.message=e}}}var Hb=Rr("EEXIST"),Gb=Rr("ENOENT"),Zb=Rr("ENOTDIR"),Wb=Rr("ENOTEMPTY"),Xb=Rr("ETIMEDOUT"),Vb=Rr("EISDIR");d0.exports={EEXIST:Hb,ENOENT:Gb,ENOTDIR:Zb,ENOTEMPTY:Wb,ETIMEDOUT:Xb,EISDIR:Vb}});var y0=O((wx,m0)=>{var ut=Ri(),{EEXIST:p0,ENOENT:Yb,ENOTDIR:w0,ENOTEMPTY:Kb,EISDIR:Jb}=Mo(),st=0;m0.exports=class{constructor(){}_makeRoot(t=new Map){return t.set(st,{mode:511,type:"dir",size:0,ino:0,mtimeMs:Date.now()}),t}activate(t=null){t===null?this._root=new Map([["/",this._makeRoot()]]):typeof t=="string"?this._root=new Map([["/",this._makeRoot(this.parse(t))]]):this._root=t}get activated(){return!!this._root}deactivate(){this._root=void 0}size(){return this._countInodes(this._root.get("/"))-1}_countInodes(t){let r=1;for(let[n,i]of t)n!==st&&(r+=this._countInodes(i));return r}autoinc(){return this._maxInode(this._root.get("/"))+1}_maxInode(t){let r=t.get(st).ino;for(let[n,i]of t)n!==st&&(r=Math.max(r,this._maxInode(i)));return r}print(t=this._root.get("/")){let r="",n=(i,a)=>{for(let[o,s]of i){if(o===0)continue;let l=s.get(st),f=l.mode.toString(8);r+=`${"	".repeat(a)}${o}	${f}`,l.type==="file"?r+=`	${l.size}	${l.mtimeMs}
`:(r+=`
`,n(s,a+1))}};return n(t,0),r}parse(t){let r=0;function n(s){let l=++r,f=s.length===1?"dir":"file",[c,u,h]=s;return c=parseInt(c,8),u=u?parseInt(u):0,h=h?parseInt(h):Date.now(),new Map([[st,{mode:c,type:f,size:u,mtimeMs:h,ino:l}]])}let i=t.trim().split(`
`),a=this._makeRoot(),o=[{indent:-1,node:a},{indent:0,node:null}];for(let s of i){let f=s.match(/^\t*/)[0].length;s=s.slice(f);let[c,...u]=s.split("	"),h=n(u);if(f<=o[o.length-1].indent)for(;f<=o[o.length-1].indent;)o.pop();o.push({indent:f,node:h}),o[o.length-2].node.set(c,h)}return a}_lookup(t,r=!0){let n=this._root,i="/",a=ut.split(t);for(let o=0;o<a.length;++o){let s=a[o];if(n=n.get(s),!n)throw new Yb(t);if(r||o<a.length-1){let l=n.get(st);if(l.type==="symlink"){let f=ut.resolve(i,l.target);n=this._lookup(f)}i?i=ut.join(i,s):i=s}}return n}mkdir(t,{mode:r}){if(t==="/")throw new p0;let n=this._lookup(ut.dirname(t)),i=ut.basename(t);if(n.has(i))throw new p0;let a=new Map,o={mode:r,type:"dir",size:0,mtimeMs:Date.now(),ino:this.autoinc()};a.set(st,o),n.set(i,a)}rmdir(t){let r=this._lookup(t);if(r.get(st).type!=="dir")throw new w0;if(r.size>1)throw new Kb;let n=this._lookup(ut.dirname(t)),i=ut.basename(t);n.delete(i)}readdir(t){let r=this._lookup(t);if(r.get(st).type!=="dir")throw new w0;return[...r.keys()].filter(n=>typeof n=="string")}writeStat(t,r,{mode:n}){let i,a;try{a=this.stat(t)}catch{}if(a!==void 0){if(a.type==="dir")throw new Jb;n==null&&(n=a.mode),i=a.ino}n==null&&(n=438),i==null&&(i=this.autoinc());let o=this._lookup(ut.dirname(t)),s=ut.basename(t),l={mode:n,type:"file",size:r,mtimeMs:Date.now(),ino:i},f=new Map;return f.set(st,l),o.set(s,f),l}unlink(t){let r=this._lookup(ut.dirname(t)),n=ut.basename(t);r.delete(n)}rename(t,r){let n=ut.basename(r),i=this._lookup(t);this._lookup(ut.dirname(r)).set(n,i),this.unlink(t)}stat(t){return this._lookup(t).get(st)}lstat(t){return this._lookup(t,!1).get(st)}readlink(t){return this._lookup(t,!1).get(st).target}symlink(t,r){let n,i;try{let f=this.stat(r);i===null&&(i=f.mode),n=f.ino}catch{}i==null&&(i=40960),n==null&&(n=this.autoinc());let a=this._lookup(ut.dirname(r)),o=ut.basename(r),s={mode:i,type:"symlink",target:t,size:0,mtimeMs:Date.now(),ino:n},l=new Map;return l.set(st,s),a.set(o,l),s}_du(t){let r=0;for(let[n,i]of t.entries())n===st?r+=i.size:r+=this._du(i);return r}du(t){let r=this._lookup(t);return this._du(r)}}});var zo=O(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});var Oi=class{constructor(t="keyval-store",r="keyval"){this.storeName=r,this._dbName=t,this._storeName=r,this._init()}_init(){this._dbp||(this._dbp=new Promise((t,r)=>{let n=indexedDB.open(this._dbName);n.onerror=()=>r(n.error),n.onsuccess=()=>t(n.result),n.onupgradeneeded=()=>{n.result.createObjectStore(this._storeName)}}))}_withIDBStore(t,r){return this._init(),this._dbp.then(n=>new Promise((i,a)=>{let o=n.transaction(this.storeName,t);o.oncomplete=()=>i(),o.onabort=o.onerror=()=>a(o.error),r(o.objectStore(this.storeName))}))}_close(){return this._init(),this._dbp.then(t=>{t.close(),this._dbp=void 0})}},jo;function qe(){return jo||(jo=new Oi),jo}function Qb(e,t=qe()){let r;return t._withIDBStore("readwrite",n=>{r=n.get(e)}).then(()=>r.result)}function t1(e,t,r=qe()){return r._withIDBStore("readwrite",n=>{n.put(t,e)})}function e1(e,t,r=qe()){return r._withIDBStore("readwrite",n=>{let i=n.get(e);i.onsuccess=()=>{n.put(t(i.result),e)}})}function r1(e,t=qe()){return t._withIDBStore("readwrite",r=>{r.delete(e)})}function n1(e=qe()){return e._withIDBStore("readwrite",t=>{t.clear()})}function i1(e=qe()){let t=[];return e._withIDBStore("readwrite",r=>{(r.openKeyCursor||r.openCursor).call(r).onsuccess=function(){this.result&&(t.push(this.result.key),this.result.continue())}}).then(()=>t)}function a1(e=qe()){return e._close()}Yt.Store=Oi;Yt.get=Qb;Yt.set=t1;Yt.update=e1;Yt.del=r1;Yt.clear=n1;Yt.keys=i1;Yt.close=a1});var _0=O((gx,g0)=>{var Ee=zo();g0.exports=class{constructor(t,r){this._database=t,this._storename=r,this._store=new Ee.Store(this._database,this._storename)}saveSuperblock(t){return Ee.set("!root",t,this._store)}loadSuperblock(){return Ee.get("!root",this._store)}readFile(t){return Ee.get(t,this._store)}writeFile(t,r){return Ee.set(t,r,this._store)}unlink(t){return Ee.del(t,this._store)}wipe(){return Ee.clear(this._store)}close(){return Ee.close(this._store)}}});var v0=O((bx,b0)=>{b0.exports=class{constructor(t){this._url=t}loadSuperblock(){return fetch(this._url+"/.superblock.txt").then(t=>t.ok?t.text():null)}async readFile(t){let r=await fetch(this._url+t);if(r.status===200)return r.arrayBuffer();throw new Error("ENOENT")}async sizeFile(t){let r=await fetch(this._url+t,{method:"HEAD"});if(r.status===200)return r.headers.get("content-length");throw new Error("ENOENT")}}});var E0=O((xx,x0)=>{var Bn=zo(),o1=e=>new Promise(t=>setTimeout(t,e));x0.exports=class{constructor(t,r){this._id=Math.random(),this._database=t,this._storename=r,this._store=new Bn.Store(this._database,this._storename),this._lock=null}async has({margin:t=2e3}={}){if(this._lock&&this._lock.holder===this._id){let r=Date.now();return this._lock.expires>r+t?!0:await this.renew()}else return!1}async renew({ttl:t=5e3}={}){let r;return await Bn.update("lock",n=>{let a=Date.now()+t;return r=n&&n.holder===this._id,this._lock=r?{holder:this._id,expires:a}:n,this._lock},this._store),r}async acquire({ttl:t=5e3}={}){let r,n,i;if(await Bn.update("lock",a=>{let o=Date.now(),s=o+t;return n=a&&a.expires<o,r=a===void 0||n,i=a&&a.holder===this._id,this._lock=r?{holder:this._id,expires:s}:a,this._lock},this._store),i)throw new Error("Mutex double-locked");return r}async wait({interval:t=100,limit:r=6e3,ttl:n}={}){for(;r--;){if(await this.acquire({ttl:n}))return!0;await o1(t)}throw new Error("Mutex timeout")}async release({force:t=!1}={}){let r,n,i;if(await Bn.update("lock",a=>(r=t||a&&a.holder===this._id,n=a===void 0,i=a&&a.holder!==this._id,this._lock=r?void 0:a,this._lock),this._store),await Bn.close(this._store),!r&&!t){if(n)throw new Error("Mutex double-freed");if(i)throw new Error("Mutex lost ownership")}return r}}});var S0=O((kx,k0)=>{k0.exports=class{constructor(t){this._id=Math.random(),this._database=t,this._has=!1,this._release=null}async has(){return this._has}async acquire(){return new Promise(t=>{navigator.locks.request(this._database+"_lock",{ifAvailable:!0},r=>(this._has=!!r,t(!!r),new Promise(n=>{this._release=n})))})}async wait({timeout:t=6e5}={}){return new Promise((r,n)=>{let i=new AbortController;setTimeout(()=>{i.abort(),n(new Error("Mutex timeout"))},t),navigator.locks.request(this._database+"_lock",{signal:i.signal},a=>(this._has=!!a,r(!!a),new Promise(o=>{this._release=o})))})}async release({force:t=!1}={}){this._has=!1,this._release?this._release():t&&navigator.locks.request(this._database+"_lock",{steal:!0},r=>!0)}}});var I0=O((Ax,B0)=>{var{encode:s1,decode:A0}=s0(),c1=f0(),f1=y0(),{ENOENT:l1,ENOTEMPTY:u1,ETIMEDOUT:h1}=Mo(),d1=_0(),p1=v0(),w1=E0(),m1=S0(),In=Ri();B0.exports=class{constructor(){this.saveSuperblock=c1(()=>{this.flush()},500)}async init(t,{wipe:r,url:n,urlauto:i,fileDbName:a=t,db:o=null,fileStoreName:s=t+"_files",lockDbName:l=t+"_lock",lockStoreName:f=t+"_lock"}={}){this._name=t,this._idb=o||new d1(a,s),this._mutex=navigator.locks?new m1(t):new w1(l,f),this._cache=new f1(t),this._opts={wipe:r,url:n},this._needsWipe=!!r,n&&(this._http=new p1(n),this._urlauto=!!i)}async activate(){if(this._cache.activated)return;this._needsWipe&&(this._needsWipe=!1,await this._idb.wipe(),await this._mutex.release({force:!0})),await this._mutex.has()||await this._mutex.wait();let t=await this._idb.loadSuperblock();if(t)this._cache.activate(t);else if(this._http){let r=await this._http.loadSuperblock();this._cache.activate(r),await this._saveSuperblock()}else this._cache.activate();if(!await this._mutex.has())throw new h1}async deactivate(){await this._mutex.has()&&await this._saveSuperblock(),this._cache.deactivate();try{await this._mutex.release()}catch(t){console.log(t)}await this._idb.close()}async _saveSuperblock(){this._cache.activated&&(this._lastSavedAt=Date.now(),await this._idb.saveSuperblock(this._cache._root))}_writeStat(t,r,n){let i=In.split(In.dirname(t)),a=i.shift();for(let o of i){a=In.join(a,o);try{this._cache.mkdir(a,{mode:511})}catch{}}return this._cache.writeStat(t,r,n)}async readFile(t,r){let n=typeof r=="string"?r:r&&r.encoding;if(n&&n!=="utf8")throw new Error('Only "utf8" encoding is supported in readFile');let i=null,a=null;try{a=this._cache.stat(t),i=await this._idb.readFile(a.ino)}catch(o){if(!this._urlauto)throw o}if(!i&&this._http){let o=this._cache.lstat(t);for(;o.type==="symlink";)t=In.resolve(In.dirname(t),o.target),o=this._cache.lstat(t);i=await this._http.readFile(t)}if(i&&((!a||a.size!=i.byteLength)&&(a=await this._writeStat(t,i.byteLength,{mode:a?a.mode:438}),this.saveSuperblock()),n==="utf8"?i=A0(i):i.toString=()=>A0(i)),!a)throw new l1(t);return i}async writeFile(t,r,n){let{mode:i,encoding:a="utf8"}=n;if(typeof r=="string"){if(a!=="utf8")throw new Error('Only "utf8" encoding is supported in writeFile');r=s1(r)}let o=await this._cache.writeStat(t,r.byteLength,{mode:i});await this._idb.writeFile(o.ino,r)}async unlink(t,r){let n=this._cache.lstat(t);this._cache.unlink(t),n.type!=="symlink"&&await this._idb.unlink(n.ino)}readdir(t,r){return this._cache.readdir(t)}mkdir(t,r){let{mode:n=511}=r;this._cache.mkdir(t,{mode:n})}rmdir(t,r){if(t==="/")throw new u1;this._cache.rmdir(t)}rename(t,r){this._cache.rename(t,r)}stat(t,r){return this._cache.stat(t)}lstat(t,r){return this._cache.lstat(t)}readlink(t,r){return this._cache.readlink(t)}symlink(t,r){this._cache.symlink(t,r)}async backFile(t,r){let n=await this._http.sizeFile(t);await this._writeStat(t,n,r)}du(t){return this._cache.du(t)}flush(){return this._saveSuperblock()}}});var R0=O((Ix,T0)=>{T0.exports=class{constructor(t){this.type=t.type,this.mode=t.mode,this.size=t.size,this.ino=t.ino,this.mtimeMs=t.mtimeMs,this.ctimeMs=t.ctimeMs||t.mtimeMs,this.uid=1,this.gid=1,this.dev=1}isFile(){return this.type==="file"}isDirectory(){return this.type==="dir"}isSymbolicLink(){return this.type==="symlink"}}});var F0=O((Rx,P0)=>{var y1=I0(),O0=R0(),$i=Ri();function Kt(e,t,...r){return e=$i.normalize(e),(typeof t>"u"||typeof t=="function")&&(t={}),typeof t=="string"&&(t={encoding:t}),[e,t,...r]}function g1(e,t,r,...n){return e=$i.normalize(e),(typeof r>"u"||typeof r=="function")&&(r={}),typeof r=="string"&&(r={encoding:r}),[e,t,r,...n]}function $0(e,t,...r){return[$i.normalize(e),$i.normalize(t),...r]}P0.exports=class{constructor(t,r={}){this.init=this.init.bind(this),this.readFile=this._wrap(this.readFile,Kt,!1),this.writeFile=this._wrap(this.writeFile,g1,!0),this.unlink=this._wrap(this.unlink,Kt,!0),this.readdir=this._wrap(this.readdir,Kt,!1),this.mkdir=this._wrap(this.mkdir,Kt,!0),this.rmdir=this._wrap(this.rmdir,Kt,!0),this.rename=this._wrap(this.rename,$0,!0),this.stat=this._wrap(this.stat,Kt,!1),this.lstat=this._wrap(this.lstat,Kt,!1),this.readlink=this._wrap(this.readlink,Kt,!1),this.symlink=this._wrap(this.symlink,$0,!0),this.backFile=this._wrap(this.backFile,Kt,!0),this.du=this._wrap(this.du,Kt,!1),this._deactivationPromise=null,this._deactivationTimeout=null,this._activationPromise=null,this._operations=new Set,t&&this.init(t,r)}async init(...t){return this._initPromiseResolve&&await this._initPromise,this._initPromise=this._init(...t),this._initPromise}async _init(t,r={}){await this._gracefulShutdown(),this._activationPromise&&await this._deactivate(),this._backend&&this._backend.destroy&&await this._backend.destroy(),this._backend=r.backend||new y1,this._backend.init&&await this._backend.init(t,r),this._initPromiseResolve&&(this._initPromiseResolve(),this._initPromiseResolve=null),r.defer||this.stat("/")}async _gracefulShutdown(){this._operations.size>0&&(this._isShuttingDown=!0,await new Promise(t=>this._gracefulShutdownResolve=t),this._isShuttingDown=!1,this._gracefulShutdownResolve=null)}_wrap(t,r,n){return async(...i)=>{i=r(...i);let a={name:t.name,args:i};this._operations.add(a);try{return await this._activate(),await t.apply(this,i)}finally{this._operations.delete(a),n&&this._backend.saveSuperblock(),this._operations.size===0&&(this._deactivationTimeout||clearTimeout(this._deactivationTimeout),this._deactivationTimeout=setTimeout(this._deactivate.bind(this),500))}}}async _activate(){this._initPromise||console.warn(new Error(`Attempted to use LightningFS ${this._name} before it was initialized.`)),await this._initPromise,this._deactivationTimeout&&(clearTimeout(this._deactivationTimeout),this._deactivationTimeout=null),this._deactivationPromise&&await this._deactivationPromise,this._deactivationPromise=null,this._activationPromise||(this._activationPromise=this._backend.activate?this._backend.activate():Promise.resolve()),await this._activationPromise}async _deactivate(){return this._activationPromise&&await this._activationPromise,this._deactivationPromise||(this._deactivationPromise=this._backend.deactivate?this._backend.deactivate():Promise.resolve()),this._activationPromise=null,this._gracefulShutdownResolve&&this._gracefulShutdownResolve(),this._deactivationPromise}async readFile(t,r){return this._backend.readFile(t,r)}async writeFile(t,r,n){return await this._backend.writeFile(t,r,n),null}async unlink(t,r){return await this._backend.unlink(t,r),null}async readdir(t,r){return this._backend.readdir(t,r)}async mkdir(t,r){return await this._backend.mkdir(t,r),null}async rmdir(t,r){return await this._backend.rmdir(t,r),null}async rename(t,r){return await this._backend.rename(t,r),null}async stat(t,r){let n=await this._backend.stat(t,r);return new O0(n)}async lstat(t,r){let n=await this._backend.lstat(t,r);return new O0(n)}async readlink(t,r){return this._backend.readlink(t,r)}async symlink(t,r){return await this._backend.symlink(t,r),null}async backFile(t,r){return await this._backend.backFile(t,r),null}async du(t){return this._backend.du(t)}async flush(){return this._backend.flush()}}});var Lo=O(($x,C0)=>{var _1=n0(),b1=F0();function gt(e,t){return typeof e=="function"&&(t=e),t=_1(t),[(...n)=>t(null,...n),t]}C0.exports=class{constructor(...t){this.promises=new b1(...t),this.init=this.init.bind(this),this.readFile=this.readFile.bind(this),this.writeFile=this.writeFile.bind(this),this.unlink=this.unlink.bind(this),this.readdir=this.readdir.bind(this),this.mkdir=this.mkdir.bind(this),this.rmdir=this.rmdir.bind(this),this.rename=this.rename.bind(this),this.stat=this.stat.bind(this),this.lstat=this.lstat.bind(this),this.readlink=this.readlink.bind(this),this.symlink=this.symlink.bind(this),this.backFile=this.backFile.bind(this),this.du=this.du.bind(this),this.flush=this.flush.bind(this)}init(t,r){return this.promises.init(t,r)}readFile(t,r,n){let[i,a]=gt(r,n);this.promises.readFile(t,r).then(i).catch(a)}writeFile(t,r,n,i){let[a,o]=gt(n,i);this.promises.writeFile(t,r,n).then(a).catch(o)}unlink(t,r,n){let[i,a]=gt(r,n);this.promises.unlink(t,r).then(i).catch(a)}readdir(t,r,n){let[i,a]=gt(r,n);this.promises.readdir(t,r).then(i).catch(a)}mkdir(t,r,n){let[i,a]=gt(r,n);this.promises.mkdir(t,r).then(i).catch(a)}rmdir(t,r,n){let[i,a]=gt(r,n);this.promises.rmdir(t,r).then(i).catch(a)}rename(t,r,n){let[i,a]=gt(n);this.promises.rename(t,r).then(i).catch(a)}stat(t,r,n){let[i,a]=gt(r,n);this.promises.stat(t).then(i).catch(a)}lstat(t,r,n){let[i,a]=gt(r,n);this.promises.lstat(t).then(i).catch(a)}readlink(t,r,n){let[i,a]=gt(r,n);this.promises.readlink(t).then(i).catch(a)}symlink(t,r,n){let[i,a]=gt(n);this.promises.symlink(t,r).then(i).catch(a)}backFile(t,r,n){let[i,a]=gt(r,n);this.promises.backFile(t,r).then(i).catch(a)}du(t,r){let[n,i]=gt(r);this.promises.du(t).then(n).catch(i)}flush(t){let[r,n]=gt(t);this.promises.flush().then(r).catch(n)}}});var Px=Rn(e0()),Fx=Rn(Lo());var U0={};H0(U0,{default:()=>B1,request:()=>D0});function v1(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function x1(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:v1(e)}async function E1(e,t){let r=x1(e);for(;;){let{value:n,done:i}=await r.next();if(n&&await t(n),i)break}r.return&&r.return()}async function k1(e){let t=0,r=[];await E1(e,a=>{r.push(a),t+=a.byteLength});let n=new Uint8Array(t),i=0;for(let a of r)n.set(a,i),i+=a.byteLength;return n}function S1(e){if(e[Symbol.asyncIterator])return e;let t=e.getReader();return{next(){return t.read()},return(){return t.releaseLock(),{}},[Symbol.asyncIterator](){return this}}}async function D0({onProgress:e,url:t,method:r="GET",headers:n={},body:i}){i&&(i=await k1(i));let a=await fetch(t,{method:r,headers:n,body:i}),o=a.body&&a.body.getReader?S1(a.body):[new Uint8Array(await a.arrayBuffer())];n={};for(let[s,l]of a.headers.entries())n[s]=l;return{url:a.url,method:a.method,statusCode:a.status,statusMessage:a.statusText,body:o,headers:n}}var A1={request:D0},B1=A1;var qo=Rn(Vi()),I1=Rn(Lo());typeof globalThis<"u"&&(globalThis.Buffer=qo.Buffer);typeof window<"u"&&(window.Buffer=qo.Buffer);var export_Buffer=qo.Buffer;var export_LightningFS=I1.default;export{export_Buffer as Buffer,export_LightningFS as LightningFS,Px as git,U0 as http};
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

crc-32/crc32.js:
  (*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com *)

isomorphic-git/index.cjs:
  (*!
   * This code for `path.join` is directly copied from @zenfs/core/path for bundle size improvements.
   * SPDX-License-Identifier: LGPL-3.0-or-later
   * Copyright (c) James Prevett and other ZenFS contributors.
   *)
*/
